<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SUNSHYWOO`S BLOG | SUNSHYWOO`S BLOG</title><meta name="keywords" content="note gallery"><meta name="author" content="sunshywoo"><meta name="copyright" content="sunshywoo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="意休Doit | GTD清单处理                                                                                  切简版           资           启           检           助           md">
<meta property="og:type" content="website">
<meta property="og:title" content="SUNSHYWOO&#96;S BLOG">
<meta property="og:url" content="https://sunchauvel.github.io/Tasksold/index.html">
<meta property="og:site_name" content="SUNSHYWOO&#96;S BLOG">
<meta property="og:description" content="意休Doit | GTD清单处理                                                                                  切简版           资           启           检           助           md">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://myhkw.cn/open/img/lol">
<meta property="article:published_time" content="2023-11-26T05:44:10.463Z">
<meta property="article:modified_time" content="2022-06-12T16:17:29.793Z">
<meta property="article:author" content="sunshywoo">
<meta property="article:tag" content="note gallery">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://myhkw.cn/open/img/lol"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://sunchauvel.github.io/Tasksold/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":100,"languages":{"author":"Author: sunshywoo","link":"Link: ","source":"Source: SUNSHYWOO`S BLOG","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-center"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: false,
  isHighlightShrink: true,
  isToc: false,
  postUpdate: '2022-06-13 00:17:29'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" type="text/css" href="https://npm.elemecdn.com/js-heo@1.0.11/mainColor/heoMainColor.css"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zhheo/JS-Heo@main/rightmenu/rightmenu.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"/><!-- hexo injector head_end start --><link rel="stylesheet" href="/clock/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="SUNSHYWOO`S BLOG" type="application/atom+xml">
<link rel="alternate" href="/rss2.xml" title="SUNSHYWOO`S BLOG" type="application/rss+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/head.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">2</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">2</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fas fa-film"></i><span> Bangumis</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> Book</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Game</span></a></li><li><a class="site-page child" href="/galleryGroup/"><i class="fa-fw fas fa-images"></i><span> Gallery</span></a></li><li><a class="site-page child" href="/Tasks/"><i class="fa-fw fas fa-tasks"></i><span> Tasks</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url('https://myhkw.cn/open/img/acg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">SUNSHYWOO`S BLOG</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fas fa-film"></i><span> Bangumis</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> Book</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Game</span></a></li><li><a class="site-page child" href="/galleryGroup/"><i class="fa-fw fas fa-images"></i><span> Gallery</span></a></li><li><a class="site-page child" href="/Tasks/"><i class="fa-fw fas fa-tasks"></i><span> Tasks</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">SUNSHYWOO`S BLOG</h1></div></header><main class="layout" id="content-inner"><div id="page"><div id="article-container"><!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <title>意休Doit | GTD清单处理</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0">
    <meta name="description" content="意休Doit是一个完成事项的小工具，包括清单处理，内容记录（链接/检查卡/随记/问题/记忆项/特殊任务/任务进程/搜索记录），数据统筹处理（标签和项目管理）和签到等功能。">
    <link rel="shortcut icon" href="baobao.png" type="image/png">
    <link rel="bookmark" href="baobao.png">
    <link rel="stylesheet" type="text/css" href="review.css">
    <link rel="stylesheet" type="text/css" href="mobile.css">
  </head>
  <body class="theme-light">
    <span class="moremenubtn" data-status="0"></span>
    <div class="menu on">
      <h1>
        <img src="/Tasksold/index/logo.png" class="logo" alt="意休Doit的logo" title="留言板，点击跳转到留言板" onclick="toLink('../envelope')">
        <span class="menu-left">
          <span class="simplebtn" title="回到主编辑页的快捷键(Alt+A)">切简版</span>
          <span class="simplebtn" title="资料页-网站收藏">资</span>
          <span class="simplebtn" title="启动页-记录任务进程">启</span>
          <span class="simplebtn" title="检查页-数据显示和统筹(快捷键Alt+C)">检</span>
          <span class="simplebtn" title="助手页-自定义和帮助">助</span>
          <span class="simplebtn" title="切换到markdown插件">md</span>
          <span class="starbtn handstand-heart" title="今天心情不好，记录一下"></span>
          <span class="timeStatus" title="任务中/休息中"></span>
          <span class="taskwarn" title="近期存在定期任务，点击跳转查看">！定期任务 </span>
        </span>
      </h1>
      <span class="circlebtn listbtn" title="折叠/展开全部清单">折叠</span>
      <span class="circlebtn" title="打开/关闭输入框(快捷键Alt+W)">书写W</span>
      <span class="circlebtn" title="显示/隐藏总结面板(按任何键关闭)">总结</span>
      <span class="settingbtn" data-val="1" title="开启/关闭设置页面--自定义数据(Esc键->关闭总结面板+设置面板+书写框)">设置</span>

      <div class="getSummary">
        <div class="scrollbar_orange"></div>
        <div class="progress-outer" title="（点击查看特殊任务）显示日期+已完成任务数/总任务数"><span class="countdown"></span><span class="progress"></span></div>
      </div>
    </div>

    <div class="asidemenu">
      <div class="toshowmenu" data-status="0" data-aside="0" title="单击打开/关闭菜单，双击打开/关闭侧边栏">>></div>
      <span class="collectjumpbtn jumpbtn" data-menu="0" title="收集箱(快捷键：打开或关闭Alt+B，关闭Alt+Z)">Box</span>
      <span class="tagjumpbtn jumpbtn" data-menu="1" title="标签管理(快捷键：打开或关闭Alt+T)，关闭Alt+Z">Tag</span>
      <span class="questionjumpbtn jumpbtn" data-menu="3" title="问题与解决办法记录(快捷键：打开或关闭Alt+Q，关闭Alt+Z)">Que</span>
      <span class="itemjumpbtn jumpbtn" data-menu="4" title="项目管理(快捷键：打开或关闭Alt+I，关闭Alt+Z)">Item</span>
    </div>
    <!-- 书写框 -->
    <div class="write">
      <div class="back" onclick="writeLayer()" title="点击关闭输入框">
        <div class="closetipbtn">×</div>
      </div>
      <textarea class="writebox" placeholder="[添加项/加入随记的快捷键:Alt+Enter] （带*功能按钮支持用*分隔进行批量添加，另可加上前缀标志 s-学习，l-生活，w-工作）"></textarea>
      <div class="writeboxTips">随记随感-解决问题时遇到的难点/关键点/技巧等方面的想法（用关键词写）</div>
      <div class="btns">
        <span class="circlebtn" title="优先清空：紧急重要标志和日期(快捷键Alt+0)" accesskey="0">清空</span>
        <span class="circlebtn addtodotask" title="加入执行清单，支持*号多项添加(快捷键Alt+D)">快速添加D*</span>
        <span class="circlebtn itemchange" title="写入小本本，不支持多项添加(快捷键Alt+Enter)">加入随记</span>
        <span class="circlebtn edit itemchange" title="仅是单个值修改，标红效果是临时的">标红修改</span>
        <span class="circlebtn" title="不支持多项添加(快捷键Alt+1)" accesskey="1">+ 参考资料</span>
        <span class="circlebtn" title="支持*号多项添加(快捷键Alt+2)" accesskey="2">+ 检查卡*</span>
        <span class="circlebtn" title="用[]括住的部分后期支持隐藏切换，不支持多项添加(快捷键Alt+3)" accesskey="3">+ 记忆模块</span>
        <span class="circlebtn datebtn" title="内容末尾加当日日期，它将用于日期过期判断和日期排序">加日期</span>
        <span class="circlebtn" title="确保添加链接的位置同时占据头尾或只在中间，建议每项事件只含一个链接">加链接</span>
        <span class="circlebtn setrefreshtask">确定任务内容*</span>
        <span class="circlebtn dorefreshtask">开启任务</span>
        <span class="circlebtn inSearchbtn" title="含链接搜索时只会取文本部分搜索(快捷键Alt+T)">内搜T</span>
        <span class="circlebtn webSearchbtn" title="含链接搜索时只会取文本部分搜索(快捷键Alt+S)">外搜S</span>
        <span class="circlebtn toWebSearchbtn" title="去设置搜索范围">设置</span>
        <span class="circlebtn" title="自动转换，让每行为一项，原有*分隔的项不变">自动处理</span>
        <span class="circlebtn" title="标记为紧急项">@急</span>
        <span class="circlebtn" title="标记为重要项">@重</span>
        <span class="circlebtn tocollectbox" title="加入收集箱">收集箱*</span>
      </div>
      <div class="writingplace"></div>
    </div>

    <div id="pages">

      <!-- 主清单层 -->
      <div class="main">

        <div class="main-wrapper">
          <div class="toRightFixbtn" data-aside="0"> < </div>
              <div class="toRightBtn bigger">></div>

              <div class="content mainpart">
                <div class="topInput">
                  <div class="searchControl" data-status="0" title="点击激活或取消搜索模式">
                    <span data-id="1">站外搜<b class="toWebSearchBtn">设</b></span>
                    <span data-id="2">站内搜</span>
                  </div>
                  <input class="simpleWriteBox" type="text" placeholder="Enter输入，Alt+S外搜，Alt+T内搜">
                  <div class="addfunbtns">
                    <button>急</button>
                    <button>重</button>
                    <button>今</button>
                    <button>清</button>
                  </div>
                  <div class="buttonline" data-index="0">
                    <u class="toknewbtn" title="每日每周该怎么用该应用？如何对事项进行分类？">?</u>
                    <label data-index="0"><input type="radio" name="list" value="执行" checked="checked">执行</label>
                    <label data-index="1"><input type="radio" name="list" value="日历">日历</label>
                    <label data-index="2"><input type="radio" name="list" value="等待">等待</label>
                    <label data-index="3"><input type="radio" name="list" value="项目">项目</label>
                    <label data-index="4"><input type="radio" name="list" value="可能">可能</label>
                    <label data-index="5" title="添加到小本本"><input type="radio" name="list" value="随记">随记</label>
                    <label data-index="6" title="添加收集箱"><input type="radio" name="list" value="收集">收集</label>
                    <!-- <span class="openwritebtn">···</span> -->
                  </div>
                </div>
                <!-- 执行清单 -->
                <header class="header" data-id="1">
                  <h2 title="该清单事项是可执行且可一步搞定的，完成事项以打勾为准" style="margin-top: 20px;">执行清单-专一 (<span class="thingsNum">0</span>)</h2>
                </header>
                <section class="part">
                  <div class="controlers">
                    <label><input type="checkbox" value>反选</label>
                    <span class="circlebtn sortBtn" onclick="sortFirst(1)" title="指定数字越小的排在最前面">优先序</span>
                    <span class="circlebtn addBtn">增</span>
                    <span class="circlebtn solvedBtn" title="点击处理后，当前勾选项将移到完成清单数据中">处理</span>
                    <span class="writebtn" onclick="ableToEdit(event,-3);" title="关闭/开启功能：对每一项进行文本编辑、删除与优先级选择"></span>
                  </div>
                  <div class="list">
                    <p class="tips">专心做一件事，且它是可执行且可一步搞定的。</p>
                    <ul class="detail tmpDolist"></ul>
                  </div>
                </section>

                <!-- 日历 -->
                <header class="header" data-id="1">
                  <h2 title="注意：最后期限写在最后，以2020-01-01格式书写">日历清单-闹钟 (<span class="thingsNum">0</span>) </h2>
                </header>
                <section class="part">
                  <div class="controlers">
                    <label><input type="checkbox" value>反选</label>
                    <span class="circlebtn sortBtn" onclick="sortFirst(0)" title="指定数字越小的排在最前面">优先序</span>
                    <span class="circlebtn" onclick="sortIt()" title="按照日期排序，最远的日子放在前面">日期升序</span>
                    <span class="circlebtn addBtn">增</span>
                    <span class="circlebtn solvedBtn" title="点击处理后，当前勾选项将移到完成清单数据中">处理</span>
                    <span class="writebtn" onclick="ableToEdit(event,-3);" title="关闭/开启功能：对每一项进行文本编辑、删除与优先级选择"></span>
                  </div>
                  <div class="list">
                    <p class="tips">最后期限写句末，格式 2020-01-01（可点按钮）。</p>
                    <ul class="detail tmpDaylist"></ul>

                  </div>
                </section>

                <!-- 等待清单 -->
                <header class="header" data-id="1">
                  <h2 title="提示：不该我做的事，下一步是什么？主动拿结果，并且确保事情顺利被完成。（笔记：人与人之间交流需要注意什么）">等待清单-确否 (<span class="thingsNum">0</span>)
                  </h2>
                </header>
                <section class="part">
                  <div class="controlers">
                    <label><input type="checkbox" value>反选</label>
                    <span class="circlebtn sortBtn" onclick="sortFirst()" title="指定数字越小的排在最前面">优先序</span>
                    <span class="circlebtn addBtn">增</span>
                    <span class="circlebtn solvedBtn" title="点击处理后，当前勾选项将移到完成清单数据中">处理</span>
                    <span class="writebtn" onclick="ableToEdit(event,-3);" title="关闭/开启功能：对每一项进行文本编辑与删除"></span>
                  </div>
                  <div class="list">
                    <p class="tips">提示：不该我做的事，标明具体事项和时限，主动拿结果，下一步是什么？</p>
                    <ul class="detail tmpWaitlist">
                    </ul>
                  </div>
                </section>

                <!-- 项目清单 -->
                <header class="header" data-id="1">
                  <h2>项目清单-拆否</h2>
                </header>
                <section class="part">
                  <div class="controlers">
                    <b class="circlebtn" onclick="toLink("mind.html")">思维导图</b>
                    <span class="circlebtn" onclick="toLink("https://mubu.com/app")">幕布</span>
                    <span class="circlebtn toItemBtn">项目管理</span>
                    <span class="circlebtn addBtn">增</span>
                    <span class="writebtn" onclick="ableToEdit(event,-3);" title="关闭/开启功能：对每一项进行文本编辑与删除"></span>
                  </div>
                  <div class="list">
                    <p class="tips">提示：做得怎么样了？下一步是什么？时机成熟了吗？可行性有多大？（推荐用思维导图拆分）</p>
                    <ul class="detail tmpProject"></ul>
                  </div>
                </section>

                <!-- 可能清单 -->
                <header class="header" data-id="1">
                  <h2>可能清单-变否</h2>
                </header>
                <section class="part" style="margin-bottom: 30px;">
                  <div class="controlers">
                    <span class="circlebtn" onclick="toLink("https://www.wolai.com/")">我来</span>
                    <span class="circlebtn addBtn">增</span>
                    <span class="writebtn " onclick="ableToEdit(event,-2);" title="关闭/开启功能：对每一项进行文本编辑与删除"></span>
                  </div>
                  <div class="list">
                    <p class="tips">提示：时机？可能性？为什么做？什么时候做？怎么做？是否影响正常的目标和生活？（阐述想要做的原因和预期效果 难度 影响力）</p>
                    <ul class="detail tmpMaylist"></ul>
                  </div>
                </section>
              </div>

              <div class="content simplepart">
                <div class="originFile">
                  <p>
                    <span class="simplebtn" title="此备份文件txt，可用于导入">下载备份文件</span>
                    <span class="simplebtn" title="处理文件md-包括参考资料，完成项和分析项等">下载处理文件</span>
                  </p>
                  <p>
                    <span class="simplebtn" title="在下面框可见">复制备份数据</span>
                    <span class="simplebtn" title="在下面框可见">复制处理数据</span>
                    <span class="simplebtn" title="进入标签管理，对数据进行更精确处理">标签管理：更精确地处理</span>
                  </p>
                  <p>
                    <input type="file" id="file_input" accept="text/plain" placeholder="选择备份文件">
                    <span class="simplebtn">清空文件</span>
                  </p>
                  <p>
                    <span class="simplebtn" title="两种方式：备份文件导入 或 显示区数据导入，多项间的分隔应使用提示的符号">备份数据导入</span><b> [特定格式：收集箱(&) 和(^) 清单(~ $) 和(^) 检查卡数据(&)]</b>
                  </p>
                  <div class="openInoutBtn">显</div>
                </div>
                <div class="wrapper">
                  <div class="inoutWrapper">
                    <div class="inoutControl">把<input type="text" placeholder="查找值输入" title="如果确定处理时选中了文本，那么将对选中部分进行查找和替换">替换为<input type="text" placeholder="替换值输入" title="特别转换：@ZZ转大写 @zz转小写 @Zz首字母大写"><span data-index="0">确定</span><span data-index="1">md链接转html</span><span data-index="2" title="清空输入区和显示区">清空</span></div> <textarea class="writeBoxForCopy" placeholder="数据显示区(markdown格式) 或 备份数据导入区(需严格按照指定格式，例如单独导入收集箱，把间隔符号换成&就可以了) 总的来说三种模式，收集箱 | 7大清单^检查卡 | 收集箱^7大清单^检查卡 【注意替换符号时不奏效，有可能是被替换内容需要转义，如*写成\*】"></textarea>
                  </div>
                  <div class="dataWrapper">
                    <div class="finishbtn toMemorypart" title="跳转到记忆模块">看</div>
                    <h4><span class="progressSim" title="日期 星期 已完成任务数/总任务数 (算得的百分比)">0000-00-00 星期 未完成/全部 </span><span class="todayDakaTxt" title="当日签到项，点击查看签到记录">未签到</span></h4>
                    <ul class="detailSimple" title="（遗忘曲线：[5分钟 30分钟 12小时] 1天 2天 4天 7天 15天）"></ul>
                    <p>▶ 今日事项：（执行|日历|等待清单）<span class="finishbtn toDeletedata" title="清空执行|日历|等待清单和回收箱">清</span></p>
                    <ul class="detailSimple"></ul>
                    <ul class="detailSimple"></ul>
                    <ul class="detailSimple"></ul>
                    <p>▶ 完成事项：（每周至少整理一次）<span class="finishbtn toDeletedata" title="清空后，统筹数据里的完成数将重新计算">清</span><span class="finishbtn tofinishpart" title="跳转到完成模块">看</span></p>
                    <ul class="detailSimple"></ul>
                  </div>


                </div>
              </div>

          </div>
          <!-- 参考卡 -->
          <section class="aside">
            <div class="toRightBtn smaller" title="隐藏右侧栏">></div>
            <div class="toRightBtn fixedbtn" title="右侧栏完全显示出来">◆</div>
            <header class="header">
              <h2><span class="headname">刷新任务</span><span class="writebtn" onclick="ableToEdit(event,-1);" title="关闭/开启功能：对每一项进行操作"></span></h2>
              <span class="circlebtn clearall" title="清空当前清单内容">清空</span>
            </header>
            <div class="controlers">
              <label>
                <input type="radio" data-index="0" checked="true" name="card" value="刷新任务">刷新任务
              </label>
              <label>
                <input class="referinput" type="radio" data-index="1" name="card" value="参考资料">参考资料
              </label>
              <label>
                <input type="radio" data-index="2" name="card" value="回收箱">回收箱
              </label>
            </div>
            <div class="aside-content">

              <div class="list">
                <p class="tips">提示：在设置面板或帮助页特殊任务处上编辑与开启</p>
                <ul class="detail tmpRefresh"></ul>
              </div>
              <div class="list hidden">
                <p class="tips">提示：能找到的不存，有价值或稀罕的存</p>
                <ul class="detail linkReference"></ul>
                <ul class="detail tmpReference"></ul>
              </div>
              <div class="list hidden">
                <p class="tips">提示：删除的事项(事件变动了 | 没必要做的事)</p>
                <ul class="detail tmpRecycle"></ul>
              </div>
            </div>
          </section>
          <div class="bodybg"></div>
        </div>


        <!-- 总结层 -->
        <section class="upfloor">
          <div class="upfloor_content">
            <header>

              <div class="controlers">
                <label>
                  <input type="checkbox" checked="true" value>检查卡-看
                </label>
                <label>
                  <input type="checkbox" checked="true" value>完成卡-验
                </label>
                <label>
                  <input type="checkbox" checked="true" value>小本本-思
                </label>
              </div>
            </header>
            <div class="analyzeCon" data-num="3">
              <div class="list">
                <h4><span title="checklist">检查卡</span>
                  <span class="writebtn" onclick="ableToEdit(event,1);" title="关闭/开启功能：对每一项进行文本编辑与删除"></span>
                </h4>
                <div class="easylink"></div>
                <ul class="detail checkList"></ul>
              </div>
              <div class="list">
                <h4><span title="finishlist">完成卡</span><span class="finishbtn tofinishpart" title="详细分析完成清单数据">看</span>
                </h4>
                <div class="easylink"></div>
                <ul class="detail finishList"></ul>
              </div>
              <div class="list">
                <h4><span title="summarylist">小本本</span>
                  <span class="writebtn" onclick="ableToEdit(event,2);" title="关闭/开启功能：对每一项进行文本编辑与删除"></span>
                  <span class="finishbtn toCopydata" title="进入标签管理，进一步处理随记">复</span>
                </h4>
                <div class="easylink"></div>
                <ul class="detail summaryList"></ul>
              </div>
            </div>
          </div>

        </section>

        <!-- 资源层 -->
        <div class="resource onepart">
          <section class="header-con">
            <div class="word_title title">
              <h2 title="开启/关闭自定义链接的输入框"><span class="addCollectUrlBtn">+</span></h2>
            </div>
            <section class="addUrl">
              <input type="text" class="urlName" placeholder="输入名称">
              <input type="text" class="urlLink" placeholder="输入链接">
              <span class="tips">（提示区）</span>
              <span class="certainBtn">添加</span>
            </section>

            <p>自定义：<span id="newAddUrl"></span></p>
            <p>联系类：
              <b onclick="toLink('https://wx.qq.com/')">微信</b>
              <b onclick="toLink('https://mail.sina.com.cn/')">新邮</b>
              <b onclick="toLink('https://mail.qq.com/')">Q邮</b>
              <b onclick="toLink('https://mail.163.com/')">易邮</b>
              <b onclick="toLink('https://pan.baidu.com/')">百度云盘</b>
              <b onclick="toLink('https://www.jianguoyun.com/#/')">坚果云</b>
              <b onclick="toLink('https://cli.im/')">草料二维码</b>
              <b onclick="toLink('https://www.wjx.cn/')">问卷星</b>
              
              <br>
            </p>
            <p>平台类：
              <b onclick="toLink('https://www.yuque.com/')">语雀</b>
              <b onclick="toLink('https://www.wolai.com/')">我来</b>
              <b onclick="toLink('https://www.zybuluo.com/')">md</b>
              <b onclick="toLink('https://mubu.com/app')">幕布</b>
              <b onclick="toLink('https://kathy_candy.gitee.io/blog/#/')">博客</b>
              <b onclick="toLink('https://www.kdocs.cn/')">金山</b>
              <b onclick="toLink('https://trello.com/')">Trello</b>
              <b onclick="toLink('https://js.design/workspace')" title="原型设计">即时设计</b>
              <b onclick="toLink('https://mp.weixin.qq.com/')">微-小程序/公众号</b>
              <b onclick="toLink('https://www.365editor.com/')">365编辑器</b>
              <b onclick="toLink('https://github.com/doyouho/')">Github</b>
              <b onclick="toLink('https://gitee.com/')">Gitee</b>
              <b onclick="toLink('http://www.66rpg.com/friend/23755826')">橙光游戏</b>
              <b onclick="toLink('https://i.youku.com/u/UMzk2MDYyMTg0?spm=a2h0k.11417342.soresults.dnameX')">优酷</b>
              <b onclick="toLink('https://space.bilibili.com/101977006/favlist?fid=835945706&ftype=create')">B站</b>
              <b onclick="toLink('https://codepen.io/')" title="在线代码块编辑展示平台">codepen</b>
              <b onclick="toLink('https://jsbin.com/?html,js')" title="在线代码块编辑展示平台">jsbin</b>
            </p>
            <p>资源类：
              <b onclick="toLink('https://www.bookmarkearth.com/')">书签地球</b>
              <b onclick="toLink('https://www.gushiwen.cn/')">古诗文</b>
              <b onclick="toLink('https://www.xungushici.com/')">寻古诗词</b>
              <b onclick="toLink('https://dudianji.com/')">读典籍</b>

              <b onclick="toLink('http://www.e12345.com/')">英语</b>
              <b onclick="toLink('https://www.100font.com/')">免费字体 </b>
            </p>
            <p>综合导航：
              <b onclick="toLink('https://www.xue8nav.com/')" title="站内可搜索">学吧</b>
              <b onclick="toLink('https://www.a.cool/')">阿酷</b>
              <b class="new" onclick="toLink('http://www.pickfree.cn/')">pickfree</b>
              <b onclick="toLink('https://site.sciping.com/')">学术</b>
              <b onclick="toLink('https://hao.ziticq.com/')" title="偏设计">字体</b>
              <b onclick="toLink('https://hao.uisdc.com/')" title="偏设计，里面箭头下还有配色、图书、色彩导航">优设</b>
              <b class="new" onclick="toLink('http://hao.shejidaren.com/')">设计</b>
              <b class="new" onclick="toLink('https://www.seeseed.com/')" title="偏设计">seeseed</b>
              <b onclick="toLink('https://www.91sotu.com/')" title="偏设计，站内可搜索">搜图</b>
              <b onclick="toLink('https://www.pslkzs.com/nav.php')" title="设计，站内可搜索">灰大设计</b>
              <b onclick="toLink('https://hotppter.com/')" title="PPT导航，站内可搜索">hotppter(PPT)</b>
              <b class="new" onclick="toLink('https://www.hippter.com/')" title="PPT导航，站内可搜索">hippter(PPT)</b>

              <b onclick="toLink('http://www.qingnian8.com/')">青年帮 </b>|
              <b onclick="toLink('http://guozhivip.com/')" title="偏生活">果汁(生活)</b>
              <b onclick="toLink('https://creativemass.cn/')" title="站内可搜索">创意</b>

              <b onclick="toLink('http://ilxdh.com/')" title="偏生活，站内可搜索">龙轩</b>
              <b onclick="toLink('https://search.chongbuluo.com/')" title="偏生活，以搜索为主">虫部落 </b>|
              <b onclick="toLink('http://www.xiaolvji.com/')" title="偏生活，以人为本"> 效率集</b>
              <b onclick="toLink('https://go.itab.link/')" title="偏生活">itab</b>
              <b onclick="toLink('http://hao.199it.com/')">大数据</b>
              <!-- <b  onclick = toLink('http://www.haoyonghaowan.com/')> 好用好玩 </b> -->
            </p>
            <p>程序员导航：
              <b onclick="toLink('https://www.daqianduan.com/nav')">大前端导航 </b>
              <b onclick="toLink('https://www.jikedaohang.com/')"> 极客导航 </b>
              <b onclick="toLink('https://cxy521.com/')"> 程序员导航 </b>
              <b onclick="toLink('https://iiter.cn/')"> 艾特网 </b>

              <!-- <b class="runout" onclick=toLink('http://code.giffox.com/')> 程序员导航 </b> -->
              <b onclick="toLink('https://www.daohangwan.com/board/ax9b')">导航湾 </b>
              <b onclick="toLink('https://www.cnblogs.com/qianguyihao/p/10701923.html')">导航资源收集</b>
            </p>
            <p>巧利用：
              <b onclick="toLink('https://topbook.cc/')" title="[高效视频书]">Topbook</b>
              <b onclick="toLink('https://space.bilibili.com/344849038?from=search&seid=13692100793524727015')" title="于建国的学习观[重新思考]">学习观</b>
              <b onclick="toLink('https://blog.csdn.net/csl125/article/details/82891571')">命令行</b>

              <b onclick="toLink('https://unicode-table.com/cn/html-entities/')" title="Unicode字符百科，通用的那些字符都怎么表示的">HTML实体</b>

              <b onclick="toLink('https://www.w3school.com.cn/r.asp')">w3c手册</b>
              <b onclick="toLink('http://css.doyoe.com/')">css3手册</b>
              <b onclick="toLink('https://www.yuque.com/nibaobao-youho/frontend/ybqq0c#nAgg')">Git备忘录</b>
              <b onclick="toLink('https://wantwords.thunlp.org/')" title="词穷的时候查词">万词王</b>
              <b onclick="toLink('https://blog.csdn.net/youhoa/article/details/103589504')">HB热键</b>
              <b onclick="toLink('https://topbook.cc/search/article?keywords=%E7%94%B5%E8%84%91%E5%BF%AB%E6%8D%B7%E9%94%AE&selectedArticle=1711')">快捷键</b>



            </p>
            <p>搜索：
              <b onclick="toLink('https://www.yuque.com/docs/share/16ec761a-8e2f-4811-ac2a-24a1399ef10c?#ulKPq')">搜索地图</b>
              <b onclick="toLink('https://36kr.com/')">36氪</b>
              <b onclick="toLink('https://segmentfault.com/channel/frontend')">思否</b>
              <b onclick="toLink('https://juejin.cn/')">掘金</b>
              <b onclick="toLink('https://www.csdn.net/nav/web')">CSDN</b>
              <b onclick="toLink('https://www.cnblogs.com/cate/108703/')">博客园</b>
              <b onclick="toLink('https://www.zhihu.com/people/ni-bao-bao-8-35')">知乎</b>
              <b onclick="toLink('https://www.jianshu.com/nb/30927651')">简书-题</b>
              <b onclick="toLink('https://weixin.sogou.com/')">微信文</b>
              <b onclick="toLink('https://stackoverflow.com/')">Stackoverflow</b>
              <b onclick="toLink('https://github.com/search?o=desc&q=%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0+in%3Adescription&s=&type=Repositories')">Github前端</b>
              <b onclick="toLink('https://github.com/search/advanced')">高级搜索</b>
              <b onclick="toLink('https://gitee.com/explore')">Gitee优秀项目</b>
              <b onclick="toLink('https://www.libhunt.com/')">Libhunt查库</b>
              <b onclick="toLink('https://index.baidu.com/')">百度指数</b>
              
            </p>
          </section>

          <section class="share_con">

            <div class="kapian">
              <div class="share_box">
                <h3>工具类（效率帮助）</h3>
                <p>工具：
                  <b onclick="toLink('https://c.runoob.com/')" title="c.runoob.com/">菜鸟</b>
                  <b onclick="toLink('https://www.toolnb.com/')" title="www.toolnb.com/">集1 </b>
                  <b onclick="toLink('https://tool.oschina.net/')" title="tool.oschina.net/">集2 </b>
                  <b onclick="toLink('https://tool.lu/')" title="tool.lu/">集3 </b>
                  <b onclick="toLink('http://www.toolfk.com/')" title="www.toolfk.com/">集4 </b>
                  <b onclick="toLink('http://tool.cc/123/')" title="tool.cc/123/">集5</b>
                  <b onclick="toLink('https://www.67tool.com/')" title="www.67tool.com/">集6</b>
                  <b onclick="toLink('http://tool.chinaz.com/')" title="tool.chinaz.com/">站长</b>
                  <b onclick="toLink('http://tools.jb51.net/')" title="tools.jb51.net/">脚本</b>
                  <b onclick="toLink('http://www.jsons.cn/')" title="www.jsons.cn/">json1</b>
                  <b onclick="toLink('https://www.json.cn/')" title="www.json.cn/">json2</b>
                  <b onclick="toLink('https://www.sojson.com/')" title="www.sojson.com/">json3</b>
                </p>
                <p>颜色：
                  <b onclick="toLink('http://zhongguose.com/')" title="zhongguose.com 中国色">卡1</b>
                  <b onclick="toLink('https://flatuicolors.com/')" title="flatuicolors.com 色卡">卡2</b>
                  <b onclick="toLink('https://coolors.co/')" title="colors.co 按空格获取随机色">选色1</b>
                  <b onclick="toLink('http://colormind.io/bootstrap/')" title="colormind.io 可看到网站效果">选色2</b>
                  <b onclick="toLink('https://colorhunt.co/')" title="colorhunt.co">选色3</b>
                  <b onclick="toLink('https://color.adobe.com/zh/create/color-wheel')" title="color.adobe.com">选色4</b>

                </p>
                <p>字体图标：
                  <b onclick="toLink('https://icomoon.io/app/#/select')">icomoon</b>
                  <b onclick="toLink('https://www.iconfont.cn/')">iconfont</b>
                  <b onclick="toLink('https://fontawesome.dashgame.com/')">fontawesome</b>
                </p>
                <p>图/导图：
                  <b onclick="toLink('http://imgdh.com/')">图床</b>
                  <b onclick="toLink('https://gitmind.cn/app/template')" title="在线脑图">GitMind</b>
                  <b onclick="toLink('https://www.processon.com/')" title="在线协作绘图">processon</b>
                </p>
                <p>其他：
                  <b onclick="toLink('https://c.runoob.com/front-end/854')">正则1</b>
                  <b onclick="toLink('https://tool.oschina.net/regex/')">正则2</b>
                  <b onclick="toLink('https://caniuse.com/')">caniuse兼容</b>
                  <b onclick="toLink('https://www.sojson.com/')">JSON解析</b>
                  <b onclick="toLink('https://www.bootcdn.cn/')">BootCDN加速</b>
                  css hat
                </p>
              </div>

              <div class="share_box">
                <h3>官方与社区类（系统学习）</h3>
                <p>视频类：
                  <b onclick="toLink('https://ke.qq.com/user/index/index.html#/plan/cid=152997&term_id=100174752')">腾讯课堂</b>
                  <b onclick="toLink('https://study.163.com/category/480000003120007')">网易云课堂</b>
                  <b onclick="toLink('https://ke.jikexueyuan.com/zhiye/web/')">极客学院</b>
                  <b onclick="toLink('https://www.html.cn/js/javascript/')">HTML中文网-JS</b>
                  <b onclick="toLink('http://www.imooc.com/course/list?c=fe')"> 慕课网 </b>
                  <b onclick="toLink('http://yun.itheima.com/course')"> 黑马程序员 </b>
                </p>
                <p>文档类：
                  <b onclick="toLink('https://www.w3school.com.cn/')">w3school</b>
                  <b onclick="toLink('https://www.w3cschool.cn/javascript_guide/')">w3school2</b>
                  <b onclick="toLink('https://www.runoob.com/')">菜鸟教程</b>
                  <b onclick="toLink('http://www.fenby.com/')" title="初学者互动编程平台">fenby</b>
                  <b onclick="toLink('https://developer.mozilla.org/zh-CN/')">MDN</b>
                  <b onclick="toLink('https://www.liaoxuefeng.com/wiki/1022910821149312/1031549578462080')">廖JS</b>
                  <b onclick="toLink('https://wangdoc.com/javascript/types/function.html')">阮JS</b>
                  <b onclick="toLink('https://es6.ruanyifeng.com/')">阮ES6</b>
                  <!-- <b  onclick = toLink('https://www.jb51.net/onlineread/JavaScript-Garden-CN/')>js秘密</b> -->
                  <b onclick="toLink('http://c.biancheng.net/skill/js/')">JS整理1</b>
                  <b onclick="toLink('https://www.yuque.com/smallwhy/yyvuqy')">JS整理2</b>
                  <b onclick="toLink('https://www.cnblogs.com/TomXu/archive/2011/12/15/2288411.html')">深入js</b>
                  <b onclick="toLink('https://www.w3.org/')">W3C</b>
                  <b onclick="toLink('https://www.bookstack.cn/')">[书栈网]</b>
                  <b onclick="toLink('https://docschina.org/')">[印记中文]</b>
                  <b onclick="toLink('http://shouce.jb51.net/')">[脚本手册]</b>
                  <b onclick="toLink('http://codingdict.com/tutorials')">[编程字典]</b>
                </p>
                <p>扩展（官网）：
                  <b onclick="toLink('https://html.spec.whatwg.org/multipage/')">HTML</b>
                  <b onclick="toLink('https://www.w3.org/TR/CSS/')">CSS</b>
                  <b onclick="toLink('https://www.typescriptlang.org/')">TypeScript</b>
                  <b onclick="toLink('http://nodejs.cn/api/')">Nodejs</b>
                  <b onclick="toLink('https://www.sass.hk/')">Sass</b>
                  <b onclick="toLink('http://lesscss.cn/')">Less</b>
                  <b onclick="toLink('https://www.gulpjs.com.cn/')">Gulp</b>
                  <b onclick="toLink('https://www.webpackjs.com/')">Webpack</b>
                  <b onclick="toLink('https://jquery.com/')">jQuery</b>
                  <b onclick="toLink('https://www.bootcss.com/')">BootStrap</b>
                  <b onclick="toLink('https://ant.design/index-cn')">Antd</b>
                  <b onclick="toLink('https://element.faas.ele.me/#/zh-CN')">Element UI</b>
                  <b onclick="toLink('https://www.electronjs.org/')">Eletron</b>
                  <b onclick="toLink('https://developers.weixin.qq.com/miniprogram/dev/framework/')">微信开放文档</b>
                </p>

              </div>

              <div class="share_box">
                <h3>前端日常</h3>
                <p>路线：
                  <b onclick="toLink('https://www.bilibili.com/video/BV18E411H7Rc')">峰华-</b>
                  <b onclick="toLink('https://zxuqian.cn/front-end-learning-path')">路1</b>
                  <b onclick="toLink('https://www.bilibili.com/video/BV1ZZ4y1H7rU')">Luke-</b>
                  <b onclick="toLink('https://objtube.gitee.io/front-end-roadmap/#/')">路2</b>
                  <b onclick="toLink('http://www.bitcountrys.com/')">路3-得等</b>
                  <b onclick="toLink('https://developer.aliyun.com/article/28882')">目录</b>
                </p>
                <p>大牛博客：
                  <b onclick="toLink('http://www.ruanyifeng.com/blog/')">阮一峰</b>
                  <b onclick="toLink('https://www.liaoxuefeng.com/')">廖雪峰</b>
                  <b onclick="toLink('https://www.zhangxinxu.com/')">张鑫旭</b>
                </p>
                <p>插件：
                  <b onclick="toLink('http://www.jq22.com/')">插件jq</b>
                  <b onclick="toLink('https://www.html.cn/texiao/')">特效轮子</b>
                  <b onclick="toLink('https://ext.dcloud.net.cn/')">dcloud插件</b>
                  <b onclick="toLink('https://freefrontend.com/')">freefrontend</b>
                </p>
                <p>刷题：
                  <b class="runout" onclick="toLink('https://huruji.github.io/FE-Interview/#/')">题集1</b>
                  <b onclick="toLink('https://blog.poetries.top/FE-Interview-Questions/')">题集2</b>
                  <b onclick="toLink('https://github.com/yisainan/web-interview')">题集3</b>
                  <b onclick="toLink('http://www.h-camel.com/history.html')">思考题</b>
                  
                  <b onclick="toLink('https://leetcode-cn.com/')">力扣</b>
                  <b onclick="toLink('https://www.nowcoder.com/')">牛客</b>
                  <b onclick="toLink('https://www.jianshu.com/p/53f6bf6f8d50')">剑指offer</b>
                </p>
                <p>css：
                  <b onclick="toLink('https://codepen.io/')">codepen</b>
                  <b onclick="toLink('https://coolbackgrounds.io/')">调背景</b>
                  <b onclick="toLink('https://neumorphism.io/')">调阴影</b>
                  <b onclick="toLink('https://animista.net/')">调动画</b>
                  <b onclick="toLink('https://www.shapedivider.app/')">调弧面</b>
                  <b onclick="toLink('https://csslayout.io/')">css布局</b>
                  <b onclick="toLink('https://www.bootcss.com/p/layoutit/')">可视化布局</b>
                  <b onclick="toLink('https://cssgrid-generator.netlify.app/')">Grid生成</b>
                  <b onclick="toLink('https://cssgr.id/')">同上</b>
                  <b onclick="toLink('https://grid.layoutit.com/')">同上</b>
                  <b onclick="toLink('https://loading.io/flexbox/')">Flexbox生成</b>
                  <b class="runout" onclick="toLink('https://chokcoco.github.io/CSS-Inspiration')">css灵感</b>
                  <b onclick="toLink('https://css-tricks.com/')">css特效</b>
                  <b onclick="toLink('https://alteredqualia.com/')">3D</b>
                  <b onclick="toLink('https://www.awwwards.com/')">高级网站</b>
                </p>
              </div>

            </div>

            <div class="kapian">
              <div class="share_box">
                <h3>人生百态 ( 带删除线的可能访问不了 )</h3>
                <p>学校教学：
                  <b onclick="toLink('https://ykt.eduyun.cn/ykt/index.html')" title="小初高各种课程和专题教育与相关教育政策">国家中小学网络云平台</b>
                  <b onclick="toLink('https://www.xuexi.cn/')" title="应有尽有，学习电视台-教育频道-健康运动等，学习慕课-各行各业等等">学习强国</b>
                  <b onclick="toLink('https://www.icourse163.org/')">中国大学MOOC</b>
                </p>
                <p>动手：
                  <b onclick="toLink('https://dazi.kukuw.com/')">打字1</b>
                  <b onclick="toLink('https://www.typingclub.com/')">打字2</b>
                  <b onclick="toLink('https://www.keybr.com/')">打字3</b>
                  <b onclick="toLink('https://zty.pe/')">打字4</b>
                  <b onclick="toLink('https://shape.method.ac/')">练曲线1</b>
                  <b onclick="toLink('https://bezier.method.ac/')">练曲线2</b>
                  <b onclick="toLink('https://color.method.ac/')">练眼1</b>
                  <b onclick="toLink('https://type.method.ac/')">练眼2</b>
                  <b class="runout" onclick="toLink('https://cantunsee.space/')">练眼3</b>
                </p>
                <p>思考：
                  <b onclick="toLink('https://www.oubk.com/')">数独</b>
                  <b onclick="toLink('http://lxqnsys.com/hnt/')">汉诺塔</b>
                  <b onclick="toLink('http://guozhivip.com/fun/els/')">俄罗斯方块</b>
                  <b onclick="toLink('https://blocks.ovh/')">拼积木</b>
                  <b onclick="toLink('https://flexboxfroggy.com/')">青蛙回家-Flex</b>
                  <b onclick="toLink('http://www.flexboxdefense.com/')">塔防-Flex</b>
                  <b onclick="toLink('https://cssgridgarden.com/#zh-tw')">种萝卜-Grid</b>
                </p>
                <p>创作：
                  <b onclick="toLink('https://www.artbreeder.com/browse')" title="除了捏脸，参考里面头像画画也是可以的">捏脸</b>
                </p>
                <p>欣赏：
                  <b onclick="toLink('https://gallerix.asia/')">Gallerix博物馆</b>
                  <b onclick="toLink('http://g2.ltfc.net/home')">中华珍宝馆</b>
                  <b onclick="toLink('https://www.zhihu.com/question/369427467/answer/999221554?utm_source=wechat_session')">更多</b>
                </p>
                <p>音乐：
                  <!-- <b onclick=toLink('')>[More音乐]</b> -->
                  <b onclick="toLink('http://www.htqyy.com/')">轻音乐</b>
                  <b onclick="toLink('https://www.itingwa.com/')" title="纯音乐，需登录">听蛙</b>
                  <b onclick="toLink('http://guozhivip.com/qt/')">白噪音</b>
                  <b onclick="toLink('https://www.tosound.com/')" title="音效网">淘声</b>
                  <b class="runout" onclick="toLink('https://www.90lrc.cn/')">歌词</b>
                  <b onclick="toLink('https://www.zhaogepu.com/')">找歌谱</b>
                  <b onclick="toLink('http://www.qupu123.com/')">曲谱网</b>
                  <b onclick="toLink('https://www.autopiano.cn/')" title="可作为纯音乐来听">自由钢琴/伴奏</b>
                  <b onclick="toLink('http://guozhivip.com/jzg/')">架子鼓</b>
                </p>
                <p>书法摄影阅读：
                  <b onclick="toLink('http://www.shufami.com/')">书法迷</b>
                  <b onclick="toLink('https://weread.qq.com/')">微信读书</b>
                  <b onclick="toLink('https://www.jiumodiary.com/')">鸠摩搜书</b>
                  <b onclick="toLink('https://ebook2.lorefree.com/')">lorefree</b>
                  <b onclick="toLink('http://cn.epubee.com/books/')">epubee</b>
                </p>
                <p>绘画：
                  <!-- <b onclick=toLink('')>[More绘画]</b> -->
                  <b onclick="toLink('https://www.gracg.com/')">涂鸦王国</b>
                  <b onclick="toLink('https://uiiiuiii.com/inspirations/illustrations')">绘画插画</b>
                  <b onclick="toLink('http://weavesilk.com/')">(粒子对称)</b>
                  <b onclick="toLink('https://c.runoob.com/more/shapefly-diagram/#')">(简单画图)</b>
                  <b onclick="toLink('https://c.runoob.com/more/svgeditor/')">(SVG画图)</b>
                  <b onclick="toLink('https://ps.gaoding.com/#/')">稿定(PS)</b>
                  <b onclick="toLink('https://www.photopea.com/')">photopea(PS)</b>
                </p>
                <p>工具文档：
                  <b onclick="toLink('https://u.tools/docs/guide/about-uTools.html')">uTools</b>
                  <b onclick="toLink('https://yuanliao.info/')">猿料</b>
                  <b onclick="toLink('https://ask.dcloud.net.cn/docs/')">Dcloud文档</b>
                  <b onclick="toLink('https://code.visualstudio.com/docs#vscode/')">VScode</b>
                  <b onclick="toLink('https://publish.obsidian.md/help-zh/%E7%94%B1%E6%AD%A4%E5%BC%80%E5%A7%8B')">Obsidian文档</b>
                  <b onclick="toLink('https://docs.snipaste.com/zh-cn/')" title="官网：https://zh.snipaste.com/">Snipaste</b>
                  <b onclick="toLink('https://docs.emmet.io/')">Emmet</b>
                  <b onclick="toLink('https://gitee.com/docmirror/dev-sidecar/releases')" title="正常访问Github且给Github加速的工具">dev-sidecar</b>


                </p>
              </div>
            </div>

          </section>
        </div>

        <!-- 启动层 -->
        <div class="start onepart">
          <div class="taskForWork">
            <section class="mianContent">
              <span class="daka odaka" title="每天打下卡，方向不走偏"><span></span><b>签</b></span>
              <div class="slideBox">
                <p class="odaka" title="点击切换柱形图/签到卡">
                  <span class="daycheck-icon"></span>
                  <span class="dakastatus">未</span>打卡
                </p>
                <span class="closebtn odaka">×</span>
                <div class="dayCheck">
                  <div class="days">已经打卡<span class="dataDays">0</span>天，继续加油哦~</div>
                  <div class="firstLine"><input type="text" class="writeIn" placeholder="多项用*分隔（支持中英文 数字 -_）"><span class="addItemBtn">添加</span></div>
                  <div class="itemMenu"><span>学习项目</span><span>学习天数</span> &nbsp;&nbsp;once a day</div>
                  <ul class="dakaUl"></ul>
                </div>

                <div class="chart">
                  <div class="days">哎呀，不小心搬砖<span class="dataDays">0</span>天了呢，更多看检查页...</div>
                  <div class="canvas-wrapper">
                    <canvas id="myCanvas" width="1136" height="520"></canvas>
                  </div>
                  <ul class="detailDaka"></ul>
                </div>
              </div>

              <form autocomplete="off">
                <div class="taskContent">
                  <div class="easylink"></div>
                  <div class="text">学习得适量适度，由什么得什么，不断找最优。</div>
                  <div class="text" style="margin-bottom:20px;" title="如果不够专注，可用音乐辅助创造场景环境">
                    <b class="link" onclick="toLink('http://guozhivip.com/qt/')">《白噪》</b>
                    <b class="link" onclick="toLink('https://www.kugou.com/yy/special/single/1513086.html')">《悠闲》</b>
                    <b class="link" onclick="toLink('https://www.kugou.com/yy/special/single/1514174.html')">《触动》</b>
                    <b class="link" onclick="toLink('https://www.kugou.com/yy/special/single/1383070.html')">《犯傻》</b>
                    <b class="link" onclick="toLink('https://www.kugou.com/yy/special/single/3352777.html')">《恋之歌》</b>
                  </div>
                  <div class="busyouter" title="离开的时间">
                    <div class="busytime">
                      <div class="busyItems"></div>
                    </div>
                  </div>

                  <div class="meetinghouse">
                    <div class="houseback"></div>
                    <div class="meetcat" title="点击获取任务进行的时间" onclick="recordBusyTime()"></div>
                    <div class="lefttime"></div>
                  </div>
                  <div class="flyline">
                    <div class="stopTimerBtn" title="停止计时" onclick="stopRunning()">Stop</div>
                    <div class="endtime">?min</div>
                    <div class="flymove"></div>
                  </div>
                  <div class="timer">
                    <div class="startBtn" title="准备工作：水，零食，梳子，安静的环境，运动放松，调整呼吸"><b class="timer-text">开始计时</b><i></i>
                    </div>
                  </div>
                  <!-- <p>（Tab键可以快速跳到下一个输入框）</p> -->
                  <div class="maincon-wrapper">
                    <div class="taskType">
                      <b title="听课5%, 阅读10%, 视听20%, 演示30%, 讨论50%, 实践75%, 教授给他人90%">做事类型： </b>
                      <div class="taskTypeItems">
                        <label><input type="checkbox" name="thingsType" value="整理"><span class="cbox"></span>整理</label>
                        <label><input type="checkbox" name="thingsType" value="社交"><span class="cbox"></span>社交</label>
                        <label><input type="checkbox" name="thingsType" value="生活"><span class="cbox"></span>生活</label>
                        <label><input type="checkbox" name="thingsType" value="尝试"><span class="cbox"></span>尝试</label>
                        <label><input type="checkbox" name="thingsType" value="学习"><span class="cbox"></span>学习</label>
                        <label><input type="checkbox" name="thingsType" value="项目"><span class="cbox"></span>项目</label>
                        <label><input type="checkbox" name="thingsType" value="教学"><span class="cbox"></span>教学</label>
                        <label><input type="checkbox" name="thingsType" value="反三" title="改进，举一反三"><span class="cbox"></span>反三</label>

                      </div>

                    </div>
                    <div class="taskSkill">
                      <b>可用方法： </b>
                      <div class="taskSkillItems">
                        <label><input type="checkbox" name="vaSkills" value="实践试错"><span class="cbox"></span>实践试错</label>
                        <label><input type="checkbox" name="vaSkills" value="提问搜索"><span class="cbox"></span>提问搜索</label>
                        <label><input type="checkbox" name="vaSkills" value="视频-模块化"><span class="cbox"></span>视频-模块化</label>
                        <label><input type="checkbox" name="vaSkills" value="实战模仿"><span class="cbox"></span>实战模仿</label>
                        <label><input type="checkbox" name="vaSkills" value="导图-联想分类"><span class="cbox"></span>导图-联想分类</label>
                        <label><input type="checkbox" name="vaSkills" value="讨论"><span class="cbox"></span>讨论</label>
                        <label><input type="checkbox" name="vaSkills" value="故事"><span class="cbox"></span>故事</label>
                      </div>

                    </div>

                    <div class="singleLine">
                      <div class="oneline">
                        <b>主要任务： </b><input class="oData" id="taskAGoal" type="text" placeholder="含默认值:可自定义或恢复">
                        <em>一天总任务是什么呢</em>
                        <span class="updownbtn" title="可把当前值设为默认的主要任务，下次将在生成中自动加入">设</span>
                        <span class="updownbtn" title="重置默认">默</span><em class="goalTxt"></em>
                      </div>
                      <div class="oneline"><b>优先解决：</b><input class="oData" id="taskGoal" type="text" placeholder="上下切换执行清单数据"><em>具体、现在就能做的</em>
                        <span class="updownbtn" title="执行清单的上一项">上</span>
                        <span class="updownbtn" title="执行清单的下一项">下</span>
                        <em class="hastText"></em>
                      </div>

                      <div class="numpart" title="计算区">
                        <span class="formdelBtn" title="清空所有表单数据">清空表单</span>
                        <div class="oneline" style="margin-top: 8px;"><b>计划用时：</b><input class="oData" id="taskPTime" type="number" min="3" placeholder="单位分钟">
                          <span class="updownbtn" title="8分钟" onclick="addTime('8')">8</span>
                          <span class="updownbtn" title="15分钟" onclick="addTime('15')">15</span>
                          <span class="updownbtn" title="20分钟" onclick="addTime('20')">20</span>
                          <span class="updownbtn" title="30分钟" onclick="addTime('30')">30</span>
                          <span class="updownbtn" title="45分钟" onclick="addTime('45')">45</span>
                          <span class="updownbtn" title="60分钟" onclick="addTime('60')">60</span>
                        </div>
                        <div class="oneline"><b>自估难度：</b><input class="oData" id="taskLevel" type="number" max="5" min="1" placeholder="难度：1~5">
                          <div class="fiveheart" style="display: inline-block;">
                            <span class="starbtn" title="简单"></span>
                            <span class="starbtn" title="一般"></span>
                            <span class="starbtn" title="有点难"></span>
                            <span class="starbtn" title="很难"></span>
                            <span class="starbtn" title="地狱级"></span>
                          </div>
                        </div>
                        <div class="oneline"><b>开始时间：</b><input class="oData" id="taskSFTime" type="text" placeholder="格式10:20">
                          <em>now or never</em>
                          <span class="updownbtn" title="获取此刻的时间" onclick="balloonStart()">get</span>
                          <span class="updownbtn" onclick="webSearchFun('start')" title="搜索上面优先解决的内容">搜</span>
                        </div>
                        <div class="oneline"><b>实际用时：</b><input class="oData" id="taskFTime" type="number" min="1" placeholder="单位分钟">
                          <em> Let it be</em>
                          <span class="updownbtn" title="距离开始时间多少分钟了？算一算" onclick="getWorkTime()">算</span>
                        </div>
                        <div class="oneline">
                          <b>完成程度：</b><input class="oData" id="taskFStatus" type="text" disabled placeholder="'生成'时自动计算"><em>计划用时/实际用时的值</em>
                          <span class="updownbtn" onclick="getWorkProccess()" title="注意：实际用时为0时无法计算">算</span>
                        </div>
                      </div>
                      <div class="oneline" style="margin-top: 8px;"><b>困难或障碍在哪里：</b><input class="oData" id="taskDifficult" type="text" placeholder="如果有难度,难在哪里？"><em>What happened?</em><span class="updownbtn" onclick="toMainSquare(3)" title="面临的困难一句话写不完，在问题记录里写">写</span></div>
                      <div class="oneline"><b>接下来？</b><input class="oData" id="taskContinue" type="text" placeholder="打算怎么处理或避免？"><em>Accept it, 办法总比困难多</em></div>
                      <div class="oneline"><b>生成的文本：(禁止：增删&lt;br /&gt; 和输入左尖括号&lt;)</b><br><textarea id="allTaskData" placeholder="(实践过程生成区域,可写入检查页来分析)"></textarea></div>
                      <div class="btnLine oneline">
                        <div class="dataSTNoteBtn" title="生成带模板的内容，可修改内容">生成</div>
                        <div class="dataSTNoteBtn" title="写入后的内容可在检查页查看">写入</div>
                        <span id="tips">(提示：内容先生成后写入)</span>
                      </div>
                    </div>
                  </div>

                </div>
              </form>
            </section>
          </div>
        </div>

        <!-- 检查层 -->
        <div class="check onepart">
          <header class="check-header">
            <div class="header-back"></div>
            <div class="toTeachNextBtn" onclick="getRandomTxt(this, 'new')">Next</div>
            <div class="toTeachBtn unactive" onclick="getRandomTxt(this, 'open')">展开</div>
            <div class="data-header">
              <div class="datamonth" title="【困难日子：紫色[客观原因]+蓝色[主观影响]】，【任务量：黑色[无任务数]+灰色[含任务数]】">
                <ul class="daysClip"></ul>
                <p class="tip" title="打钩表示签到了，完成任务数达标时[10-可自定义]显示数字">蓝色紫色↔困难</p>
              </div>
              <div class="datatext">
                <div>打卡数：<span></span> （<span></span>）</div>
                <div>已完成的任务数：<span></span> （<span></span>）</div>
                <div title="困难天数/总天数">挫折频率：<span></span> （一般最近30天）</div>
              </div>
            </div>

            <!-- 随机展示文本 -->
            <div class="book-header">
              <div class="share_box">
                <h3>实践出真知 </h3>
                <p>实践前搞清学习原则：明确输入输出，多例子连结，分而治之，验证实现。</p>
                <p>视频学习>文档学习，目的学习>盲目扫资料，思维导图>简单总结，做项目分而治之并解释。</p>
                <p>技巧性：利用好奇心，故事引导，求知若渴，虚心若愚，不受已有模型影响。</p>
                <p>找项目：in:name/readme/description+空+词；stars/forks/pushed/language+:+数/日-期/语言</p>
              </div>
              <div class="share_box">
                <h3>解决问题能力 定位</h3>
                <p>a.个人能力—> 通用能力 + 专业能力</p>
                <p>专业能力 = 专业知识 + 解决问题 </p>
                <br>
                <p>b.解决问题/组织运用能力 = 指导下解决-独立解决-独立高质量解决-指导他人解决。</p>
                <p>能力认定在于问题大小和解决的程度。</p>
              </div>
              <div class="share_box">
                <h3>解决问题能力 考量</h3>
                <p>a.体现思路，骨干代码，功能实现</p>
                <p>b.这样解决是好，还是很好？(会不会存在什么问题？你已解决了多少？能想到多少问题？还能解决多少？有没有其他方案，为什么选择这个，什么情况下其他方案更优秀？)</p>
                <p>c.想出尽可能多的解决思路，选最优解</p>
              </div>
              <div class="share_box">
                <h3>解决问题能力 细节</h3>
                <p>a.算法结构 逻辑的展现</p>
                <p>b.经验 经验足不足</p>
                <p>c.英语 阅读</p>
              </div>
              <div class="share_box">
                <h3 title="摘自于建国的学习观，可B站搜视频">学习观---知识小记 A（为什么学习）</h3>
                <p>费曼说过，如果你没有办法用简单的语言表述你所学的知识，你就没有真正学会。</p>
                <p>学习：从有限的例子中找到问题和答案的规律（知识）的过程，这也是把信息压缩成知识的过程。</p>
                <p>学习是为了用有限的知识解决新问题。学习正是用知识（找出规律）来压缩信息。</p>
              </div>
              <div class="share_box">
                <h3 title="摘自于建国的学习观，可B站搜视频">学习观---知识小记 B（学习原则1）</h3>
                <p>学习的第一步：明确输入和输出，即问题和答案。（容易存在的误区：学习不等同记忆，知识不等同信息）</p>
                <p>学习的第二步：用例子构建知识。学习中分清例子和知识，构建自己的知识体系。华罗庚的把书读厚再读薄的过程。</p>
                <p>学习的第三步：验证知识的有效性。</p>
              </div>
              <div class="share_box">
                <h3 title="摘自于建国的学习观，可B站搜视频">学习观---知识小记 C（学习误区）</h3>
                <p>学习误区——知识分运动类和思考类，而错误学习的原因有三：</p>
                <p>（1）错误的输入输出</p>
                <p>（2）错误学习方式:如用学运动类的方法学思考类的知识</p>
                <p>（3）不用例子学习/把知识当信息（记忆的时候特别需要例子来配合）</p>
              </div>
              <div class="share_box">
                <h3 title="摘自于建国的学习观，可B站搜视频">学习观---知识小记 D （学习原则2）</h3>
                <p>我们可以同时应用多个运动类知识，但意识在某一刻只能专注于一个思考类问题。因此若无法从脑中搜索到能直接从输入到输出的知识，问题就无法解决，再加上掌握的知识有限，难度更大了，它需要分而治之。</p>
                <p>应对办法：（1）多学知识 （2）分而治之。（解决指数级数量的问题）</p>
              </div>
              <div class="share_box">
                <h3 title="摘自于建国的学习观，可B站搜视频">学习观---知识小记 E （学习方法一）</h3>
                <p>思维导图：除了帮助记忆，还意在帮助你克服学习和应用中的误区。</p>
                <p>（1）列关键词——它是什么(压缩信息，找输入输出) </p>
                <p>（2）找到输入输出变量之间不变的函数关系(即规律)——它的目的(弄懂输入是怎么变成输出的)——优化关键词</p>
              </div>
              <div class="share_box">
                <h3 title="摘自于建国的学习观，可B站搜视频">学习观---知识小记 F （学习方法一）</h3>
                <p>（3）拆分知识，这种能力属于二阶知识。拆分的思路可分为正向思维与逆向思维两种，拆分原则是知识之间尽可能彼此独立。</p>
                <p>（4）二阶知识：描述知识与知识的关系（一般知识描述信息与信息的关系）知识与知识的条件循环与并列组合的过程。</p>
              </div>
              <div class="share_box">
                <h3 title="摘自于建国的学习观，可B站搜视频">学习观---知识小记 G （学习方法二）</h3>
                <p>费曼技巧= 学习（思维导图）+ 解释（满足原则4：用新例子验证知识）。</p>
                <p>——费曼技巧是以【目的】为导向的学习方法，核心在【验证】。(即温故而知新，可以为师矣)</p>
                <p>思维导图满足3个原则：明确知识的输入输出，用例子重塑大脑链接，理清关系与拆分知识。</p>
                <p>——思维导图是以【过程】为主导的学习方法，核心在【拆分】。</p>
              </div>
              <div class="share_box">
                <h3 title="摘自于建国的学习观，可B站搜视频">学习观---知识小记 H （学习观运用）</h3>
                <p>学习英语——这个运动类知识，听 说 读 写，是学习单词，不是记忆单词。</p>
                <p>文理科学习的区别在于变体的数量，变体少的时候可以选择记忆，变体多的时候必须学习（掌握规律）。</p>
                <p>由于计算机的出现，我们应该学习一些变体多、可替代性低的知识。</p>
              </div>
              <div class="share_box">
                <h3 title="摘自于建国的学习观，可B站搜视频">学习观---知识小记 I （学习认知）</h3>
                <p>（1）感知真实——依靠模型。</p>
                <p>人看到的世界和接收的信息并不是全部的，但确实能让我们生存下去的。感知模型无法改变，认知模型依靠科学，观念模型太多。</p>
                <p>（2）建模欲望——好奇心（好奇的是例子，即故事；要与自己相关）。</p>
                <p>阻止好奇心的是保护已有模型的固执心（认为没必要学或已经学过，权威思维）。</p>
              </div>

            </div>

          </header>

          <section class="check-content">
            <div class="easylink"></div>
            <div class="easylink"></div>
            <div class="easylink"></div>
            <div class="datamenu"><span class="active" data-id="0">分析</span><span data-id="1">完成</span><span data-id="2">记忆</span></div>
            <div class="datadetail">
              <!-- ① 分析层 -->

              <div class="analyseArea oneclip active">
                <div class="thoughtTip">思考：内容合理且合题→评级[A找优C找缺B找方法]→配合难度端心态，最耗时的找方法。</div>
                <div class="delbtn" title="清空所有分析数据">清 空</div>
                <div class="analyseBtn" title="点击心形按难度选">
                  <span class="cancelbtn"></span>
                  <span class="starbtn" title="一星-简单"></span>
                  <span class="starbtn" title="二星-一般"></span>
                  <span class="starbtn" title="三星-有点难"></span>
                  <span class="starbtn" title="四星-很难"></span>
                  <span class="starbtn" title="五星-地狱级"></span>
                  <span class="starStatus">(原始状态)</span>
                </div>
                <div class="knowfirst">

                  <div>
                    <span>客观地看</span>
                    <p>[方向]优先解决的任务合理吗？描述准确否，是否偏离源目标？</p>
                    <p>[障碍]记录的困难是否是问题的关键，做出的打算合适吗？这方法可好用？</p>
                    <p>“我没想到……，用……做……真棒，解决问题的关键在于……”</p>
                  </div>
                  <div>
                    <span>主观地看</span>
                    <p>[整体]完成度：评级越高越亮，A越多=自我认知越清晰。</p>
                    <p>[局一]A找优C找缺B找方法，配合难度端心态(过于自谦or自傲)</p>
                    <p>[局二]难度(难在哪，难度多是二三星才合理)：低-多熟练或多角度勤分析，高-多接触多练习</p>
                    <p>[整体]用时：时间是用在点上了？</p>
                    <p>总结优缺点，避免低级错误，多找方法，把时间用精，提高自我认知，提高表达力和会抓关键点。</p>
                  </div>
                </div>
                <div class="tipclosebtn">
                  <i title="A - 找优点" data-level="A">A</i>
                  <i title="B - 寻方法" data-level="B">B</i>
                  <i title="C - 找缺点寻方法" data-level="C">C</i>
                  <i title="无 - 点击恢复默认筛选" data-level="无">N</i>
                  <strong class="summaryNum" title="总数：A级别数-B级别数-C级别数-无级别数">总:A-B-C-空</strong>
                  <span class="tipGuideBtn" title="阅读指南">指南</span>
                </div>
                <ul class="analyseContent">
                  <li><b></b>
                    <div>无数据（另：筛选状态下可点击小猫清除状态）</div>
                  </li>
                </ul>


              </div>

              <!-- ② 清单层 -->
              <div class="todoArea oneclip">
                <div class="thoughtTip">思考：目前平均每天完成？项，平均完成度是？与什么有关？</div>
                <div class="delbtn" title="清空所有完成清单数据，注意会影响上面的统筹数据">清 空</div>
                <div class="searchTask">
                  <span class="datesortbtn" title="点击将按日期倒序或顺序排列"><strong>0</strong>
                    天 / <strong>0</strong> 项</span>
                  <input class="searchtxt" title="当内容为空时搜索即显示全部" type="text" placeholder="搜索关键字，支持Enter搜索">
                  <span class="searchbtn" title="当内容为空时搜索即显示全部">搜索</span>
                  <span class="letterbtn" title="让字母亮起来">Aa</span>
                </div>
                <div class="todoWrapper">
                  <div class="weekbtn" data-index="-99"><span>本周</span><span>最近7天</span><span>上周</span></div>
                  <nav class="daymenu"></nav>
                  <div class="todoCon">
                    <div class="todoOut"></div>
                  </div>
                </div>
              </div>

              <!-- ③ 记忆层 -->
              <div class="memoryArea oneclip">
                <div class="delbtn" title="清空所有记忆卡数据">清 空</div>
                <div class="contentHiddenBtn">开启主动回忆模式</div>
                <div class="finishbtn toseeMemory" title="查看全部记忆内容">全</div>
                <div class="memoryDecorate">记忆痕迹~[把要记忆的关键词像这样括起来哦]</div>
                <ul class="memoryCon"></ul>
                <ul class="memoryCon"></ul>
                <ul class="memoryCon"></ul>
                <ul class="memoryCon"></ul>
                <ul class="memoryCon"></ul>
                <ul class="memoryCon"></ul>
                <span class="memoryclearbtn">清除逾期项</span>
              </div>


            </div>

          </section>
        </div>

        <!-- 助手层 -->
        <div class="book onepart">

          <div class="book-outer">
            <div class="menustayback"></div>
            <ul class="bookmenu" data-id="-1">
              <li class="active" data-id="0">插件内容介绍</li>
              <li data-id="1">把事情处理完</li>
              <li data-id="2">事件分类步骤</li>
              <li data-id="3">每日每周回顾</li>
              <li data-id="4">清单注意事项</li>
              <li data-id="5">特殊任务状态</li>
            </ul>
            <div class="bookCon">
              <div class="txtpart active">
                <p class="right"> <b class="hotlink" onclick="toLink('https://www.yuque.com/nibaobao-youho/pqbrew/doit')">《使用图解》</b></p>
                <p class="textFrame">【人间清醒】不要舍本逐末，工具的意义就是提高效能，不要过于依赖应用本身的功能，要看如何使用它，以及它是否限制了你的使用？<b class="hotlink" onclick="toLink('https://www.yuque.com/nibaobao-youho/pqbrew/zcmv7w')">（提出更多意见）</b></p>
                <h4>功能介绍</h4>
                <p>① 清单处理 （基于GTD的清单分类：收集箱 执行|日历|等待|项目|可能 参考资料 回收箱）</p>
                <p class="indent">另增卡：检查卡(目标或计划) | 完成卡 | 小本本(随记) + 日期倒计时|刷新/定期任务 </p>
                <p class="indent">检查页的模块：分析模块(记录进程) | 完成模块 | 记忆模块</p>
                <p>② 记录任务进程--统计分析数据（提高自估能力）</p>
                <p>③ 数据统筹--近30天的打卡，任务数和任务完成度初判</p>
                <p>④ 签到--打卡距离目标更进一步的点</p>
                <p>⑤ 自定义数据--根据个人情况做恰当数据呈现</p>

                <h4>省事操作</h4>
                <p>【提示】日历清单项剩余天数在 链接和日期共存时 不显示。 </p>
                <p><span>【新增】日期倒计时</span></p>
                <br>
                <p><strong>快捷键(Alt+ASDWCBTQIZ|0123):</strong> </p>
                <p>【打开快捷键<span>Alt+</span>】<span>W</span>打开输入框，<span>C</span>打开检查页(check)，<span>B</span>打开收集箱，<span>T</span>标签管理，<span>Q</span>问题记录，<span>I</span>项目管理
                </p>
                <p>【内容快捷键 <span>Alt+</span>】<span>Enter</span>清单添加或小本本项添加，<span>D</span>快速添至执行清单(do)，<span>S</span>站外搜索
                  | <span>T</span>站内搜索（主编辑页输入框 > 书写框），书写框的<span>0</span>清空和其他带+号的<span>123</span>内容添加</p>
                <p>【关闭快捷键】<span>任意键-</span>>关闭总结面板，<span>Esc键</span>->关闭总结面板+设置面板+书写框，<span>Alt+Z</span>-> 关闭中间弹框，<span>Alt+A</span>->关闭其他回到原始状态(即主编辑页)
                </p>
                <br>
                <p>书写框--<span>多项添加</span>[用*间隔多项或换行再点击“自动处理”按钮] (<span>附加文本操作</span>：加日期，加链接，加紧急重要标志，清空-优先去掉日期和加紧急重要标志)
                </p>
                <p>“自动处理”还支持：<span>① 处理‘-’间隔的项（前置---）；② 可为记忆单词的英文加上[]（前英文后中文需前置[]，前中文后英文需前置-[]）③ @标志添加到每项中，作为项目项</span></p>
                <p>搜索功能--<span>书写框|主输入框(对外-且可指定搜索范围)</span> 可直接对清单项/优先解决内容搜索，含链接的搜索只会取文本部分搜索，快速翻译(前置a )注意a后有空格；<span>标签模块(对内-已有数据搜索及下载)</span>给搜索结果形成快捷标签，并提供编辑与下载，方便以后查看(其中搜索项目应用@@项目编号)</p>
                <p>【百度/谷歌搜索技巧：+必含词 -不含词 “限定整词” site:域名 intitle:标题词 inurl:链接词 filetype:文件格式 20xx..20xx某时间段内】</p>
                <br>
                <p>简版页<span>(可导入导出数据)</span>--设置面板中可简化输出处理数据(支持.md格式-只处理首个链接)，支持备份数据导入</p>
                <p>资源页<span>(可自定义添加链接)</span>--供参考，不定期更新；自定义链接可加载到参考资料，也可贴在卡片标题上(会显示小猫) </p>
                <p>启动页--倒计时提醒，设置面板中自定义休息时间，记录溜号时间</p>
                <p>检查页--完成清单<span>(可内容|日期查找)</span>--可看做事相关概率</p>
                <p>检查页--记忆模块<span>(可主动回忆)</span>--今日刚记忆的内容，来日按遗忘曲线（1,2,4,7,15天）呈现，提醒温习</p>
                <p>帮助页--插件介绍，GTD相关内容介绍，每日每周回顾指引，特殊任务展示（日刷|周刷|月刷|定期任务）--<span>记录与修改重复或定期的事</span></p>

                <h4>使用方法</h4>
                <p><span>[做事]</span> 温习记忆模块内容，做今日规划，捕获事件将其归类并按重要性排序-完成事项</p>
                <p><span>[复盘查看]</span> 简版页数据-数据整理-另存 （除杂-清楚什么是没必要的）</p>
                <p><span>[复盘分析]</span> 分析清单-完成自估，完成清单-每天的量与度是否合理，签到-最特别的点，小本本-小想法，参考资源整理-分析资源，搜索记录&问题记录-分析解决问题的思路</p>
                <p><span>[周复盘]</span> 签到-打卡方向，检查卡-写中期目标，等待清单（主动出击） 项目清单（主动将其拆解） 可能清单、回收箱（是否有变动）</p>
              </div>
              <!-- 栏目1：GTD技术醒脑 -->
              <div class="txtpart">
                <p class="right">整理自 Topbook <b class="hotlink" onclick="toLink('https://topbook.cc/course/detail/153')">《重新认识GTD》</b>系列文</p>
                <h4>GTD：just把事情处理完/做好，not把事情做完</h4>
                <p>需要达到的目的：</p>
                <p class="indent">a. <span>记录下来，让大脑清空不混乱</span></p>
                <p class="indent">b. <span>让自己随时都能明确知道，下一步该做什么</span></p>
                <p>除机心(特指机巧功利之心)：人类的聪明在于会工具，容易犯的错误是只会工具。别让工具玩了你。做计划是为了更好的实际效果，带有强目的性，<span>不是为了计划而计划，是为了做事！</span></p>
                <p>
                  <span>权衡利害关系</span>。重点不一定是我得到了什么，因为得到什么有时候反而是非常明显的，<span>更可能是因为此会失去什么？</span>我能否承受这种失去？比如纪念日？某个自己独处思考的时间？(珍惜时间->做距离自己目标更近的事情)
                </p>
                <p>多思考多规划：比如，为什么不能完成所有的事情？那些做成事儿的人难道不都是能够严谨、努力要求自己今日事今日毕的吗？那么我的目标是什么？应该怎么确定自己的目标呢？</p>
                <p>
                  <span>鼓励思考，不鼓励庸人自扰</span>。用线性思维去看非线性世界是愚蠢的。就像不输掉一盘棋的办法是不去玩(毕竟“不输掉一盘棋”和“如何赢一盘棋”不是对等的)，不符合逻辑的事多的是，别钻牛角尖。
                </p>
                <p>思考的时候你可以天马行空，<span>行动的时候，你必须脚踏实地</span>。</p>
                <p>
                  <span>问题从面线点逐渐分解：</span>比如“如何做思维导图公开课”的方案：确定一个选题范围，是技能型为主，还是做一些心法？在这种选题范围内，大致涵盖哪些要点？去哪些地方搜集辅助资料？大概花多久时间写出脚本？多久时间制作完成……
                </p>
                <p><span>以小见大，构成体系</span>：一个小小的任务清单，最终牵扯出来的，仍然可能和个人目标、处事方式有重要的关联。因为只要你愿意多问自己问题，你就能牵扯出一张网，这张网就是很多人说的——体系。
                </p>
                <br>
                <p>如果一个普通人需要处理的事情多到无法处理，是否应该反思下，是不是要得太多了？</p>
                <p class="indent">①
                  <span>逆向思维</span>如果你确实不知道自己该做什么，不如先问问自己不能做什么（这是一位老先生的话）；不去想做什么，该想不做什么。不要老想着做事情，而是享受自己的存在。
                </p>
                <p class="indent">② 依然<span>把需要做的事情按目标权重排序</span>，然后有时间就做距离目标比较近的事情，做不完没关系，反正你也做不完所有事情；</p>
                <p class="indent">③
                  把所有需要做的事情做一个<span>价值排序</span>之后，只取排行榜上前面十件甚至五件，后面不管是什么，都不要再去管它们，时间会让你知道，不管你做没做其他事情，地球照样运转。</p>
              </div>

              <!-- 栏目2：事件分类 -->
              <div class="txtpart">
                <p class="right">整理自 Topbook <b class="hotlink" onclick="toLink('https://topbook.cc/course/detail/153')">《重新认识GTD》</b>系列文</p>
                <h4>前提须知</h4>
                <p>清单有很多种：计划 总结 书单 备忘 收藏 随感……但不管怎么分，内容都可以分为两种——要做的和其他的</p>
                <p><span>要做的</span>--放在收集箱，进而分类，进入五个清单(执行|日历|等待|项目|可能)</p>
                <p class="indent">特殊的可在设置中安排为刷新任务（每几天都要完成一次）和定期任务（仅作提前提醒）</p>
                <p class="indent">事项除了从如何完成角度进入五个清单，它本身也具有多维度，为了更好划分，在输入时<span>加前缀，如s-学习、l-生活、w-工作</span> （日后可在标签中搜索查询）</p>
                <p><span>其他的</span>--那就记录（起提示、备忘、碎片收纳作用），记录分主内和主外的</p>
                <p class="indent"><span>主内是协助使用该应用的</span> 比如说 检查卡，参考资料，自定义链接，定期任务的输入让做事更稳妥；打卡，进程分析，项目数据的收集统计让分析更明朗</p>
                <p class="indent"><span>主外是做临时记录</span>应该用外链连接并整理输出，如完成清单、随感-小本本、 记忆内容、问题记录&搜索记录、收藏(参考链接+自定义链接)等</p>
                <p class="indent">至于书单这类纯记录的东西(如大量笔记)——不需要处理的东西，如有必要请选择链接进来</p>
                <h4>事件分类【明晰与组织】：让精力集中在想要的方向上</h4>
                <p>下面处理的都是要做的事，主要分五步：</p>
                <p><span>收集/主动捕获--明晰/强调结果--组织--计划的同时更强调回顾--执行更强调与执行对象的联系（人性化-拿结果）</span></p>
                <p class="indent">注意①：2分钟可以搞定的请立刻做，不需要安排进来。</p>
                <p class="indent">注意②：属于成熟系统内的事项可以直接写入执行清单，如作为学生的任务是做完一张数学卷。</p>
                <p class="indent">收集到的事项不是每项都要立马执行的，可通过下面的提问归类为在七个清单中（执行清单，日历清单，等待清单，项目清单，可能清单，参考资料，回收箱）。</p>
                <br>
                <p>Q1：可行动吗？（if not： <span>可能清单</span>，<span>参考资料</span>，<span>回收箱</span>）</p>
                <p>Q2：能一步搞定吗？（if not：<span>项目清单</span>[下一步？做规划/做方案]）</p>
                <p>Q3：该我做吗？</p>
                <p class="indent">if not：<span>等待清单</span>[标明事项，时限，可能的执行事项，特定时机确认。分析可能情况，主动确保这件事能够被顺利完成，配合闹钟]</p>
                <p>Q4：特定时间？（if not：归入<span>执行清单</span>）</p>
                <p>Last：调闹钟或写进日历，写入<span>日历清单</span></p>
                <br>
                <p><span>【提醒】</span>对于复杂的内容不妨建个知识库作为项目，在刷新任务中添加对应链接就方便很多了。</p>
              </div>

              <!-- 栏目3：每日回顾 -->
              <div class="txtpart">
                <p class="right">Topbook <b class="hotlink" onclick="toLink('https://topbook.cc/course/detail/153?selectedSection=92')">《全局复盘-GTD五个流程》</b>的整理与运用
                </p>
                <h4>day回顾(2次)：起始 and 终结</h4>
                <p>每日的流程是：事项捕获 -> 回顾 -> 事项处理 -> 回顾</p>
                <br>
                <p>首次回顾【<span>切简版</span>】：温习（<span>记忆模块</span>）与清晰实践水平（<span>完成进度</span>），做个规划</p>
                <p class="indent">① 对捕获来的事项进行<span>清单分类并输入</span>（详见片段文<b class="hotlink jumptoknew">《事件分类步骤》</b>或进入<span class="jumpboxbtn"> 收集箱 </span>熟悉步骤）</p>
                <p class="indent">② 对事项进行<span>优先序排列</span>(按个人追求)，必要时可加紧急加重要标志(更细致地分可加上前缀 s-表学习，l-表生活，w-表工作)</p>
                <p class="indent">③ 可选：对事项进行<span>难度分级</span>(添加ABCD)： [<span>A看似简单</span>-多角度勤分析]
                  [<span>B简单却耗时</span>-效率] [<span>C看似困难</span>-勤接触][<span>D多余</span>-少做]</p>
                <br>
                <p>再次回顾【<span>检查页</span>、<span>总结面板</span>和<span class="jumptagbtn"> 标签模块 </span>的#今天】：</p>
                <p class="indent">① <span>要事分析</span>不可少，评级量自估，对症下药(改描述寻方法)</p>
                <p class="indent">② <span>完成清单</span>，每天的量与度，找找规律，是否合理？</p>
                <p class="indent">③ 可选：<span>记忆模块</span>主动回忆模式下加深记忆(配合第一人称形象联想)</p>
                <p class="indent">④ 可选：<span class="jumpdakabtn">签到 </span>最特别的点，一是看毅力，二是看近期侧重，总方向不走偏</p>
                <p class="indent">⑤ 可选：分析整理<span>小本本</span>琐碎的想法、<span>参考资源</span>（构建个人知识库）</p>
                <p class="indent">⑥ 提示：在标签模块的<span>#今天</span>能直观看到今天的操作结果，再结合<span>小本本</span>把笔记整理出来</p>
                <p>
                  最后【<span>切简版</span>】：未完成的事项中哪些不做了，哪些需简化任务或腾出专门的时间？点击“复制处理数据”按钮，保存并整理完成事项等其他数据(更多的操作可在<span>标签模块</span>中编辑和下载)。
                </p>
                <br>
                <p>回顾了今天，在个人历史上定格了今天，再展望下明天。</p>
                <p class="indent">项目清单：主动拆解并谋划执行方案，把大项目拆解成小步骤，并分解到其他清单当中，明确下一步是什么？正在做吗？做得怎么样了？</p>
                <p class="indent">可能清单：自己主动去思考事情的可行性有多大。把思考这件事，也放进执行清单。（思考：why when how how much effect-where who what）
                </p>

                <!-- 栏目：每周回顾 -->
                <h4>week回顾：更想要 更喜欢 更应该</h4>
                <p>目的：检查科学性（私人订制） + 查漏补缺 + 主动收集</p>
                <p>
                  【更应该】<span>自估能力提高</span>：什么事你认为难其实不难，什么事你认为简单其实容易进坑，表里如一的事就直接干，不然请不要让心理这个小九九来自添难度或自我降智。<span>更客观地认识和分析问题。</span>
                </p>
                <p>
                  【更应该】<span>自我认知提高</span>：每天大概能做多少事？工作量是否在自己能力范围内？哪些事耗时-善用工具或其他帮助？哪些事多余-减少不必要的时间牺牲？<span>事不在多在精，量力而为，调整计划，向提高进度百分比看齐。</span>
                </p>
                <p>【更喜欢】做哪方面的事更顺手？计划好 or 心情好 or 偏好？<span>培养自信心，让它成为擅长。</span></p>
                <p>【更想要】余生是倒计时，大部分时间用在我想前行的路上，小部分时间用在卸下包袱，放松休息。</p>
                <br>
                <p> <span>制定检查清单</span>-与刷新任务不同，前者可以是抽象判断，后者必须是可执行的事项，因为会计入当日的任务量。</p>
              </div>

              <!-- 栏目4：注意事项 -->
              <div class="txtpart">
                <p class="right">整理自 Topbook <b class="hotlink" onclick="toLink('https://topbook.cc/course/detail/153')">《重新认识GTD》</b>系列文</p>
                <h4>执行提示：万事开头难，害怕解决不了问题</h4>
                <p>前提：保障自己有充足的睡眠、健康的身体，而且不能牺牲合理的人际关系、个人幸福感</p>
                <p>切记：量力而为——<span>你不可能完成所有的事情 ，尽可能做离你目标更近的事情</span></p>
                <p>执行的注意点：</p>
                <p class="indent">①
                  <span>执行清单的事项是你可以一步搞定的</span>。如果不是因为自己态度和能力有问题，而是因为事件特殊用时较长，得知道“事情头疼并非因为它难，因为我们很少接触，误以为难”
                </p>
                <p class="indent">② 必修课：<span>不管好坏，起码愿意做计划、做方案</span>。不是说非得把方案做多好，而是在这种主动意愿下每次都有小进步
                </p>
                <p class="indent">③ <span>做好时间预估，为特别的事件预留时间</span>，可以<span>变通</span>，找别人帮忙</p>
                <p class="indent">④ <span>在你有限的生命里，有些事没必要做</span>，它该待在回收箱里(毕竟你不可能完成所有的事情，它微不足道)</p>
                <p class="indent">⑤ 保证质量和效率：<span>一次只处理一件事情，定时(番茄时间)，打破负罪感幻觉</span> </p>
                <br>
                <p>参考资料：万物皆可参考，但参考价值的高低是相对的</p>
                <p class="indent">① <span>回归常识，回归自我</span>，避免追新、奇、怪</p>
                <p class="indent">② <span>提高信息的检索、辨别能力</span>；人找书很难，但书找书却很容易，多看多用多思考，学检索方法也要学辨别好坏，不要忘了回归常识</p>
                <p class="indent">③ <span>提高参考资料的存档标准</span> ( 不存档能搜到的、浅显而平常的、换汤不换药的如某些新概念 ) </p>
                <p class="indent">④ 现代人的参考资料: a. 网络搜索引擎；b. 个人知识库（工作所需与智慧或对智慧的见解）</p>
                <p>其他方法：要事第一 四象限法则</p>
              </div>

              <!-- 栏目5：特殊任务 -->
              <div class="txtpart refreshpart">
                <div class="countdownCon">日期倒计项：<span class="countdownconTxt">（暂无）</span><button class="setCountdownbtn">改</button></div>
                <div class="piece">
                  <button class="setTaskbtn" data-index="4">改</button>
                  <div class="title">日刷新任务<i class="status"> (未开启)</i></div>
                  <ul class="refreshUl"></ul>
                </div>
                <div class="piece">
                  <button class="setTaskbtn" data-index="5">改</button>
                  <div class="title">周刷新任务<i class="status"> (未开启)</i></div>
                  <ul class="refreshUl"></ul>
                </div>
                <div class="piece">
                  <button class="setTaskbtn" data-index="6">改</button>
                  <div class="title">月刷新任务<i class="status"> (未开启)</i></div>
                  <ul class="refreshUl"></ul>
                </div>
                <div class="piece regularpart">
                  <div class="easylink"></div>
                  <div class="title tasktitle" title="从旧到新排列，新项添加时默认开启提醒，不计入任务数量的计算">定期任务<i class="status"> (提前<em class="taskMentionNum" title="该数值可在设置面板中自定义">3</em>天提醒)</i><span class="taskaddbtn" title="新增项">+</span></div>
                  <ul class="regularUl"></ul>
                  <div class="passline hidden"></div>
                  <ul class="regularUlPass"></ul>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>
      <div class="towritebtn" title="打开/关闭书写框(W)"><span class="writebtn"></span></div>
      <div class="totopbtn" title="回到顶部">&lt;</div>
      <!-- 中间框 -->
      <div class="morefunpart">
        <div class="back" title="点击关闭"></div>
        <div class="morepart-wrapper">
          <div class="morepart-content">
            <div class="closetipbtn">×</div>
            <!-- 收集箱 -->
            <div class="section collectsection">
              <div class="title">收集箱 - 各种想做的事</div>

              <div class="collectouter">

                <div class="rightside">
                  <div class="cardecor" title="隐藏按钮-同样是实现分类">分类</div>
                  <p style="text-align: center; margin-bottom: 20px;">引导步骤 <u class="toknewbtn" title="如何对事项进行分类？">?</u>
                  </p>
                  <div class="collectGuide" data-num="0">
                    <p>Q1：可行动吗？</p>
                    <p>no： <label data-num="4"><input type="radio" name="collect">可能清单</label>，<label data-num="5"><input type="radio" name="collect">参考资料</label>，<label data-num="6"><input type="radio" name="collect">回收箱</label></p>
                    <p>Q2：能一步搞定吗？</p>
                    <p>no： <label data-num="3"><input type="radio" name="collect">项目清单[next? plan?]</label></p>
                    <p>Q3：该我做吗？</p>
                    <p>no： <label data-num="2"><input type="radio" name="collect">等待清单[makesure: what? deadline, maybe?
                        ring?]</label></p>
                    <p>Q4：特定时间？</p>
                    <p>no： <label data-num="0" class="active"><input type="radio" name="collect" checked="true">执行清单</label></p>
                    <p>yes：<label data-num="1"><input type="radio" name="collect">日历清单[ring|calendar]</label></p>
                  </div>
                  <div class="controlfunc">
                    <span class="savecollectbtn" title="避免F5强制刷新或关闭网页/插件时遗失最新修改">保存</span>
                    <span class="classifybtn">分类</span>
                  </div>
                </div>

                <div class="collectUl-wrapper">
                  <p>(共<span class="collectPnum">0</span>项，选中<span class="collectPnum">0</span>项)</p>
                  <ul class="collectUl"></ul>
                  <div class="collectAddbtn">+</div>
                </div>
              </div>
            </div>
            <!-- 标签管理 -->
            <div class="section tagsection">
              <div class="title">标签管理 - 下载 <div class="easylink"></div>
              </div>

              <div class="tagfind">
                <input class="tagsearch" type="text" placeholder="Enter搜索 (起别名: XXX|新标签名) ">
                <span class="tagmakebtn" title="把当前搜索结果归纳为一个标签">设为标签</span>
                <div class="tagstatus">
                  <u class="writebtn" onclick="ableToEdit(event,-5);" title="删除标签模式（目前仅支持两行标签显示）"></u>
                  <span>#全部</span><span title="此处主要看今天做了的，没做的回主编辑页处理">#今天</span><span>#记忆</span><span>本本</span><span>收藏</span><span title="需要在设置中开启">搜索记录</span>
                </div>
              </div>
              <div class="tagmenu" data-menu="0">
                <div class="tagmenujumpline"><u title="查看签到情况">签</u><u title="查看特殊任务列表">特</u></div>
                <u class="tagmenudecor" title="点击查看-每日每周回顾指引"></u>
                <ul>
                  <li class="active" data-menu="0">未完成</li>
                  <li data-menu="1">已完成</li>
                  <li data-menu="2">特殊任务</li>
                  <li data-menu="3">回收箱</li>
                </ul>
                <div class="downloadnowbtn">编辑模式</div>
              </div>
              <div class="control"><u class="tagdownBtn" title="去掉前面的标志">去标</u><u class="tagdownBtn" title="markdown格式">下载</u><u class="tagdownBtn">取消</u></div>
              <div class="tagCon-wrapper">
                <div class="tagContent">
                  <div>(Undo<sup>-</sup>: 收集箱「集」 五个清单：执行「执」 日历「历」 等待「等」 项目「项」 可能「可」)</div>
                  <ul class="undoUl"></ul>
                  <div>(Done: 记忆 进程分析 打卡 完成[完] 小本本「本本」<sup>-</sup> )</div>
                  <ul class="donedUl"></ul>
                  <div>(Task: 刷新任务 定期任务 自定义链接「链接」 参考资料「参考」<sup>-</sup> 检查卡「检查」)</div>
                  <ul class="taskUl"></ul>
                  <div>(Delete: 回收箱[删]<sup>-</sup>) 【带有减号上标的项都是需要配合设置面板定期清理的项】</div>
                  <ul class="deleteUl"></ul>
                </div>
                <div class="tagDownload">

                  <div class="tagDownCon" contenteditable="true"></div>
                </div>
              </div>

            </div>
            <!-- 设置 - 链接互用 -->
            <div class="section urlsection">
              <div class="title">设置 - 链接互用</div>
              <div class="referLink"><span>方式1：将资料页自定义链接--添加至--参考资料</span><span class="restartbtn" data-txt="开启"></span>
              </div>
              <div class="referLink">方式2：将资料页自定义链接--贴到--不同面板的标题旁的小猫:</div>
              <p class="tip">【提示】 把链接的对应序号填入或输入http://|https://开头的网址 </p>
              <div class="linkuseCon">
                <dl class="partDl">
                  <dd data-id="0"><span>检查卡:</span><input type="text" title="检查卡小猫的链接输入"></dd>
                  <dd data-id="1"><span>完成卡:</span><input type="text" title="完成卡小猫的链接输入"></dd>
                  <dd data-id="2"><span>小本本:</span><input type="text" title="小本本小猫的链接输入"></dd>
                  <dd data-id="3"><span>启动页:</span><input type="text" title="启动页小猫的链接输入"></dd>
                  <dd data-id="4"><span>分析模块:</span><input type="text" title="分析模块小猫的链接输入"></dd>
                  <dd data-id="5"><span>完成模块:</span><input type="text" title="完成模块小猫的链接输入"></dd>
                  <dd data-id="6"><span>记忆模块:</span><input type="text" title="记忆模块小猫的链接输入"></dd>
                  <dd data-id="7"><span>特殊任务:</span><input type="text" title="特殊任务小猫的链接输入"></dd>
                  <dd data-id="8"><span>标签管理:</span><input type="text" title="标签管理小猫的链接输入"></dd>
                  <dd data-id="9"><span>问题记录:</span><input type="text" title="问题记录小猫的链接输入"></dd>
                  <dd data-id="10"><span>项目管理:</span><input type="text" title="项目管理小猫的链接输入"></dd>
                </dl>
                <ul class="urlUl"></ul>
              </div>
              <div class="funbtns"><span>清空已有设置</span><span>确定修改</span></div>
            </div>
            <!-- 问题及解决办法记录 -->
            <div class="section questionsection">
              <div class="title" title="只要思想不滑坡，办法总比问题多">问题记录及解决办法<div class="easylink"></div>
              </div>
              <div class="helptxt" style="margin-bottom: 8px;">
                <p>A.客观描述问题-->[ 打开思路：你想怎么做，别人怎么做？]</p>
                <p>B.分析现实问题-->[ 什么少了多了变了堵了？对应增删改除]</p>
                <p>C.判断与尝试(思路)-->[ 观察 + 尝试的方法 => 结果 + 决定 ]</p>
                <p>D.小结：关键点？根据？更好办法？[ 回归目标，认真做充要条件 > 持续做必要条件 ]</p>
              </div>

              <div class="quesnav">
                <span class="quesmenuitem" title="避免F5强制刷新或关闭网页/插件时遗失最新修改">存</span>
                <span class="quesmenuitem" title="在文末添加问题模板">模</span>
                <span class="quesmenuitem" title="在文末添加日期">今</span>
                <span class="quesmenuitem" title="清空文本内容，误删的话可通过重新打开来恢复(因为没删内存里面的)">清</span>
                <span class="quesmenuitem" title="回到顶部">&and;</span>
              </div>
              <div class="quesCon-wrapper">
                <div class="quesCon" contenteditable="true" spellcheck="false"></div>
              </div>
            </div>
            <!-- 项目内容 -->
            <div class="section itemsection">
              <div class="title">项目管理<div class="easylink"></div> - <b class="itemNameTxt">帮助&介绍</b></div>
              <p>项目编号：
                <select class="itemselect" name="itemSelect" title="项目编号选项"></select>
                <span class="itemnumBtn unactive" title="根据编号更换项目数据">切换项目</span>
                <span class="itemnumBtn" title="项目数据变动了，手动刷新数据">刷新</span>
                <span class="itemnumBtn unactive" title="归档后数据不再同步，且在项目清单中移出">归档</span>
                <span class="itemnumBtn" title="在标签管理中获取该项目对应的md数据">导出</span>
              </p>
              <p class="remarkstxt" contenteditable="true" spellcheck="false"> ( 项目相关内容：时间段 备注 注意事项等 ) </p>
              <p class="addsignP">新建小目标，并采用事项标志：<input class="itemsign" type="text" placeholder="阶段名|标志"> <span class="itemsignBtn" title="采集清单项中含有该标志开头的项形成内容">添加</span></p>
              <p>已有标志：<b class="signTxt"><span>模板标志</span></b><span class="itemsignDelBtn" title="删除某个阶段与标志--不可恢复">删除标志</span><span class="itemsmallBtn" title="折叠各个阶段内容">折叠</span></p>
              <div class="itemAllPeriod">
                <div class="itemPeriod" data-sign="模板标志">
                  <div class="itemStatus" data-show="1" onclick="showWrapper(this)"><div class="itemprogressback"><mark></mark></div><span>></span><div class="periodName">阶段名(@模板标志)</div><div class="periodCount">计划(<b>5</b>) 进行(<b>4</b>) 完成(<b>6</b>)</div></div>
                  <div class="itemCon-wrapper">
                    <div>
                      <p>计划中-收集箱：<span class="itemAddBtn" onclick="writeLayer('itemadd', '模板标志')">+</span></p>
                      <ul class="itemplanUl">
                        <li>[项范围] 项目里事项的范围包括：收集箱、执行清单、日历清单、等待清单和完成清单</li>
                        <li>[项格式] 表示项目项的关键是标志，在输入事项时在【句首】用格式“@标志 ”(后有空格)书写，标志仅支持 中文|小写字母|数字|下划线|短横线</li>
                        <li>句首用@标志 时添加多项：收集箱是默认每项都添加该标志，其他清单想要每项都添加标志可点击“自动处理”按钮来处理</li>
                        <li>[关联项] 要想把含有某标志的内容纳入项目，需要在当前面板写好“阶段名|标志”并添加</li>
                        <li>[项同步] 项目添加阶段及标志后，即一直同步含标志的各清单项的状态（归档之后就不再同步）</li>
                      </ul>
                    </div>
                    <div>
                      <p>进行中-清单项(可一步搞定的)：</p>
                      <ul class="detail itemtodoUl">
                        <li><span class="cbox"></span><b class="item">点击阶段名可收起或展开具体事项</b></li>
                        <li><span class="cbox"></span><b class="item">[阶段改名] 直接重新添加“新阶段名|同个标志”就可以了</b></li>
                        <li><span class="cbox"></span><b class="item">[查看标志] ① 阶段名中括号内容；② 已有标志展示的排列和下面阶段内容的排列是一一对应的；③ 点击+号进入书写框得到@标志</b></li>
                        <li><span class="cbox"></span><b class="item">[删除标志] 点击删除标志，再需输入要删除的标志名称</b></li>
                      </ul>
                      <ul class="detail itemdoneUl">
                        <li><span class="cbox"></span><b class="item">项目编号和项目里不同阶段的标志都用@指定，但不要混淆。@编号(放句末)写在项目清单里，@标志(放句首)写在执行/日历/等待/收集箱里，它们与正文内容之间都用空格隔开</b></li>
                        <li><span class="cbox"></span><b class="item">项目的编号具有唯一性，在输入项目清单项时，在【句末】用“ @编号”(前面有空格)指定，编号仅支持 小写字母|数字|下划线|短横线</b></li>
                        <li><span class="cbox"></span><b class="item">项目项成功添加编号后，会在前面增加书签图标，可点击进入对应项目。如果没有标识，那就是添加格式不对了</b></li>
                        <li><span class="cbox"></span><b class="item">若某项目项修改了编号(或该项目项已删除)，那么原编号的数据虽作废但仍然存在，此时可在设置里删除“项目失效数据”</b></li>
                        <li><span class="cbox"></span><b class="item">若某项目项里关联的内容已经完成，那么该项目可以点击按钮“归档”，日后该编号的事项将不再同步更新（但备注信息还是可改的）</b></li>
                        <li><span class="cbox"></span><b class="item">注意：项目的编号和里面的各个标志本身都不含有@，只是在输入事项时需要@标识【在标签管理里可通过 @@编号 获取md格式内容】</b></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>


            </div>
          </div>

          <div class="morepart-notebox">
            <input type="text" class="morewritebox" placeholder="( 添加到小本本 Enter )">
            <div class="focusfoback">
              <div class="cleartxtbtn">清</div>
            </div>
          </div>
        </div>

      </div>


      <div class="setting">
        <div class="settingback" title="点击关闭设置面板">
          <div class="closetipbtn">×</div>
        </div>
        <div class="settingpart">
          <div class="piece" style="margin-top: 20px;">
            <div class="title">简单说明<strong class="link" onclick="toLink("https://www.yuque.com/nibaobao-youho/pqbrew/doit")">（文章）</strong></div>
            <b>快捷键(Alt+)：简记 Alt + ASDWCBTQIZ|0123(书写框操作键) </b>
            <b style="text-indent: 2em; font-size: .9em;">主编辑页A，检查页C，书写框W，收集箱B，问题记录Q，项目管理I，关闭中间面板Z</b>
            <b style="text-indent: 2em; font-size: .9em;">添加项/加入随记Enter，添至执行清单D，站外搜索S，站内搜索T(打开标签管理并搜索[主页输入框或书写框的内容])</b>
            <b>数据保存(切简版|标签管理)：①备份清单数据-可导入 ②处理数据</b>
          </div>
          <div class="piece">
            <div class="title">数据自定义</div>
            <div class="firstCon">
              <div>
                <p title="注意！该修改会中断进行中的计时">启动页-休息时间：<input type="number" min="1" placeholder="原始值：300（单位秒）"><span data-btn="7">确定</span><i class="result"></i></p>
                <p style="margin: 4px 6px;">做事类型自定义：<u class="odotype ellipsis">……默认项……</u><span data-btn="8">修改</span>
                </p>
                <p style="margin: 4px 6px;">可用方法自定义：<u class="obetterway ellipsis">……默认项……</u><span data-btn="9">修改</span></p>
              </div>
              <div><b>检查页头部-判定设置：<i class="result"></i></b>
                <label>任务数量能显示的阈值<input type="number" min="1" max="100" placeholder="原始值：10"><span data-btn="0">确定</span></label>
                <label title="若每日完成度不满足该值将显示蓝色或紫色，可理解为完成度预期值">任务完成度目标值(%)<input type="number" min="1" max="100" placeholder="原始值：30 (即30%)"><span data-btn="1">确定</span></label>
              </div>
              <div><b>进程分析模块-完成度等级判定：<i class="result"></i></b>
                <label title="A级别的值应比B级别的值大">A级别判定值<input type="number" placeholder="原始值：80" min="1" max="100"><span data-btn="2">确定</span></label>
                <label title="若B级别的值比A级别的值还大，那么B级别的值判定无效">B级别判定值<input type="number" placeholder="原始值：65" min="1" max="100"><span data-btn="3">确定</span></label>
              </div>
              <div>
                <b>特殊任务设置：</b>
                <p style="text-align: center;margin-top: 8px;">
                  <span class="refreshbtn" data-btn="4" data-txt="日刷任务">日刷任务</span>
                  <span class="refreshbtn" data-btn="5" data-txt="周刷任务">周刷任务</span>
                  <span class="refreshbtn" data-btn="6" data-txt="月刷任务">月刷任务</span>
                  <span class="regularbtn" data-btn="10" data-txt="定期任务">定期任务</span>
                  <span class="jumpToRefresh" data-open="1" data-btn="999" title="查看所有刷新/定期任务状态">看</span>
                  <span class="countdownbtn" data-btn="13" data-txt="日期倒计时">日期倒计时</span>
                </p>
                <p style="margin: 6px 0;">定期任务提前提醒：<input type="number" min="0" placeholder="原始值：3（单位天）"><span data-btn="11">确定</span><i class="result"></i></p>
              </div>
              <div class="noUnderline">
                <p>资料页自定义链接映射到其他地方、各模块卡片贴链接 <span data-btn="12">设置</span></p>

              </div>

            </div>
          </div>
          <div class="piece">
            <div class="title">各项数据删除</div>
            <div class="secondCon">
              <div>
                <label><input type="checkbox" class="dataclear" value="打卡"><span class="cbox"></span>打卡</label>
                <label><input type="checkbox" class="dataclear" value="分析"><span class="cbox"></span>进程分析</label>
                <label><input type="checkbox" class="dataclear" value="完成"><span class="cbox"></span>完成清单</label>
                <label><input type="checkbox" class="dataclear" value="记忆"><span class="cbox"></span>记忆模块</label>
                <label title="清空执行|日历|等待三个清单和回收箱"><input type="checkbox" class="dataclear" value="清单"><span class="cbox"></span>清单<sup>-</sup></label>
                <label><input type="checkbox" class="dataclear" value="检查卡"><span class="cbox"></span>检查卡</label>
                <label><input type="checkbox" class="dataclear" value="小本本"><span class="cbox"></span>小本本</label>
                <label title="全部刷新任务，包括已完成的任务记录"><input type="checkbox" class="dataclear" value="刷新任务"><span class="cbox"></span>刷新任务</label>
                <label title="当日已完成的刷新任务记录"><input type="checkbox" class="dataclear" value="当日已完成的刷新任务记录"><span class="cbox"></span>刷新任务的完成记录</label>
                <label title="全部定期任务"><input type="checkbox" class="dataclear" value="定期任务"><span class="cbox"></span>定期任务</label>
                <label title="参考资料"><input type="checkbox" class="dataclear" value="参考资料"><span class="cbox"></span>参考资料</label>
                <label title="收集箱"><input type="checkbox" class="dataclear" value="收集箱"><span class="cbox"></span>收集箱</label>
                <label title="回收箱"><input type="checkbox" class="dataclear" value="回收箱"><span class="cbox"></span>回收箱</label>
                <label title="所有数据都会删掉"><input type="checkbox" class="dataclear" value="全部"><span class="cbox"></span>全部</label>
                <label title="自定义数据"><input type="checkbox" class="dataclear" value="自定义数据"><span class="cbox"></span>自定义数据</label>
                <label title="搜索记录"><input type="checkbox" class="dataclear" value="搜索记录"><span class="cbox"></span>搜索记录</label>
                <label title="项目失效数据"><input type="checkbox" class="dataclear" value="项目失效数据"><span class="cbox"></span>项目失效数据</label>
                <label title="所有项目数据"><input type="checkbox" class="dataclear" value="所有项目数据"><span class="cbox"></span>所有项目数据</label>
                <span class="dataclear">清空所选</span> <i class="result"></i>
              </div>
            </div>
          </div>
          <div class="piece">
            <div class="title">个性/搜索选择</div>
            <div class="thirdCon">
              <div class="themeline">主题模式：
                <label><input type="radio" name="themeMode" checked="checked" class="themechoose" value="明亮模式"><span>明亮</span></label>
                <label><input type="radio" name="themeMode" class="themechoose" value="灰度模式"><span>灰度</span></label>
                <label><input type="radio" name="themeMode" class="themechoose" value="暗黑模式"><span>暗黑</span></label>
              </div>

              <div class="searchModeline">搜索范围：
                <label><input type="radio" name="searchMode" checked="checked" class="searchMode" value="百度"><span>百度</span></label>
                <label title="高效视频书网站，可搜索很多有用的技巧和方法"><input type="radio" name="searchMode" class="searchMode" value="topbook"><span>topbook</span></label>
                <label title="各类资源综合网"><input type="radio" name="searchMode" class="searchMode" value="B站"><span>B站</span></label>
                <label title="热心网友回答"><input type="radio" name="searchMode" class="searchMode" value="知乎"><span>知乎</span></label>
                <label title="很全的代码问题集中区"><input type="radio" name="searchMode" class="searchMode" value="CSDN"><span>CSDN</span></label>
                <label><input type="radio" name="searchMode" class="searchMode" value="简书"><span>简书</span></label>
                <label title="代码方面社区"><input type="radio" name="searchMode" class="searchMode" value="掘金"><span>掘金</span></label>
                <label title="代码方面社区"><input type="radio" name="searchMode" class="searchMode" value="思否"><span>思否</span></label>
                <label title="微信公众号文搜索"><input type="radio" name="searchMode" class="searchMode" value="微信搜狗"><span>微信搜狗</span></label>
                <label title="各种文档库"><input type="radio" name="searchMode" class="searchMode" value="语雀"><span>语雀</span></label><i class="result"></i>
              </div>

              <div>启动页 - 每次生成数据后都清空表单
                <span class="deletechoose restartbtn" data-txt="开启"></span>
              </div>

              <div class="isPlayAudio" style="display: none;">启动页 - 倒计时结束后播放音效
                <span class="audiochoose restartbtn" data-txt="开启"></span>
              </div>

              <div>简版页 - 简化处理数据（完成清单+小本本+参考卡）
                <span class="outputchoose restartbtn" data-txt="开启"></span>
              </div>

              <div>检查页 - 完成清单搜索时显示所有日期的结果
                <span class="unshowNonechoose restartbtn" data-txt="开启"></span>
              </div>
              <div class="noUnderline">记录每次的搜索内容（可以在标签管理处查看）
                <span class="recordchoose restartbtn" data-txt="开启"></span>
              </div>

            </div>

          </div>

        </div>
      </div>
    
    
    <script>
        // 功能函数：存储 时间 变量
        // ① localStorage-localSave&localGet
        // ② 时间--需要新加载的
        var countdownTxt = ''; // 倒计时内容
        var filedlist = []; // 归档项目编号数组
        var periodHTML = '';
        var itemObj = {}; // 项目总数据
        var existItem = ['模板']; // 已有的项目编号，默认模板abc
        var itemsignNum = {}; // 当前项目编号对应的已有的标志
        var linklist = []; // 热链接的临时列表
        var analyseList = []; // 表单的分析数据
        var badmoonlist = []; // 记录心情不好的日期
        var today = ""; //2021/08/08
        var todayAdd = ""; // 2021-08-08
        var finishAll = 0; // 任务总数
        var finishObj = {}; // 任务对象，日期-[完成率，总数]
        var analyseDiff = 0; // 分析数据的难度选择
        var newpartshow = -1;
        var oldpartshow = -1;
        var isOpenSetting = false; //是否打开了设置
        var randomshow = 0;
        var todayDakaItem = '';
        var norefreshnote = true;
        var refreshlist = []; // 日刷新/周刷新/月刷新任务(refreshlist[3]包括开启否)
        var refreshObj = {}; // 012对应真实的刷新的数据，
        var tmpRefresh = []; // refreshObj添加前缀处理后形成
        var delRefresh = []; // 删除数据-三个obj，{号数-删除串^},{'号数'-删除串^},{月号-删除串^}
        var regularObj = {}; // 日期对应提醒项  日期：[提前提醒日，数据]
        var noticeDates = ''; // 提醒日期的组合
        var linkconnect = {}; // 链接互用设置数据
        var taglist = []; // 标签列表
        var recordChoseStr = '';
        var quesContent = '';
        var mobilenum = 252; // 电脑252 移动端 354
        if (document.body.offsetWidth < 420) {
          mobilenum = 328;
        }
        // 用户统计数据
        var userDefined = {};
        var txtChooe = {
          'doType': '整理*社交*生活*尝试*学习*项目*教学*反三',
          'betterWay': '实践试错*提问搜索*视频-模块化*实战模仿*导图-联想分类*讨论*故事'
        };
        var alldayNumObj = {}; // 所有日期与当日完成任务数
        var thatdayNum = 0; // 当日完成的任务数量
        var allNum = 0; // 当前所有的任务量（包括完成与未完成-但只包含3个列表）
        var percent = "0%"; // 由上面算出的比值
        var {
          year,
          month,
          date
        } = getTime();
        var now = Date.UTC(year, month - 1, date); // 一长串数值，如：1631232000000
        // var odate = new Date(); //这时间获取的是本地的？
        function toLink(url) {
          if (window.utools) {
            utools.shellOpenExternal(url);
          } else {
            window.open(url);
          }
        }

        function formatDate(data) {
          if (data < 10) {
            return "0" + data;
          } else {
            return data;
          }
        }


        function getTime() {
          var timer = new Date();
          var year = timer.getFullYear();
          var month = timer.getMonth() + 1;
          var week = timer.getDay();
          var date = timer.getDate();
          var newtoday = year + "/" + formatDate(month) + "/" + formatDate(date);
          if (newtoday !== today) { // 新的一天
            if (today !== '') {
              location.reload();
            }
            today = newtoday;
            todayAdd = year + "-" + formatDate(month) + "-" + formatDate(date);
          }

          return {
            year,
            month,
            date,
            week
          };
        }

        function toGet(name, type, plural = false) {
          if (type === 'id') {
            return document.getElementById(name);
          } else if (type === 'name') {
            return document.getElementsByName(name);
          } else if (type === 'classname') { // 默认取一个值
            return plural ? document.getElementsByClassName(name) : document.getElementsByClassName(name)[0];
          }
        }


        function localSave(name, obj, type, otiptxt = null) {
          var s = obj;
          if (type === 'object') {
            s = JSON.stringify(obj);
          }
          if (window.localStorage) {
            window.localStorage.setItem(name, s);
          } else if (window.utools) {
            utools.onPluginReady(() => {
              utools.db.put({
                _id: name,
                data: s
              })
            })
          } else if (otiptxt) {
            otiptxt.innerText = '当前浏览器不支持localStorage语法，可尝试将浏览器升级到最新版本。';
          }
        }

        function localGet(name, type, otiptxt = null, sign = null) {
          var str = null;
          if (window.localStorage) {
            str = window.localStorage.getItem(name);
          } else if (window.utools) {
            utools.onPluginReady(() => {
              str = utools.db.get(name);
            })
          } else if (otiptxt) {
            otiptxt.innerText = '当前浏览器不支持localStorage语法，可尝试将浏览器升级到最新版本。';
          }

          var obj = null;
          if (str) {
            if (type === 'object') {
              obj = JSON.parse(str);
            } else if (type === 'string') {
              obj = str.trim();
            } else if (type === 'list' && sign) {
              obj = str.trim().split(sign);
            }
            return obj;
          } else {
            return false;
          }
          return obj;
        }

        function localDel(name) {
          if (window.localStorage) {
            window.localStorage.removeItem(name);
          } else if (window.utools) {
            utools.onPluginReady(() => {
              utools.db.remove(name);
            })
          }
        }

        // 热链接的使用
        function hotlinkload(type) {
          var hotlist = localGet('hotlink', 'list', null, '^');
          if (hotlist) {
            linklist = hotlist;
            if (type === 'use') {
              let ourlUl = toGet('urlUl', 'classname');
              showCustomize(hotlist, 'use', ourlUl);
            } else {
              let onew = toGet('newAddUrl', 'id');
              showCustomize(hotlist, 'url', onew);
            }
          }

        }
        // 热链接函数
        var tOutlink = null;
        var oaddUrl = toGet('addUrl', 'classname');
        var oaddBtn = toGet('addCollectUrlBtn', 'classname');
        oaddBtn.onclick = function() {
          oaddUrl.classList.toggle("active");
          oaddUrl.getElementsByClassName("urlLink")[0].focus();
          oaddBtn.classList.toggle("active");
          toGet('newAddUrl', 'id').classList.toggle("active");
          clearTimeout(tOutlink);
        }

        var ocertainBtn = toGet('certainBtn', 'classname');
        ocertainBtn.onclick = function() {
          var oname = toGet('urlName', 'classname');
          var ourl = toGet('urlLink', 'classname');
          var ospan = oaddUrl.getElementsByClassName('tips')[0];
          if (/^[\u4E00-\u9FA5A-Za-z0-9_-\|]+$/.test(oname.value) && /^[http|https]+:\/\/[\S]+/.test(ourl.value)) {
            var temp = 'onclick = toLink("' + ourl.value + '")>';
            var str = "<b  class='link'><span " + temp + oname.value + "</span></b>";
            var list = [];
            var val = localGet('hotlink', 'list', null, '^');
            if (val) {
              val.push(str);
              list = val;
              localSave('hotlink', val.join("^"));
            } else {
              localSave('hotlink', str);
              list[0] = str;
            }
            let onew = toGet('newAddUrl', 'id');
            showCustomize(list, 'url', onew);
            linklist = list;
            ospan.innerText = "(添加成功)";
            oname.value = "";
            ourl.value = "";
          } else {
            ospan.innerText = "(数据错误，添加失败)";
          }
          tOutlink = setTimeout(function() {
            ospan.innerText = "(提示区)";
          }, 2000);
        }

        var oinoutWrapper = toGet('inoutWrapper', 'classname');
        var oopenInoutBtn = toGet('openInoutBtn', 'classname');
        oopenInoutBtn.onclick = openInoutWrite;

        function openInoutWrite(type) {
          if (type === 'open') {
            oinoutWrapper.classList.add('active');
            oopenInoutBtn.innerText = '隐';
          } else {
            if (oopenInoutBtn.innerText === '显') {
              oinoutWrapper.classList.add('active');
              oopenInoutBtn.innerText = '隐';
            } else {
              oopenInoutBtn.innerText = '显';
              oinoutWrapper.classList.remove('active');
            }
          }
        }
        var oinoutControl = toGet('inoutControl', 'classname');
        oinoutControl.onclick = function(e) {
          var event = e || window.event;
          var ele = event.target || event.srcElement;
          if (ele.tagName === 'SPAN') {
            var index = ele.getAttribute('data-index');
            var oinputs = oinoutControl.querySelectorAll('input');
            let temp = writeBoxForCopy.value;
            if (index === '0') {
              let changeTxt = selectTxt(writeBoxForCopy)?selectTxt(writeBoxForCopy):temp;
              let ttt = oinputs[1].value;
              if(oinputs[0].value.trim()){
                var tt = new RegExp(oinputs[0].value, 'g');
              }
              if(/^@[ZZ|Zz|zz]+/.test(ttt)){
                let val = /\b([\w]+)\b/gm;
                changeTxt = changToFun(changeTxt, ttt, val);
                function changToFun(temmp, ttt, val){
                  if(/^@ZZ/.test(ttt)){
                    temmp = temmp.replace(val, function(l){
                      return l.toUpperCase();
                    });
                  }else if(/^@Zz/.test(ttt)){
                    temmp = temmp.replace(val, function(m){
                      return m.substring(0,1).toUpperCase()+m.substring(1).toLowerCase();
                    });
                  }else if(/^@zz/.test(ttt)){
                    temmp = temmp.replace(val, function(n){
                      return n.toLowerCase();
                    });
                  }
                  return temmp;
                }
                
              }else{
                changeTxt = changeTxt.replace(tt, ttt);
              }
              if(selectTxt(writeBoxForCopy)){
                let begin = writeBoxForCopy.selectionStart;
                let ttemp = temp.substring(begin);
                ttemp = ttemp.replace(selectTxt(writeBoxForCopy), changeTxt);
                temp = temp.substring(0, begin) + ttemp;
              }else{
                temp = changeTxt;
              }
              writeBoxForCopy.value = temp;
            } else if (index === '1') {
              let templist = temp.split('\n');
              for (let vv = 0; vv < templist.length; vv++) {
                if (/http/.test(templist[vv])) {
                  templist[vv] = linkSolved(templist[vv], 'mdtoLink');
                }
              }
              temp = templist.join('\n');
              writeBoxForCopy.value = temp;
            } else if (index === '2') {
              writeBoxForCopy.value = '';
              oinputs[0].value = '';
              oinputs[1].value = '';
            }
          }
        }

        function selectTxt(obj){
          var staIndex = obj.selectionStart;
          var endIndex = obj.selectionEnd;
          if (/input|textarea/i.test(obj.tagName) && /firefox/i.test(navigator.userAgent)) {
            //Firefox在文本框内选择文字 
            if (staIndex != endIndex) {
              var sText = obj.value.substring(staIndex, endIndex);
              return sText;
            }else{
              return false;
            }
          } else {
            //获取选中文字 
            var sText = document.selection == undefined ? document.getSelection().toString() : document.selection.createRange().text;
            return sText; // 可能为""
          }
        }
        
        function showCustomize(list, type, obj) {
          let allStr = "";
          let temp = '';
          // 链接互用部分
          if (type === 'tag' && oldhtml) {
            allStr = oldhtml;
          }
          for (let i = 0; i < list.length; i++) {
            if (type === 'use') {
              temp = '<li>' + i + ' ' + list[i] + '</li>';
            } else if (type === 'url') {
              temp = list[i].replace("</b>", "<i data-index='" + i + "' onclick='delectOne(this)'>-</i></b>");
            } else if (type === 'tag') {
              let tmpval = list[i];
              if (tmpval.indexOf('|') !== -1) {
                let x = tmpval.indexOf('|');
                tmpval = tmpval.slice(x + 1).trim();
              }
              temp = '<b class="tag"><span>' + tmpval + '</span><i data-index="' + i +
                '" onclick="delectOne(this)">-</i></b>';
            }
            allStr += temp;
          }
          obj.innerHTML = allStr;
        }

        function delectOne(e) {
          event.preventDefault();
          let type = e.parentElement.className;
          let index = e.getAttribute("data-index");
          if (type === 'link') {
            linklist.splice(index, 1);
            let onew = toGet('newAddUrl', 'id');
            showCustomize(linklist, 'url', onew);
            localSave('hotlink', linklist.join("^"));
          } else if (type === 'tag') {
            taglist.splice(index, 1);
            localSave('taglist', taglist, 'object');
            showCustomize(taglist, 'tag', otagstatus);
          }

        }

        const odotype = toGet('odotype', 'classname');
        const obetterway = toGet('obetterway', 'classname');
        const otaskMentionNum = toGet('taskMentionNum', 'classname');
        var ocountdowncon = toGet('countdownconTxt', 'classname');
        function userdefinedfun(type = 'ok') {
          var ouserDefined = localGet('userDefined', 'object');
          var oisPlayAudio = toGet('isPlayAudio', 'classname');
          if (ouserDefined) {
            userDefined = ouserDefined;
            var tempdiffval = Math.round(userDefined['difficult'] * 100);
            if (userDefined['doType']) {
              odotype.innerText = userDefined['doType'];
              littleset('newset', null, 'doType');
            } else {
              odotype.innerText = '……默认项……';
            }
            if (userDefined['betterWay']) {
              obetterway.innerText = userDefined['betterWay'];
              littleset('newset', null, 'betterWay');
            } else {
              obetterway.innerText = '……默认项……';
            }
            if (userDefined['countdown']) {
              countdownTxt = userDefined['countdown'];
              ocountdowncon.innerText = countdownTxt;
              countdownFun(countdownTxt);
            } else {
              countdownTxt = '';
              ocountdownTxt.innerText = '';
              ocountdownTxt.classList.add('unshow');
              ocountdowncon.innerText = '（暂无）';
            }

            if (userDefined['restTime']) {
              var tempRestTime = userDefined['restTime'];
            } else {
              var tempRestTime = 300;
            }
            if (type === 'ok') {
              stopRunning('stop');
            }
            let wrongtxt = '';
            if (userDefined['levela'] < userDefined['levelb']) {
              wrongtxt = '(无效)';
            }
            let definedInputs = document.querySelectorAll('.firstCon input');
            definedInputs[0].setAttribute('placeholder', '原始值：' + tempRestTime + '（单位秒）');
            definedInputs[1].setAttribute('placeholder', '原始值：' + userDefined['tasknum']);
            definedInputs[2].setAttribute('placeholder', '原始值：' + tempdiffval + ' (即' + tempdiffval + '%)');
            definedInputs[3].setAttribute('placeholder', '原始值：' + userDefined['levela']);
            definedInputs[4].setAttribute('placeholder', '原始值：' + userDefined['levelb'] + wrongtxt);
            definedInputs[5].setAttribute('placeholder', '原始值：' + userDefined['taskMentionTime'] + '（单位天）');
            otaskMentionNum.innerText = userDefined['taskMentionTime'];
            var num = userDefined['themeMode'];
            if (num >= 0) {
              var othemechooses = toGet('themechoose', 'classname', true);
              othemechooses[num].checked = true;
              chooseTheme(num);
            }
            var index = userDefined['searchWeb'];
            if (index >= 0) {
              searchListIndex = index;
              osearchModes[index].checked = true;
            }
            var odeletechoose = toGet('deletechoose', 'classname');
            var ooutputchoose = toGet('outputchoose', 'classname');
            var ounshowNonechoose = toGet('unshowNonechoose', 'classname');
            var orecordchoose = toGet('recordchoose', 'classname');
            recordChoseStr = localGet('searchData', 'string') ? localGet('searchData', 'string') : '';

            if (!window.utools) {
              var oaudiochoose = toGet('audiochoose', 'classname');
              oisPlayAudio.style.display = 'block';
              toggleFun('audioChose', 1, oaudiochoose);
            }

            toggleFun('deleteChose', 1, odeletechoose);
            toggleFun('outputChose', 'simple', ooutputchoose);
            toggleFun('unshowNoneChose', 1, ounshowNonechoose);
            toggleFun('recordSearchChose', 1, orecordchoose);


            function toggleFun(name, isval, obj) {
              if (userDefined[name] === isval) {
                obj.setAttribute('data-txt', '关闭');
                obj.classList.add('active');
              } else {
                obj.setAttribute('data-txt', '开启');
                obj.classList.remove('active');
              }
            }

          } else {
            userDefined = {
              'levela': 80,
              'levelb': 65,
              'tasknum': 10,
              'difficult': 0.3,
              'themeMode': 0,
              'searchWeb': 0,
              'deleteChose': 0,
              'audioChose': 0,
              'unshowNoneChose': 0,
              'recordSearchChose': 0,
              'outputChose': 'all',
              'restTime': 300,
              'doType': '整理*社交*生活*尝试*学习*项目*教学*反三',
              'betterWay': '实践试错*提问搜索*视频-模块化*实战模仿*导图-联想分类*讨论*故事',
              'taskMentionTime': 3,
              'tolinkrefer': 0
            }; //可用户自定义的数据
            if (!window.utools) {
              oisPlayAudio.style.display = 'block';
            }
          }
        }

        var omoremenubtn = toGet('moremenubtn', 'classname');
        omoremenubtn.onclick = function() {
          let old = this.getAttribute('data-status');
          if (old === '0') {
            this.setAttribute('data-status', '1');
            omenu.classList.add('more');
            this.classList.add('active');
          } else {
            this.setAttribute('data-status', '0');
            omenu.classList.remove('more');
            this.classList.remove('active');
          }
        }

        var otoshowmenu = toGet('toshowmenu', 'classname');
        otoshowmenu.onclick = function() {
          let old = this.getAttribute('data-status');
          if (old === '0') {
            this.setAttribute('data-status', '1');
            oasidemenu.classList.add('show');
            this.innerText = '<<';
          } else {
            this.setAttribute('data-status', '0');
            oasidemenu.classList.remove('show');
            this.innerText = '>>';
          }
        }
        var otoRightFixbtn = toGet('toRightFixbtn', 'classname');
        otoRightFixbtn.onclick = function() {
          let old = this.getAttribute('data-aside');
          if (old === '0') { // 开启
            this.setAttribute('data-aside', '1');
            omain.classList.remove('active');
            aside.classList.add('fixed');
            aside.style.display = 'block';
            this.classList.add('active');
            this.innerText = '>';
          } else {
            this.setAttribute('data-aside', '0');
            omain.classList.add('active');
            aside.classList.remove('fixed');
            aside.style.display = 'none';
            this.classList.remove('active');
            this.innerText = '<';
          }
        }
        // 坏心情的记录
        function badmoonRec(badmoonstr) {
          var ohandstar = toGet('handstand-heart', 'classname');
          var nowmoon = false;
          if (badmoonstr) { // 有存储的数据 判断今天有没有标记
            if (badmoonstr.indexOf(today) !== -1) {
              ohandstar.classList.add('active');
              nowmoon = true;
            }
            badmoonlist = badmoonstr.split('^');
            if (badmoonlist.length > 30) {
              badmoonlist = badmoonlist.slice(-30);
              localSave('badmoon', badmoonlist.join('^'));
            }
          }
          ohandstar.onclick = function() {
            getTime();
            // 存日期 
            if (!nowmoon) {
              ohandstar.classList.add('active');
              if (badmoonlist) {
                badmoonlist[badmoonlist.length] = today;
              } else {
                badmoonlist[0] = today;
              }
              badmoonstr = badmoonlist.join('^');
              localSave('badmoon', badmoonstr);
              checkSummary();
            }
          }
        }
      </script>
    <script>
        const otagstatus = toGet('tagstatus', 'classname');
        let oldhtml = otagstatus.innerHTML;
        var sortBoxStr = '';
        var beforeData = {
          sortList: [],
          tmpRecycle: [],
          tmpReference: [],
          tmpMaylist: [],
          tmpProject: [],
          tmpWaitlist: [],
          tmpDaylist: [],
          tmpDolist: [],
          checkList: [],
          summaryList: []
        }
        var finishList = [];
        var solveUl = null; // 添加数据时，表示当前选中的列表
        var nowlistStr = "";
        var dechangeIdlId = -1;
        var omemory = {};
        var memorylist = [];
        var datacollectbox = ['【添加】①点击右侧的加号添加；②在主界面中选中收集类目再添加；③在简版页显示框导入数据', '【编辑】和主编辑页不同，这里单击就可以编辑（关闭该小窗口时会自动保存）',
          '【删除】虽然不计入进度数目统计中，但删除会移到回收箱', '【处理】点击每项左侧的圆圈选中单项或多项，再配合右边选择的清单，点击分类按钮快速分配入对应清单'
        ];
        var regexDate = /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/;
        var regexOnlyDate = /^([0-9]{4})\/(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])$/;
        var regexDateOnly = /^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/;
        var refresh = toGet('tmpRefresh', 'classname');
        var recycle = toGet('tmpRecycle', 'classname');
        var reference = toGet('tmpReference', 'classname');
        var maylist = toGet('tmpMaylist', 'classname');
        var project = toGet('tmpProject', 'classname');
        var waitlist = toGet('tmpWaitlist', 'classname');
        var daylist = toGet('tmpDaylist', 'classname');
        var dolist = toGet('tmpDolist', 'classname');
        var thingsNums = toGet('thingsNum', 'classname', true);
        var places = document.querySelectorAll(".analyzeCon .detail");

        // 数据更新
        // 添加式库collectBox($分隔符，)  覆盖式库collectBoxNew
        // notFirstSave collectIndex solvedAll  分类库collectSortBox（先~后$划分）
        var datalist = ["tmpDolist", "tmpDaylist", "tmpWaitlist", "tmpProject", "tmpMaylist", "tmpReference",
          "tmpRecycle"
        ];

        function strToList(str) {
          if (str) {
            var sortBoxArr = str.split("~");
            for (let b = 0; b < sortBoxArr.length; b++) {
              let key = datalist[b];
              if (/\$+/.test(sortBoxArr[b])) {
                let arr = sortBoxArr[b].split("$");
                // arr.shift();
                beforeData[key] = arr;
              } else if (sortBoxArr[b].trim()) {
                beforeData[key][0] = sortBoxArr[b];
              }
            }

            let s0 = localGet('checklist', 'object');
            if (s0) {
              beforeData.checkList = s0;
            }
            let s1 = localGet('summarylist', 'object');
            if (s1) {
              beforeData.summaryList = s1;
            }
            let s2 = localGet('finishlist', 'object');
            if (s2) {
              finishList = s2;
            }
            origin();
            // console.log(beforeData.sortList);
          } else {
            console.log("内存中暂时没有数据");
          }
        }

        var oitemnumBtns = toGet('itemnumBtn', 'classname', true);
        var oitemsignBtn = toGet('itemsignBtn', 'classname');
        var oitemsign = toGet('itemsign', 'classname'); // 输入框
        var oitemAllPeriod = toGet('itemAllPeriod', 'classname');

        var oitemselect = toGet('itemselect', 'classname');
        var oremarkstxt = toGet('remarkstxt', 'classname');
        var osignTxt = toGet('signTxt', 'classname');
        var oitemNameTxt = toGet('itemNameTxt', 'classname');
        var oitemsection = toGet('itemsection', 'classname');
        // 项目管理 打开与关闭
        function itemOpen(itemid = '') {
          existItem = localGet('existItem', 'object')?localGet('existItem', 'object'):['模板'];
          let options = existItem.map((x) => '<option value="' + x + '">' + x + '</option>');
          oitemselect.innerHTML = options;
          oitemsign.value = '';
          itemid = itemid || oitemselect.value;
          oitemselect.value = itemid;
          oitemselect.setAttribute('data-id', itemid);
          refreshItemData();
        }

        function itemClose() {
          let itemid = oitemselect.value;
          if (itemObj[itemid]) {
            itemObj[itemid][2] = oremarkstxt.innerText;
            localSave('itemObj', itemObj, 'object');
          }
        }
        
        oitemselect.onclick = function() {
          let oldid = oitemselect.getAttribute('data-id');
          if (oldid !== oitemselect.value) {
            oitemnumBtns[0].className = 'itemnumBtn';
          }else{
            oitemnumBtns[0].className = 'itemnumBtn unactive';
          } 
        }
        
        oitemnumBtns[0].onclick = toggleItem;
        oitemnumBtns[1].onclick = toggleItem;
        oitemnumBtns[2].onclick = function(){ // 归档: 项目完成并移除  编号另分filedlist  数据不再更新
          if(!this.classList.contains('unactive')){
            var itemid = oitemselect.value;
            var olis = project.querySelectorAll('li');
            for(let t = 0; t < olis.length; t++){
              let sign = olis[t].getAttribute('data-sign');
              if(sign === itemid){
                if(itemObj[sign]){
                  itemObj[sign][3] = '(归档于'+ today +')';
                  itemObj[sign][2] = oremarkstxt.innerText;
                  oitemNameTxt.innerText = itemObj[sign][0] +' '+ itemObj[sign][3];
                }
                project.removeChild(olis[t]);
                beforeData['tmpProject'].splice(t, 1);
                saveData();
                break;
              }
            }
            oitemsection.classList.add('over');
            filedlist = localGet('filedlist', 'object')?localGet('filedlist', 'object'):[];
            filedlist.push(itemid);
            localSave('filedlist', filedlist, 'object');
            localSave('itemObj', itemObj, 'object');
          }
        }
        
        oitemnumBtns[3].onclick = function(){
          if(!this.classList.contains('unactive')){
            let val = '@@' + oitemselect.value;
            toMainSquare(1);
            tosearchtag(val);
          }
        }
        
        function toggleItem() {
          var model = this.innerText;
          let oldid = oitemselect.getAttribute('data-id');
          var itemid = oitemselect.value;
          if(oldid !== '模板'){
            itemObj[oldid][2] = oremarkstxt.innerText;
            localSave('itemObj', itemObj, 'object');
          }
          
          if (model === '刷新' && oldid !== '模板') { // 当前不是模板时刷新数据
            refreshItemData();
          } else if (model === '切换项目' && oldid !== itemid) {  // 当前项目和所选项目不一致时执行切换
            oitemsign.value = '';
            oitemselect.setAttribute('data-id', itemid);
            oitemnumBtns[0].className = 'itemnumBtn unactive';
            oitemnumBtns[2].className = 'itemnumBtn unactive';
            oitemsection.classList.remove('over');
            if(itemid === '模板'){
              oitemnumBtns[3].className = 'itemnumBtn unactive';
              oitemNameTxt.innerText = '帮助&介绍';
              oremarkstxt.innerText = '( 项目相关内容：时间段 备注 注意事项等 )';
              osignTxt.innerHTML = '<span>模板标志</span>';
              oitemAllPeriod.innerHTML =  periodHTML;
              let progressback = oitemAllPeriod.querySelector('.itemprogressback');
              progressback.style.width = Math.round(6 / 15 * 100) + '%';
              progressback.querySelector('mark').innerText = Math.round(6 / 15 * 100) + '%';
              
            }else{
              oitemnumBtns[3].className = 'itemnumBtn';
              itemChoseFun();
            }
          }
        }
        
        function itemChoseFun() { // 切换项目/刷新
          // 切换前要保存备注
          var itemid = oitemselect.value;
          var spans = '';
          oitemAllPeriod.innerHTML = '';
          var list = itemObj[itemid] ? itemObj[itemid] : null;
          if (list) {
            var title = list[0] ? list[0] : itemid;
            var tip = list[2] ? list[2] : '备注：';
            var signobj = list[1];
            oremarkstxt.innerText = tip;
            if(filedlist.indexOf(itemid) !== -1){
              oitemsection.classList.add('over');
              oitemNameTxt.innerText = title + ' '+ list[3];
            }else{
              oitemsection.classList.remove('over');
              oitemNameTxt.innerText = title;
            }
            var num = 0;
            var isOk = true;
            itemsignNum = {};
            if (signobj) {
              for (let sign in signobj) {
                spans = spans + '<span>' + sign + '</span>';
                itemsignNum[sign] = num;
                num++;
                // sign为标志 name为阶段名 objdata有3个属性
                let name = signobj[sign][0];
                let objdata = signobj[sign][1];
                let [operiod, isfinish] = itemBuild(sign, objdata, name);
                isOk = isOk && isfinish;
                oitemAllPeriod.appendChild(operiod);
              }
              osignTxt.innerHTML = spans;
              if(isOk){
                oitemnumBtns[2].className = 'itemnumBtn';
              }else{
                oitemnumBtns[2].className = 'itemnumBtn unactive';
              }
            }

          }else{
            oitemnumBtns[3].className = 'itemnumBtn unactive';
          }
        }
        
        oitemsignBtn.onclick = createPeriod;
        function createPeriod() {
          var val = oitemsign.value;
          var itemid = oitemselect.value; //编号
          // 阶段内容生成
          if (val && val.indexOf('|') !== -1 && itemObj[itemid]) {
            var index = val.indexOf('|');
            var name = val.slice(0, index) ? val.slice(0, index) : '某阶段';
            var sign = val.slice(index + 1);
            var obj = itemObj[itemid][1]; // 阶段标志对象
            if (obj[sign]) {
              // 如果标志已存在，则改名
              var operiodNames = toGet('periodName', 'classname', true);
              let namenum = itemsignNum[sign]?itemsignNum[sign]:null;
              if(!namenum){
                var ops = osignTxt.querySelectorAll('span');
                for(let t = 0; t < ops.length; t++){
                  if(ops[t].innerText === sign){
                    namenum = t;
                    break;
                  }
                }
              }
              operiodNames[namenum].innerText = name + '(@'+sign+')';
              oitemsign.value = '(更名成功)';
            } else {
              oitemnumBtns[2].className = 'itemnumBtn unactive';
              var ospan = document.createElement('span');
              ospan.innerText = sign;

              obj[sign] = ['阶段名', {}, '创建日期'];
              obj[sign][2] = today;
              let objdata = signToItem(sign, itemid);
              obj[sign][1] = objdata;
              let [operiod] = itemBuild(sign, objdata, name);
              oitemAllPeriod.appendChild(operiod);
              osignTxt.appendChild(ospan);
              oitemsign.value = '(新增成功)';
            }
            obj[sign][0] = name;
            itemObj[itemid][2] = oremarkstxt.innerText; // 备注获取
            localSave('itemObj', itemObj, 'object');
          } else if (!itemObj[itemid]) {
            window.alert('当前编号不存在，这是模板，不可添加【在项目清单中添加一项尾部@编号的事项再试试】');
          }
        }

        function refreshItemData() {
          // 根据编号把事项更新一遍+
          var itemid = oitemselect.value; //编号
          var signobj = itemObj[itemid] ? itemObj[itemid][1] : null;
          if (signobj) {
            oitemnumBtns[3].className = 'itemnumBtn';
            for (let sign in signobj) {
              signobj[sign][1] = signToItem(sign, itemid);
            }
            itemChoseFun();
          }else{
            oitemnumBtns[3].className = 'itemnumBtn unactive';
            oitemsection.classList.remove('over');
            oitemNameTxt.innerText = '帮助&介绍';
            oremarkstxt.innerText = '( 项目相关内容：时间段 备注 注意事项等 )';
            osignTxt.innerHTML = '<span>模板标志</span>';
            oitemAllPeriod.innerHTML = periodHTML;
            let progressback = oitemAllPeriod.querySelector('.itemprogressback');
            progressback.style.width = Math.round(6 / 15 * 100) + '%';
            progressback.querySelector('mark').innerText = Math.round(6 / 15 * 100) + '%';
            oitemnumBtns[2].className = 'itemnumBtn unactive';
          }
        }

        function signToItem(sign, id) {
          // datacollectbox beforeData['tmpDolist'] finishList
          let obj = {
            'plan': [],
            'todo': [],
            'done': []
          };
          let pre = '@' + sign + ' ';
          let rex = new RegExp('^' + pre, 'g');
          let index = sign.length + 2;
          let threelist = beforeData['tmpDolist'].concat(beforeData['tmpDaylist'], beforeData['tmpWaitlist']);
          obj['plan'] = datacollectbox.filter(function(item) {
            if (rex.test(item) || item.indexOf(pre) === 0) {
              return item;
            }
          }).map(item => item.slice(index));
          obj['todo'] = threelist.filter(function(item) {
            if (rex.test(item)|| item.indexOf(pre) === 0) {
              return item;
            }
          }).map(item => item.slice(index));
          
          let signobj = itemObj[id]?itemObj[id][1]:null;
          let signdate = signobj?(signobj[sign]?signobj[sign][2]:null):null;
          let lastDelFinishDate = localGet('lastDelFinishDate', 'object')?localGet('lastDelFinishDate', 'object'):[];
          let lastkeep = [];
          for(let m = 0; m < lastDelFinishDate.length; m++){
            if(signdate <= lastDelFinishDate[m]){
              // 得用之前存的含标志数据
              var oldfinishItem = localGet('oldfinishItem', 'object')?localGet('oldfinishItem', 'object'):[];
              
              if(oldfinishItem[m] && oldfinishItem[m][sign]){
                lastkeep = lastkeep.concat(oldfinishItem[m][sign]);
              }
            }
          }
          
          // 2022/02/10 (执)
          let nowfinish = finishList.filter(function(item) {
            let value = item.slice(15);
            if (rex.test(value)|| value.indexOf(pre) === 0) {
              return item;
            }
          }).map(item => item.slice(0, 11) + ' ' + item.slice(index + 15));
          obj['done'] = lastkeep.concat(nowfinish);
          
          // console.log(obj['plan'], obj['todo'], obj['done'])
          return obj;
        }

        function itemBuild(sign, objdata, name) {
          var odiv = document.createElement('div');
          odiv.className = 'itemPeriod';
          odiv.setAttribute('data-sign', sign);
          var datali = ['', '', ''];
          var li0 = objdata['plan'];
          var li1 = objdata['todo'];
          var li2 = objdata['done'];
          var isfinish = false;
          if (li0.length > 0) {
            datali[0] = li0.map((item) => '<li>' + item + '</li>').join('');
          }
          if (li1.length > 0) {
            datali[1] = li1.map((item) => '<li><span class="cbox"></span><b class="item">' + item + '</b></li>').join(
              '');
          }
          if (li2.length > 0) {
            datali[2] = li2.map((item) => '<li><span class="cbox"></span><b class="item">' + item + '</b></li>').join(
              '');
          }
          var template =
            '<div class="itemStatus" data-show="1" onclick="showWrapper(this)"><div class="itemprogressback"><mark></mark></div><span>></span><div class="periodName">' +
            name + '(@' + sign + ')</div><div class="periodCount">计划(<b>' +
            li0.length + '</b>) 进行(<b>' +
            li1.length + '</b>) 完成(<b>' +
            li2.length +
            '</b>)</div></div><div class="itemCon-wrapper"><div><p>计划中-收集箱：<span class="itemAddBtn" onclick="writeLayer(\'itemadd\', \'' +
            sign + '\')">+</span></p>' +
            '<ul class="itemplanUl">' + datali[0] +
            '</ul></div><div><p>进行中-清单项(可一步搞定的)：</p>' +
            '<ul class="detail itemtodoUl">' + datali[1] +
            '</ul><ul class="detail itemdoneUl">' + datali[2] +
            '</ul></div></div>';
          odiv.innerHTML = template;
          let alllength = li0.length + li1.length + li2.length;
          let percent = alllength ? Math.round(li2.length / alllength * 100) + '%':'0%';
          odiv.querySelector('.itemprogressback').style.width = percent;
          if(percent !== '0%'){
            if(percent === '100%'){
              isfinish = true;
              odiv.querySelector('mark').innerText = '';
              odiv.querySelector('mark').className = 'hidden';
              odiv.querySelector('.itemprogressback').className = 'itemprogressback finish';
            }else{
              odiv.querySelector('mark').innerText = percent;
              odiv.querySelector('mark').className = '';
            }
          }else{
            odiv.querySelector('mark').className = 'hidden';
          }
          return [odiv, isfinish];
        }
        var oitemsignDelBtn = toGet('itemsignDelBtn', 'classname');
        oitemsignDelBtn.onclick = function() {
          var itemid = oitemselect.value; //编号
          var obj = itemObj[itemid] ? itemObj[itemid][1] : null;
          if (!obj) {
            window.alert('当前编号不存在，这是模板，不可删除【在项目清单中添加一项尾部@编号的事项再试试】');
          } else {
            var val = window.prompt('请输入删除的标志');
            if (obj[val]) {
              delete obj[val];
              localSave('itemObj', itemObj, 'object');
              // html处理
              let namenum = itemsignNum[val]?itemsignNum[val]:null;
              var ops = osignTxt.querySelectorAll('span');
              var oitemPeriods = oitemAllPeriod.querySelectorAll('.itemPeriod');
              if(!namenum){
                for(let t = 0; t < ops.length; t++){
                  if(ops[t].innerText === val){
                    namenum = t;
                    break;
                  }
                }
              }
              osignTxt.removeChild(ops[namenum]);
              oitemAllPeriod.removeChild(oitemPeriods[namenum]);
            }
          }

        }
        var oitemsmallBtn = toGet('itemsmallBtn', 'classname');
        oitemsmallBtn.onclick = function() {
          var otitles = oitemAllPeriod.querySelectorAll('.itemStatus');
          var owrappers = oitemAllPeriod.querySelectorAll('.itemCon-wrapper');
          for (let i = 0; i < otitles.length; i++) {
            owrappers[i].classList.add('hidden');
            otitles[i].setAttribute('data-show', '0');
            otitles[i].querySelector('span').classList.add('unshow');
          }
        }

        function showWrapper(ele) {
          var oitemPeriod = ele.parentElement;
          var owrapper = oitemPeriod.querySelector('.itemCon-wrapper');
          if (ele.getAttribute('data-show') === '1') {
            owrapper.classList.add('hidden');
            ele.setAttribute('data-show', '0');
            ele.querySelector('span').classList.add('unshow');
          } else {
            owrapper.className = 'itemCon-wrapper';
            ele.setAttribute('data-show', '1');
            ele.querySelector('span').classList.remove('unshow');
          }
        }
        // 初始化数据
        function origin() {
          let originS2 = localGet('allDayNum', 'object');
          if (originS2) {
            alldayNumObj = originS2;
            if (today in alldayNumObj) { // 有今日完成事件数量时才取值
              thatdayNum = alldayNumObj[today];
            }
          } else {
            alldayNumObj[today] = thatdayNum;
            localSave('allDayNum', alldayNumObj, 'object');
          }

          let originS3 = localGet('collect', 'object');
          if (originS3) {
            datacollectbox = originS3;
          } else {
            localSave('collect', datacollectbox, 'object');
          }
          datacollectshow(datacollectbox, ocollectUl);

          let originS4 = localGet('taglist', 'object');
          if (originS4) {
            taglist = originS4;
            showCustomize(taglist, 'tag', otagstatus);
          }


          datasolve(beforeData.tmpDolist, dolist);
          var num0 = beforeData.tmpDolist.length;
          thingsNums[0].innerText = num0;

          datasolve(beforeData.tmpDaylist, daylist);
          var num1 = beforeData.tmpDaylist.length;
          thingsNums[1].innerText = num1;
          outOfTime();

          datasolve(beforeData.tmpWaitlist, waitlist);
          var num2 = beforeData.tmpWaitlist.length;
          thingsNums[2].innerText = num2;

          datashow(beforeData.tmpProject, project);
          datashow(beforeData.tmpMaylist, maylist);
          datashow(beforeData.tmpReference, reference);

          datasimpleshow(beforeData.tmpRecycle, recycle);
          datasimpleshow(beforeData.checkList, places[0]);
          datasimpleshow(finishList, places[1], "simple");
          datasimpleshow(beforeData.summaryList, places[2]);
          // sortIt(); // 日期升序
          changeFinishProgress(num0, num1);
        }


        function refreshfun(index) { // 判断开启否,更新刷新任务内容
          var {
            year,
            month,
            date,
            week
          } = getTime();
          // refreshlist 取数据或初始化->遍历 判断显示内容的逻辑
          var orefreshlist = localGet('refreshlist', 'object');
          var obtns = document.querySelectorAll('.firstCon .refreshbtn');
          var write = toGet('write', 'classname');
          var writebox = write.getElementsByClassName("writebox")[0];
          var hasval = false;
          var orefreshpart = toGet('refreshpart', 'classname');
          var statetxts = document.querySelectorAll('.refreshpart i');
          var refreshUls = document.querySelectorAll('.refreshUl');
          var pieces = orefreshpart.getElementsByClassName('piece');
          var titles = orefreshpart.getElementsByClassName('title');
          // debugger
          delRefresh = localGet('delRefresh', 'object');
          if (orefreshlist) {
            refreshlist = orefreshlist;
            for (let u = 0; u < 3; u++) {
              if (refreshlist[u] && refreshlist[u].trim()) { // 有内容
                if (refreshlist[3] && refreshlist[3][u]) {
                  var key = u + '';
                  obtns[u].innerText = '√ ' + obtns[u].getAttribute('data-txt');
                  statetxts[u].innerText = ' (已开启)';
                  norefreshnote = false;
                  pieces[u].classList.remove('unstart');
                  titles[u].classList.remove('unstart');
                  refreshObj[key] = refreshlist[u].trim();
                  refreshToLi(refreshUls[u], 'start', refreshlist[u], u);
                } else {
                  obtns[u].innerText = obtns[u].getAttribute('data-txt');
                  statetxts[u].innerText = ' (未开启)';
                  pieces[u].classList.add('unstart');
                  titles[u].classList.add('unstart');
                  refreshToLi(refreshUls[u], 'unstart', refreshlist[u], u);
                }

              }
              if (index && (index - 4) === u) {
                if (refreshlist[3] && refreshlist[3][u]) {
                  odorefreshtask.innerText = '关闭任务';
                } else {
                  odorefreshtask.innerText = '开启任务';
                }
                if (refreshlist[u] && refreshlist[u].trim()) {
                  writebox.value = refreshlist[u].trim();
                } else {
                  writebox.value = '';
                }
                writeboxTips.innerText = '( 已显示所有日/周/月刷新任务数据，可覆盖修改，没内容是无法开启任务的 )';
              }

            }
            // index = null;
          } else {
            refreshlist[3] = [false, false, false];
          }

          function refreshToLi(obj, type, str, index) {
            var finalstr = '';
            var list = str.split('*');
            var front = '';
            for (let i = 0; i < list.length; i++) {
              if (type === 'unstart') {
                finalstr += '<li class="unstart">' + list[i] + '</li>';
              } else if (type === 'start') {
                let val = list[i].trim().replace(/\n/g, '');
                if (index === 0) {
                  front = date + '';
                } else if (index === 1) {
                  front = date - week + 1 + '';
                } else if (index === 2) {
                  front = month + '';
                }
                if (/toLink/.test(val)) {
                  let div = document.createElement('div');
                  div.innerHTML = val;
                  val = div.innerText;
                }
                if (delRefresh[index] && delRefresh[index][front]) {
                  let temp = delRefresh[index][front];
                  let moreval1 = '】' + val;
                  let moreval2 = '】' + val + '^';
                  if (temp.indexOf(moreval1) !== -1 || temp.indexOf(moreval2) !== -1) {
                    // 潘丹值是否在delRefresh里
                    finalstr += '<li class="finish">' + list[i] + '</li>';
                  } else {
                    finalstr += '<li>' + list[i] + '</li>';
                  }
                } else {
                  finalstr += '<li>' + list[i] + '</li>';
                }
              }
            }

            obj.innerHTML = finalstr;
          }
        }

        function refreshDetailFun() {
          // 把 refreshObj的项进行处理， 配合delRefresh,再放进 tmpRefresh 里。
          var {
            year,
            month,
            date,
            week
          } = getTime();
          var daylist = [];
          var weeklist = [];
          var monthlist = [];
          var temp = [];
          var str = '';
          var refresh = toGet('tmpRefresh', 'classname');
          delRefresh = localGet('delRefresh', 'object') || [];
          if (refreshObj['0']) {
            daylist = refreshObj['0'].split('*');
            daylist = changeToli(daylist, '【日】');
            temp = temp.concat(daylist);
            str = date + '';
            temp = exceptDel(0, temp, str);
          }
          if (refreshObj['1']) {
            weeklist = refreshObj['1'].split('*');
            weeklist = changeToli(weeklist, '【周】');
            temp = temp.concat(weeklist);
            str = date - week + 1 + '';
            temp = exceptDel(1, temp, str);
          }
          if (refreshObj['2']) {
            monthlist = refreshObj['2'].split('*');
            monthlist = changeToli(monthlist, '【月】');
            temp = temp.concat(monthlist);
            str = month + '';
            temp = exceptDel(2, temp, str);
          }

          function changeToli(list, txt) {
            for (var i = 0; i < list.length; i++) {
              list[i] = txt + list[i].trim();
            }
            return list;
          }
          tmpRefresh = temp;

          let listr = '';
          for (let a = 0; a < temp.length; a++) {
            listr = listr + '<li data-id="' + a + '"><b>' + temp[a] +
              '</b><div class="smallcontrol"><span class="deletebtn line" onclick="refreshFinish(event)">ok</span></div></li>';
          }
          refresh.innerHTML = listr;
        }
        // 存数据 collectSortBox checklist finishlist summarylist


        function exceptDel(index, list, front) {
          // index 分日周月， list当前激活的数组，front删除记录前缀
          var valstr = ''; // 当天完成项
          var templist = [];
          if (delRefresh[index]) {
            for (var key in delRefresh[index]) {
              // 举例：遍历日/周/月的每个删除记录
              if (key === front) { // 今天拥有ok记录
                valstr = delRefresh[index][key];
              }
            }
          }
          if (valstr) {
            for (var i = 0; i < list.length; i++) {
              // 需要解决 删除数据中是找不到含链接的
              let trueVal = '';
              if (/(toLink)+/.test(list[i])) {
                let temp = document.createElement('li');
                temp.innerHTML = list[i];
                trueVal = temp.innerText;
                if (valstr.indexOf(trueVal) === -1) {
                  templist.push(list[i]);
                }
                continue;
              }
              if (valstr.indexOf(list[i]) === -1) {
                templist.push(list[i]);
              }
            }
          } else {
            templist = list;
          }
          return templist;
        }

        function regularFun(val, date, d) { //存入并展示（日期和事项）
          var oregular = localGet('regularObj', 'object');
          var isnew = false; // 
          let tmp = val.slice(0, -11); // 只取内容，去掉空格和日期
          if (oregular) {
            regularObj = oregular;
            var tmpdatestr = regularObj['datestr'];
            // console.log(date, regularObj['datestr']);
            if (tmpdatestr && tmpdatestr.indexOf(date) !== -1) { // 日期存在里面
              let oldlist = regularObj[date];
              oldlist.push(tmp);
              regularObj[date] = oldlist;
              regularObj[date][0] = true;
            } else {
              isnew = true;
            }
          } else {
            regularObj = {};
            isnew = true;
          }
          if (isnew) { // 没有记录的日期
            if (d < now) {
              regularObj[date] = [false, tmp];
            } else {
              regularObj[date] = [true, tmp];
            }
            if (tmpdatestr) {
              tmpdatestr += '^' + date;
            } else {
              tmpdatestr = '^' + date;
            }
          }
          regularObj['datestr'] = tmpdatestr;
          localSave('regularObj', regularObj, 'object');
          regularDetailFun('newadd');
        }

        var oregularUl = toGet('regularUl', 'classname');
        var oregularUlPass = toGet('regularUlPass', 'classname');
        var opassline = toGet('passline', 'classname');

        function regularDetailFun(type) { //展示（加载时 添加时）
          // 还剩多少天标记  是否提醒 增 删  refreshUls[3]
          if (type !== 'newadd') {
            var oregular = localGet('regularObj', 'object');
            if (oregular) {
              regularObj = oregular;
            } else {
              regularObj = null;
            }
          }
          if (regularObj) {
            let lis = '';
            let lis2 = '';
            let isjump = false;
            //'<li title="' + date + '">' + constr + '</li>'
            for (let date in regularObj) {
              // 还剩多少天标记  是否提醒 
              if (isjump || date !== 'datestr') {
                let list = regularObj[date];
                let leftday = '';
                let ornot = '';
                let outtime = false;
                let canclick = '';
                let gray = false;
                let time = regexDateOnly.exec(date);
                // console.log(time, date);
                let d = Date.UTC(time[1], time[2] - 1, time[3]);
                if (d >= now) { //未过期
                  let left = (d - now) / 86400000;
                  leftday = ' <em class="leftday">剩 ' + left + ' 天</em>';
                } else {
                  outtime = true;
                  canclick = 'disabled';
                }
                if (list[0] && !outtime) {
                  ornot = '关闭/开启该日的事项提醒">关';
                } else {
                  ornot = '开启/关闭该日的事项提醒">开';
                  gray = true;
                }
                let constr = '<div><i>' + date + '</i>' + leftday + '<button class="noticebtn"' + canclick +
                  ' onclick="onTaskMention(event)" title="' + ornot + '</button></div>';
                for (let m = 1; m < list.length; m++) {
                  constr += '<span class="item"><span class="taskitem">' + list[m] +
                    '</span><span class="controlers"><span class="writebtn line" onclick="taskEdit(event)"></span><span class="deletebtn line" onclick="taskDelete(event)">×</span></span></span>';
                }
                if (gray) {
                  if (outtime) {
                    lis2 += '<li class="closed" title="' + date + '">' + constr + '</li>';
                  } else {
                    lis += '<li class="closed" title="' + date + '">' + constr + '</li>';
                  }
                } else {
                  lis += '<li title="' + date + '">' + constr + '</li>';
                }
              } else {
                isjump = true;
              }
            }
            oregularUl.innerHTML = lis;
            oregularUlPass.innerHTML = lis2;
            if (lis2 === '') {
              opassline.classList.add('hidden');
            } else {
              opassline.classList.remove('hidden');
            }
          }

        }
        
        var ocountdownTxt = toGet('countdown', 'classname');
        function countdownFun(val){
          var date = val.slice(-10);
          let time = regexDateOnly.exec(date);
          let dd = Date.UTC(time[1], time[2] - 1, time[3]);
          let num = (dd - now) / 86400000;
          if (num >= 0) {
            ocountdownTxt.className = 'countdown';
            ocountdownTxt.innerText = '距离' + val.slice(0, -10).trim() +'还有'+ num + '天';
          } else {
            ocountdownTxt.innerText = '';
            ocountdownTxt.classList.add('unshow');
          }
        }
        
        function isToNotice() { // 进行提醒日期的统计（改更新会变，日期会变）
          let noticedate = localGet('noticeDates', 'string');
          let num = userDefined['taskMentionTime'];
          if (noticedate) {
            noticeDates = noticedate;
            let d = now + 86400000 * num;
            let list = noticedate.slice(1).split('^'); // 因为每个日期由前面都加^
            for (let m = 0; m < list.length; m++) {
              let time = regexDateOnly.exec(list[m]);
              let dd = Date.UTC(time[1], time[2] - 1, time[3]);
              if (d >= dd && now <= dd) {
                otaskwarn.classList.add('show');
                break;
              } else {
                otaskwarn.classList.remove('show');
              }
            }
          } else {
            otaskwarn.classList.remove('show');
          }
        }

        function saveData(all) {
          let s = [];
          for (let i = 0; i < 7; i++) {
            let key = datalist[i];
            s[i] = beforeData[key].join("$");
            s[i] = s[i].replace(/~/g, ' ');
          }

          let str = s.join("~");
          localSave('collectSortBox', str);
          sortBoxStr = str;
          localSave('summarylist', beforeData.summaryList, 'object');
          // console.log(beforeData,all);
          if (all) {
            localSave('checklist', beforeData.checkList, 'object');
            localSave('finishlist', finishList, 'object');
          }
        }

        function datashow(list, obj) {
          let str = '';
          existItem = ['模板'];
          let num = 1;
          for (let a = 0; a < list.length; a++) {
            let val = list[a].trim();
            if (obj === project) {
              if (val) {
                let decor = ' >';
                let matchsign = /\s@([a-z-_0-9]+)$/g.exec(val);
                if (matchsign) {
                  let id = matchsign[1];
                  decor = ' data-sign="' + id + '"><span class="triangle" onclick="toMainSquare(4, \'' + id + '\')"></span>';
                  existItem[num] = id;
                  num++;
                  if (!itemObj[id]) {
                    itemObj[id] = ['项目名', {}, '备注'];
                  }
                  itemObj[id][0] = val.slice(0, val.lastIndexOf('@')).trim();
                }
                str = str + '<li data-id="' + a + '" ' + decor + '<b class="item">' + val +
                  '</b><div class="smallcontrol"><span class="writebtn line" onclick="lineEdit(event)"></span><span class="deletebtn line" onclick="lineDelete(event)">×</span></div></li>';
              }
            } else {
              if (val) {
                str = str + '<li data-id="' + a + '"><b class="item">' + val +
                  '</b><div class="smallcontrol"><span class="writebtn line" onclick="lineEdit(event)"></span><span class="deletebtn line" onclick="lineDelete(event)">×</span></div></li>';
              }
            }

          }
          if (obj === project) {
            existItem = existItem.concat(filedlist);
            localSave('existItem', existItem, 'object');
            localSave('itemObj', itemObj, 'object');
          }
          obj.innerHTML = str;
        }

        function datasimpleshow(list, obj, type, pre) {
          // 简单展示 有无前缀，或复杂（删除时类型传入-1，用意在不更新回收站清单数据）
          let str = '';
          let lilength = list.length;
          for (let a = 0; a < lilength; a++) {
            let temp = '';
            if (list[a].trim()) {
              if (type === "simple" && pre) {
                str = str + '<li>' + pre + ' <b>' + list[a].trim() + '</b></li>';
              } else if (type === "simple") {
                if (list == finishList) {
                  let nowindex = lilength - a - 1;
                  let tmmp = list[nowindex].trim();
                  if (tmmp.indexOf(today) === 0) {
                    str = str + '<li><b>' + tmmp.slice(10) + '</b></li>';

                  } else {
                    if (obj == places[1]) {
                      str = str + '<li class="old"><b>' + tmmp.slice(10) + '</b></li>';
                    } else {
                      str = str + '<li class="old"><b>' + tmmp + '</b></li>';
                    }
                  }

                } else {
                  str = str + '<li><b>' + list[a].trim() + '</b></li>';
                }
              } else if (type === "memory") {
                let spanlist = list[a].trim().split("~");
                for (let b = 0; b < spanlist.length; b++) {
                  if (b === 0) {
                    temp = temp + '<i>' + spanlist[b].trim().substring(0, 11) + '</i>' + "<span>" + spanlist[b].trim()
                      .substring(13) + "</span>";
                  } else {
                    temp = temp + "<span>" + spanlist[b].trim() + "</span>";
                  }

                }
                str = str + '<li>' + temp + '</li>';
              } else {
                str = str + '<li data-id="' + a + '"><b class="item">' + list[a].trim() +
                  '</b><div class="smallcontrol"><span class="writebtn line" onclick="lineEdit(event)"></span>' +
                  '<span class="deletebtn line" onclick="lineDelete(event,-1)">×</span></div></li>';
              }
            }
          }
          obj.innerHTML = str;
        }

        var ocollectPnums = toGet('collectPnum', 'classname', true);

        function datacollectshow(list, obj) {
          let str = '';
          for (let a = 0; a < list.length; a++) {
            if (list[a].trim()) {
              str = str + '<li data-id="' + a +
                '"><label><input type="checkbox" value=""/><span class="cbox" onclick="ischeckcount(event)"></span></label><b class="item" onclick="turnwriting(event)">' +
                list[a].trim() +
                '</b><span class="deletebtn" onclick="simpleDelete(event, -1)">×</span></li>';
            }
          }
          obj.innerHTML = str;
          ocollectPnums[0].innerText = list.length;
        }

        var ocollectAddbtn = toGet('collectAddbtn', 'classname');
        ocollectAddbtn.onclick = function() {
          // let li  = document.createElement('li');
          let idex = ocollectUl.querySelectorAll('b.item').length;
          // let str =  '<label><input type="checkbox" value=""/><span class="cbox" onclick="ischeckcount(event)"></span></label><b class="item" onclick="turnwriting(event)"><input type="text" onblur="finishwriting(event)" onkeydown="anotherwriting(event)" /></b><span class="deletebtn" onclick="simpleDelete(event, -1)">×</span>';
          // li.setAttribute('data-id', idex+'');
          // li.innerHTML = str;
          // ocollectUl.appendChild(li);
          // ocollectUl.lastChild.querySelector('.item input').focus();
          // ocollectUl.scrollIntoView(true);
          let str =
            '<li data-id="0"><label><input type="checkbox" value=""/><span class="cbox" onclick="ischeckcount(event)"></span></label><b class="item" onclick="turnwriting(event)"><input type="text" title="收集箱里的事项输入" onblur="finishwriting(event)" onkeydown="anotherwriting(event)" /></b><span class="deletebtn" onclick="simpleDelete(event, -1)">×</span></li>';
          let lis = str + ocollectUl.innerHTML;
          ocollectUl.innerHTML = lis;
          ocollectPnums[0].innerText = idex + 1;
          let ochecklis = ocollectUl.querySelectorAll('li.checked');
          let length = ochecklis.length;
          for (let item = 0; item < length; item++) {
            ochecklis[item].querySelector('input').checked = true;
          }
          ocollectUl.firstChild.querySelector('.item input').focus();
        }
        otagstatus.onclick = function(e) {
          let ele = e.target || e.srcElement;
          if (ele.tagName === 'B') {
            ele = ele.querySelector('span');
          }
          if (ele.tagName === 'SPAN') {
            let val = ele.innerText;
            let finalfind = '';
            if (val !== '#全部' && val !== '#今天' && val !== '#记忆' && val !== '本本' && val !== '收藏' && val !== '搜索记录') {
              for (let ii = 0; ii < taglist.length; ii++) {
                if (taglist[ii].indexOf(val)) {
                  if (/[|]+/.test(taglist[ii])) {
                    let index = taglist[ii].indexOf('|');
                    finalfind = val.slice(0, index);
                  } else {
                    finalfind = val;
                  }
                  break;
                }
              }
            } else {
              finalfind = val;
            }
            tosearchtag(val);
          }
        }
        var otagmenudecor = toGet('tagmenudecor', 'classname');
        otagmenudecor.onclick = function() {
          toMainSquare(numOfSection);
          if (newpartshow === 3) { // 帮助页已打开
            var olis = obookmenu.getElementsByTagName('li');
            olis[txtpartshow].classList.remove('active');
            txtparts[txtpartshow].classList.remove('active');
            olis[3].classList.add('active');
            txtparts[3].classList.add('active');
            txtpartshow = 3;
            window.scrollTo(0, 0);
          } else {
            toNewpart(3, 'review', 3);
          }
        }
        var otagmenujumpline = document.querySelectorAll('.tagmenujumpline u');
        var otodayDakaTxt = toGet('todayDakaTxt', 'classname');
        otagmenujumpline[0].onclick = function() {
          toMainSquare(1);
          jumptoDakaFun();
        }
        otodayDakaTxt.onclick = function() {
          jumptoDakaFun();
        }
        otagmenujumpline[1].onclick = function() {
          toMainSquare(1);
          ojumpToRefresh.setAttribute('data-open', '1');
          showTaskContent();
        }
        var ojumpdakabtn = toGet('jumpdakabtn', 'classname');
        ojumpdakabtn.onclick = jumptoDakaFun;

        function jumptoDakaFun() {
          if (newpartshow !== 1) {
            toNewpart(1);
          }
          var oSliBox1 = toGet('slideBox', 'classname');
          var nowState = oSliBox1.classList.contains("active");
          if (!nowState) {
            toggleDaka('slideBox');
          }
          var oSliBox2 = toGet('dayCheck', 'classname');
          var ulState = oSliBox2.classList.contains("active");
          if (!ulState) {
            toggleDaka('chart', 'dayCheck');
          }
          window.scroll(0, 0);
        }

        function datatagsolve(val = '', type = 'txt') {
          let list0 = [];
          let list1 = [];
          let list2 = [];
          let list3 = [];
          let datacollect = datacollectbox.map((item) => '「集」 ' + item);
          if (val && datacollect.length !== 0) {
            list0 = searchOutOne(datacollect, val);
          } else {
            list0 = datacollect;
          }
          if (type === 'today') {
            list0 = [];
            var refreshUnfinish = tmpRefresh.join('^');
          }
          let datado = beforeData['tmpDolist'].map((item) => '「执」 ' + item);
          let dataday = beforeData['tmpDaylist'].map((item) => '「历」 ' + item);
          let datawait = beforeData['tmpWaitlist'].map((item) => '「等」 ' + item);
          let datapro = beforeData['tmpProject'].map((item) => '「项」 ' + item);
          let datamaybe = beforeData['tmpMaylist'].map((item) => '「可」 ' + item);
          let fivelist = datado.concat(dataday, datawait, datapro, datamaybe);
          if (val && fivelist.length !== 0 && type !== 'today') {
            list0 = list0.concat(searchOutOne(fivelist, val));
          } else {
            list0 = list0.concat(fivelist);
          }
          let datadaka = [];
          let upperval = val.toUpperCase();
          if (dakaData[upperval] && dakaData[upperval][0] != 0) {
            let t = dakaData[upperval].join(' ');
            t = t.replace(' ', '次，( ');
            let tt = '「打卡」【<span>' + upperval + '</span>】 打卡' + t + ' )';
            datadaka.push(tt);
          } else if (regexOnlyDate.test(val)) {
            let dakadateObj = localGet('dakadateObj', 'object');
            if (dakadateObj) {
              for (let dakadate in dakadateObj) {
                if (dakadate === val) {
                  let dakaVal = dakadateObj[dakadate];
                  let ttt = '';
                  if (type === 'today') {
                    ttt = '今天打卡了<span>' + dakaVal + '</span>';
                  } else {
                    ttt = dakadate + ' 打卡了 ' + dakaVal;
                  }
                  ttt = ttt + ' （目前共打卡<span>' + dakaData[dakaVal][0] + '</span>次）';
                  datadaka.push(ttt);
                  break;
                }

              }
            }
          }
          let datafinish = finishList.map((item) => '[完] ' + item);
          let datanote = beforeData.summaryList.map((item) => '「本本」 ' + item);
          let memoryli = [];
          if (omemory.origin) {
            for (let key in omemory) {
              if (key !== 'origin' && /~/.test(omemory[key])) {
                let mm = omemory[key].split('~');
                let finalmm = '';
                let mmcount = 0;
                for (let ii = 0; ii < mm.length; ii++) {
                  if (mm[ii].indexOf(val) !== -1 || (type === 'date' && key === val)) {
                    mmcount++;
                    if (mmcount > 1 && type === 'txt') {
                      finalmm += '<p>' + mm[ii].replace(val, '<span>' + val + '</span>') + '</p>';
                    } else {
                      finalmm += '<p>' + mm[ii] + '</p>';
                    }
                  }
                }
                memoryli[memoryli.length] = key + " " + finalmm;
              } else if (key !== 'origin') {
                memoryli[memoryli.length] = key + ": " + omemory[key];
              }
            }
          }
          // 把进程数据做成一项 （
          let fortaglist = showNote('无', 'tagsolve');
          let datamemory = memoryli.map((item) => '「记忆」' + item);
          let dataanalyse = fortaglist.map((item) => '「分析」 ' + item);
          let donelist = [];
          if (type === 'justmemory') {
            donelist = list1.concat(datamemory);
          } else if (type === 'today') {
            // 加上进度  
            let progressTxt = '<span>' + progressSim.innerText + '</span>';
            let datafinishToday = [progressTxt];
            for (let finn = 0; finn < finishList.length; finn++) {
              if (finishList[finn].indexOf(val) !== -1) {
                let finnval = finishList[finn];
                datafinishToday.push('[完] ' + finnval.slice(11));
              }
            }
            donelist = list1.concat(datadaka, datafinishToday);
          } else {
            donelist = list1.concat(datamemory, dataanalyse, datadaka, datafinish, datanote);
          }
          if (val && donelist.length !== 0 && type !== 'today') {
            list1 = searchOutOne(donelist, val);
          } else {
            list1 = donelist;
          }
          let refreshli = [];
          let refreshliToday = [];
          if (refreshlist) {
            let reftxt = ['「日刷」', '「周刷」', '「月刷」'];
            for (let ire = 0; ire < 3; ire++) {
              if (refreshlist[ire]) {
                let finalref = '';
                let tmpref = [];
                let isstart = refreshlist[3][ire];
                if (/\*/.test(refreshlist[ire])) {
                  tmpref = refreshlist[ire].split('*');
                  let rrecount = 0;
                  for (let rrr = 0; rrr < tmpref.length; rrr++) {
                    if (tmpref[rrr].indexOf(val) !== -1 || (type === 'today' && isstart)) {
                      rrecount++;
                      if (rrecount > 1 && type === 'txt') {
                        finalref += '<p>' + tmpref[rrr].replace(val, '<span>' + val + '</span>') + '</p>';
                      } else if (type === 'today') {
                        if (refreshUnfinish.indexOf(tmpref[rrr]) !== -1) {
                          finalref += '<p>' + tmpref[rrr] + '</p>';
                        }
                      } else {
                        finalref += '<p>' + tmpref[rrr] + '</p>';
                      }
                    }

                  }
                } else {
                  if (refreshlist[ire].indexOf(val) !== -1 || (type === 'today' && isstart && (refreshUnfinish.indexOf(
                      refreshlist[ire]) !== -1))) {
                    finalref = refreshlist[ire];
                  }
                }

                if (type === 'today' && isstart) {
                  refreshli[refreshli.length] = reftxt[ire] + " " + finalref;
                } else if (type !== 'today') {
                  refreshli[refreshli.length] = reftxt[ire] + " " + finalref;
                }
              }
            }
          }
          let datarefresh = refreshli;
          let regularli = [];
          if (regularObj) {
            for (let datekey in regularObj) {
              if (datekey !== 'datestr') {
                let dateitemli = regularObj[datekey];
                let finaldd = '';
                if (dateitemli.length === 2) {
                  finaldd = dateitemli[1];
                } else {
                  let regucount = 0;
                  for (let dd = 1; dd < dateitemli.length; dd++) {
                    if (dateitemli[dd].indexOf(val) !== -1 || (type === 'date' && datekey === val)) {
                      regucount++;
                      if (regucount > 1 && type === 'txt') {
                        finaldd += '<p>' + dateitemli[dd].replace(val, '<span>' + val + '</span>') + '</p>';
                      } else {
                        finaldd += '<p>' + dateitemli[dd] + '</p>';
                      }
                    }
                  }

                }
                regularli[regularli.length] = datekey + " " + finaldd;

              }
            }
          }
          let dataregular = regularli.map((item) => '「定期」 ' + item);
          let datahotlink = linklist.map((item) => '「链接」 ' + item);
          let datarefer = beforeData['tmpReference'].map((item) => '「参考」 ' + item);
          let datacheck = beforeData.checkList.map((item) => '「检查」 ' + item);
          let tasklist = [];
          if (type !== 'today') {
            tasklist = list2.concat(datarefresh, dataregular, datahotlink, datarefer, datacheck);
          } else {
            tasklist = list2.concat(datarefresh);
          }
          if (val && tasklist.length !== 0 && type !== 'today') {
            list2 = searchOutOne(tasklist, val);
          } else {
            list2 = tasklist;
          }
          let datadel = beforeData['tmpRecycle'].map((item) => '[删] ' + item);
          if (val && datadel.length !== 0) {
            list3 = searchOutOne(datadel, val);
          } else {
            list3 = datadel;
          }
          if (type === 'justmemory') {
            list0 = [];
            list2 = [];
            list3 = [];
          }
          if (type === 'date' && val === todayAdd) {
            list0 = [];
          }

          return [list0, list1, list2, list3];
        }

        var odownloadnowbtn = toGet('downloadnowbtn', 'classname');
        let otagDownload = toGet('tagDownload', 'classname');
        let otagDownCon = toGet('tagDownCon', 'classname');
        let otagdownBtns = toGet('tagdownBtn', 'classname', true);
        let otagcontrolline = document.querySelector('.tagsection .control');
        const otagContent = toGet('tagContent', 'classname');
        odownloadnowbtn.onclick = isTagEditshow;
        otagdownBtns[2].onclick = isTagEditshow; // 取消-关闭
        function isTagEditshow() {
          if (odownloadnowbtn.innerText === '编辑模式') {
            odownloadnowbtn.innerText = '查看模式';
            otagDownload.classList.add('active');
            otagcontrolline.classList.add('active');
            otagContent.classList.add('active');
            otagDownCon.innerText = tagdownloadEdit();
          } else {
            odownloadnowbtn.innerText = '编辑模式';
            otagDownload.classList.remove('active');
            otagcontrolline.classList.remove('active');
            otagContent.classList.remove('active');
          }
          tojumptagmenu('0'); // 回到首部
        }

        function tagdownloadEdit() {
          var ooodownloadlist = [];
          var lis = otagContent.querySelectorAll('li');
          for (let i = 0; i < lis.length; i++) {
            // 先处理链接，再处理p span
            let tmpval = lis[i].innerHTML;
            let tmp = tmpval;
            if (tmpval.indexOf('「分析」') === 0) {
              let analys = lis[i].querySelectorAll('p');
              tmp = lis[i].firstChild.nodeValue + '\n- ';
              tmp = tmp + analys[0].innerHTML + '\n- 遇到的困难：' + analys[1].innerHTML + '\n- 打算：' + analys[2].innerHTML;
              tmp = tmp.replace('<u>', '');
              tmp = tmp.replace('</u>', '');
            } else if (/<p>/.test(tmpval)) {
              let pps = lis[i].querySelectorAll('p');
              let content = [];
              for (let item = 0; item < pps.length; item++) {
                content[item] = pps[item].innerHTML;
              }
              tmp = lis[i].firstChild.nodeValue + '\n- ' + content.join('\n- ');
            }
            if (/toLink/.test(tmpval)) {
              tmp = linkSolved(tmp, 'linktoMd');
            }

            ooodownloadlist[i] = tmp;
          }
          let ooodownstr = ooodownloadlist.join('\n- ');
          ooodownstr = ooodownstr.replace(/<span>/g, '');
          ooodownstr = ooodownstr.replace(/<\/span>/g, '');
          ooodownstr = '> Doit标签结果 ' + todayAdd + '  \n  \n- ' + ooodownstr;
          return ooodownstr;
        }
        otagdownBtns[0].onclick = function() { // 去掉标志
          let str = otagDownCon.innerText;
          str = str.replace(/「[\u4e00-\u9fa5]{1,2}」/g, '');
          otagDownCon.innerText = str;
        }
        otagdownBtns[1].onclick = function() { // 下载标签内容
          let str = otagDownCon.innerText;
          let filename = todayAdd + "(Doit-Tag).md";
          download(filename, str, 'text/markdown');
        }

        function searchOutOne(list, val) {
          let newlist = [];
          for (let i = 0; i < list.length; i++) {
            if (/^\[打卡\]/.test(list[i])) {
              let tmmp = list[i].replace('[打卡]', '');
              newlist.push(tmmp);
            } else if (list[i].indexOf(val) !== -1) {
              let tmp = list[i].replace(val, '<span>' + val + '</span>');
              newlist.push(tmp);
            }
          }
          return newlist;
        }

        function isDate(intYear, intMonth, intDay) {
          if (isNaN(intYear) || isNaN(intMonth) || isNaN(intDay)) return false;
          if (intMonth > 12 || intMonth < 1) return false;
          if (intDay < 1 || intDay > 31) return false;
          if ((intMonth == 4 || intMonth == 6 || intMonth == 9 || intMonth == 11) && (intDay > 30)) return false;
          if (intMonth == 2) {
            if (intDay > 29) return false;
            if ((((intYear % 100 == 0) && (intYear % 400 != 0)) || (intYear % 4 != 0)) && (intDay > 28)) return false;
          }
          return true;
        }

        function datasolve(list, obj) {
          let real = [];
          list.map((item, index) => {
            let temp = '';
            if (item.indexOf('@急') !== -1) {
              temp += '<u class="hurry" title="紧急"></u>';
            }
            if (item.indexOf('@重') !== -1) {
              temp += '<u class="significant" title="重要"></u>';
            }
            // 对日期进行判断  还剩多少天
            let leftday = '';
            item = item.trim();
            if (obj == daylist && regexDate.test(item) && !/toLink/.test(item)) {
              let time = regexDate.exec(item);
              let d = Date.UTC(time[1], time[2] - 1, time[3]);
              // let ttday = new Date(d);
              // console.log(d, time[0], ttday);
              if (d >= now && isDate(time[1], time[2], time[3])) { //未过期
                let left = (d - now) / 86400000;
                leftday = ' <em class="leftday">剩 ' + left + ' 天</em>';
              }
            }
            let li = '<li data-id="' + index +
              '"><label><input type="checkbox" value=""/><span class="cbox" onclick="checkIt(event)"></span><span class="sortNumSign"></span>' +
              temp +
              '<b class="item"  onclick="checkIt(event)">' + item + leftday +
              '</b></label><div class="smallcontrol"><span class="writebtn line" onclick="lineEdit(event)"></span>' +
              '<span class="deletebtn line" onclick="lineDelete(event)">×</span>' +
              '<span class="numberbtn line" onclick="beFirst(event)">1</span>' +
              '<span class="numberbtn line" onclick="beSecond(event)">2</span>' +
              '<span class="numberbtn line" onclick="beThird(event)">3</span>' +
              '<span class="numberbtn line" onclick="beFourth(event)">4</span></div></li>';
            real.push(li);
          });

          // console.log('datasolve创建了li', list);
          let realStr = real.join("");
          obj.innerHTML = realStr;
        }

        function outOfTime() {
          let lis = daylist.querySelectorAll("b");
          for (let i = 0; i < lis.length; i++) {
            let item = lis[i].innerText;
            if (regexDate.test(item)) {
              let time = regexDate.exec(item);
              let d = Date.UTC(time[1], time[2] - 1, time[3]);
              if (d < now) { //逾期了
                lis[i].classList.add("overtime");
              } else if (lis[i].classList.contains("overtime")) {
                lis[i].classList.remove("overtime");
              }
            }
          }
        }

        function sortFirst(num) {
          if (num === 1) {
            tosort(dolist, "tmpDolist");
          } else if (num === 0) {
            tosort(daylist, "tmpDaylist");
          } else {
            tosort(waitlist, "tmpWaitlist");
          }
        }

        function tosort(list, name) {
          // 优先序 按照data-sort的值排序 从小到大排序
          var lis = list.querySelectorAll("li");
          var idNumberlist = new Map();
          var idValue = new Map();
          var leftlist = [];
          var pointlist = [];
          for (var i = 0; i < lis.length; i++) {
            var id = lis[i].getAttribute("data-id");
            var val = lis[i].querySelector("b.item").innerHTML;
            if (name === 'tmpDaylist' && /剩\s[0-9]+\s天/.test(val)) {
              let tempval = lis[i].querySelector("b.item").innerText;
              let tempindex = /(?<=)剩\s[0-9]+\s天/.exec(tempval).index;
              val = val.slice(0, tempindex).trim();

            }
            if (lis[i].getAttribute("data-sort")) {
              var number = lis[i].getAttribute("data-sort");
              idNumberlist.set(id, number);
              idValue.set(id, val);
            } else {
              leftlist.push(val);
            }
          }
          for (var j = 0; j < 4; j++) {
            for (let [i, num] of idNumberlist) {
              if (num == j) {
                pointlist.push(idValue.get(i));
              }
            }
          }
          beforeData[name] = pointlist.concat(leftlist);
          datasolve(beforeData[name], list);
          if (name === 'tmpDaylist') {
            outOfTime();
          }
          // console.log(name,list,beforeData[name]);
          saveData();
        }

        function uniqueSort(parent, one, num) {
          var btn = parent.getElementsByClassName("sortNumSign")[0];
          btn.classList.add('active');
          btn.innerText = num;
        }

        function beFirst(event) {
          var parent = event.target.parentElement.parentElement;
          uniqueSort(parent, 0, '1');
          parent.setAttribute('data-sort', '0');
        }

        function beSecond(event) {
          var parent = event.target.parentElement.parentElement;
          uniqueSort(parent, 1, '2');
          parent.setAttribute('data-sort', '1');
        }

        function beThird(event) {
          var parent = event.target.parentElement.parentElement;
          uniqueSort(parent, 2, '3');
          parent.setAttribute('data-sort', '2');
        }

        function beFourth(event) {
          var parent = event.target.parentElement.parentElement;
          uniqueSort(parent, 3, '4');
          parent.setAttribute('data-sort', '3');
        }

        function sortIt(type = 'add') {
          // if(type=== 'subtract'){

          // }else{

          // }
          let list = beforeData.tmpDaylist;
          let m = new Map();
          let unsure = [];
          let s = new Set();
          let sortList = [];
          let ids = [];
          let len = list.length;
          // let outOfList = [];
          for (let i = 0; i < len; i++) {
            let item = list[i].trim();
            if (regexDate.test(item)) {
              let time = regexDate.exec(item);
              let d = Date.UTC(time[1], time[2], time[3]);
              m.set(i, d);
              s.add(d);
            } else {
              // 没日期
              unsure.push(i);
            }
          }
          let arr = [...s];
          arr.sort();
          for (let j of arr) {
            for (let [k, v] of m) {
              if (v === j) {
                ids.push(k);
              }
            }
          }
          let index = 0;
          let unindex = 0;
          let length = ids.length;
          for (let u = 0; u < len; u++) {
            if (index < length) {
              let id = ids[index];
              sortList[u] = list[id];
              index++;
            } else {
              let unsureId = unsure[unindex];
              sortList[u] = list[unsureId];
              unindex++;
            }
          }
          // console.log(sortList);
          beforeData.tmpDaylist = sortList;
          saveData();
          datasolve(sortList, daylist);
          outOfTime();
          // thingsNums[1].innerText = len;
        }

        function checkIt(event) {
          // event.stopPropagation(); // IE则是使用e.cancelBubble = true
          // event.cancelBubble = true;
          // debugger
          let label = event.target.parentElement;
          if (label.tagName !== 'LABEL') { // 多了剩余几天的标签，需要调整
            label = label.parentElement;
          }
          const input = label.getElementsByTagName("input")[0];
          const b = label.querySelector("b.item");
          // console.log(input.attributes.checked);// 首次 undefined
          if (input.checked) {
            input.attributes.checked = false;
            b.classList.remove("finish");
            label.classList.remove("finish");
          } else {
            // 第一次或者没有选中的时候
            input.attributes.checked = true;
            b.classList.add("finish");
            label.classList.add("finish");
          }

        }

        var tmpValue = null;
        var tmpNode = null;
        var tmpTaskDate = null; // 作为前后修改日期的对比和原样修改的标志
        var tmpOldtask = null; // 用来记录task修改前的值
        var isNowALink = false;

        function isSaveItem(val = '', obj) {
          // debugger
          var item = val;
          var isleftday = false;
          if (obj) {
            item = obj.innerHTML;
            if (/剩\s[0-9]+\s天/.test(item)) {
              let tempval = obj.innerText;
              let tempindex = /(?<=)剩\s[0-9]+\s天/.exec(tempval).index;
              item = item.slice(0, tempindex);
              isleftday = true;
            }
          }
          if (item) {
            item = item.replace(/javascript/gi, 'javascript');
            if (!(/javascript(?=\:)+/.test(item)) && (
                /^<b[\s]+class[\s]*=[\s]*\"link\"[\s]+onclick[\s]*=[\s]*[\"\']?toLink.+<\/b>$/.test(item) ||
                /^[^\<\>]+<b[\s]+class[\s]*=[\s]*\"link\"[\s]+onclick[\s]*=[\s]*[\"\']?toLink.+<\/b>[^\<\>]+$/.test(
                  item)
              )) {
              isNowALink = true;
              return item.trim();
            } else if (/javascript(?=\:)+/.test(item) || /\<[a-z]+\>.*\<\/[a-z]+\>/.test(item)) {
              isNowALink = false;
              return false;
            } else if (obj) {
              isNowALink = false;
              if (isleftday) {
                return item.trim();
              } else {
                return obj.innerText.trim();
              }
            } else {
              isNowALink = false;
              return item.trim();
            }
          }
        }

        var tempcheckcountnum = 0;

        function ischeckcount(event) {
          var ele = event.target || event.srcElement;
          if (ele.tagName === 'SPAN') {
            let newnum = 0;
            let label = ele.parentElement;
            let input = label.querySelector('input');
            if (input.checked) {
              tempcheckcountnum--;
              label.parentElement.className = '';
            } else {
              tempcheckcountnum++;
              label.parentElement.className = 'checked';
            }
            ocollectPnums[1].innerHTML = tempcheckcountnum;
          }
        }

        function turnwriting(event) {
          var ele = event.target || event.srcElement;
          if (ele.tagName === 'B') {
            ele.contentEditable = true;
          }
        }

        function finishwriting(event) {
          var ele = event.target || event.srcElement;
          if (ele.tagName === 'INPUT') {
            var value = ele.value;
            var oli = ele.parentElement.parentElement;
            if (value.trim()) {
              var val = isSaveItem(value, null);
              if (val) {
                ele.parentElement.innerHTML = val;
              } else {
                ocollectUl.removeChild(oli);
              }
            } else {
              ocollectUl.removeChild(oli);
            }
            let idx = ocollectUl.querySelectorAll('b.item').length;
            ocollectPnums[0].innerText = idx;
          }
        }

        function anotherwriting(event) {
          var e = event || window.event;
          var ele = e.target || e.srcElement;
          var keycode = e.keyCode || e.which;
          if (ele.tagName === 'INPUT' && keycode == 13) {
            ele.blur();
          }
        }

        function lineEdit(event) { // 打开书写框 改样式 writebox.value获取值和改值对象tmpNode
          // debugger
          const li = event.target.parentElement.parentElement;
          const b = li.getElementsByClassName('item')[0];
          b.classList.add("chosed");
          //  点击修改之后，弹出书写框 获取内容 修改项高亮显示

          var val = isSaveItem(null, b);
          if (isNowALink) {
            val = val.replace(/&quot;/g, '"');
          }
          tmpValue = val;
          if(!li.parentElement.classList.contains('tmpProject')){
            menuBtns[6].classList.remove("edit");
            menuBtns[6].classList.add("active");
          }
          write.style.display = "block";
          writebox.focus();
          menuBtns[1].innerText = "隐藏W";
          // const submitBtn = write.getElementsByClassName("circlebtn")[2];
          menuBtns[5].innerText = "确定修改";
          menuBtns[5].title = '仅是单个值修改，修改效果是临时的(快捷键Alt+Enter)'
          menuBtns[5].classList.add('active');
          tmpNode = b;
          solveUl = li.parentElement;
          changeId = li.getAttribute("data-id");
          writebox.value = val;
          writeboxTips.innerText = '( 进入修改模式……可添加字母或单词做对应标记，如g-表修改 )';
        }

        function lineDelete(event, type = "complex") { // 删除值 写在tmpRecycle列表上 改样式 writebox.value获取值和改值对象tmpNode
          let li = event.target.parentElement.parentElement;
          if (li.nodeName !== 'LI') {
            li = li.parentElement;
          }
          let ul = li.parentElement;
          let index = li.getAttribute("data-id");
          ul.removeChild(li);

          if (type === "complex") {
            const val = li.querySelector("b.item").innerText;
            beforeData['tmpRecycle'].unshift(val);
            // beforeData.tmpRecycle[beforeData.tmpRecycle.length] = val;
            datasimpleshow(beforeData.tmpRecycle, recycle);
          }

          let classname = ul.getAttribute("class");
          findList(classname);
          let list = getList(solveUl);
          beforeData[nowlistStr] = list;
          // console.log(list);
          saveData(1);
          if (nowlistStr === "tmpDolist" || nowlistStr === "tmpDaylist" || nowlistStr === "tmpWaitlist") {
            datasolve(list, solveUl);
            changeFinishProgress();
            getNum(list);
            if (nowlistStr === "tmpDaylist") {
              outOfTime();
            }
            if (nowlistStr === "tmpDolist") {
              localSave('dolist', list.join('*'));
            }
          } else if (nowlistStr === "tmpProject" || nowlistStr === "tmpMaylist" || nowlistStr === "tmpReference") {
            datashow(list, solveUl);
          } else {
            datasimpleshow(list, solveUl);
          }
        }

        function simpleDelete(event, type = 'url') {
          let li = event.target.parentElement;
          let obj = li.parentElement; // olinkReference
          obj.removeChild(li);
          let len = obj.querySelectorAll('li').length;
          if (type == '-1') {
            datacollectSave();
            // 进垃圾箱
            let item = li.querySelector('b.item').innerText;
            beforeData['tmpRecycle'].unshift(item);
            datasimpleshow(beforeData.tmpRecycle, recycle);
            saveData();
          } else if (len === 0 && type == 'url') {
            obj.style.display = 'none';
          }
        }

        function taskEdit(event) {
          const oitem = event.target.parentElement.parentElement;
          // 记录日期和内容，方便替换 
          tmpNode = oitem;
          tmpOldtask = oitem.children[0].innerText;
          let taskDate = oitem.parentElement.title;
          var val = tmpOldtask + ' ' + taskDate;
          writeLayer('定期任务');
          writebox.value = val;
          writeboxTips.innerText = '( 正在修改定期任务【此操作先删后增】 )';
          orefreshbtn.innerText = '确定定期任务';
        }

        function taskDelete(event, type = 'del') {
          // 把数据取出来删掉存进去，把显示部分删掉
          var justchange = false;
          var oitem = null;
          if (type === 'del') {
            oitem = event.target.parentElement.parentElement;
          } else {
            oitem = tmpNode;
            tmpNode = null;
          }
          var li = oitem.parentElement;
          var length = li.getElementsByClassName('item').length;
          var val = oitem.children[0].innerText;
          var date = li.title;
          if (type === 'change' && date === tmpTaskDate) {
            // 值修改内容部分
            justchange = true;
          }
          regularObj = localGet('regularObj', 'object');
          if (regularObj[date]) {
            if (!justchange) {
              if (length > 1) { // 现在有2项以上
                let str = regularObj[date].join('^');
                str = str.replace('^' + val, '');
                regularObj[date] = str.split('^');
              } else { // 只有一项
                delete regularObj[date];
                regularObj['datestr'] = regularObj['datestr'].replace('^' + date, '');
                noticeDates = localGet('noticeDates', 'string');
                if (noticeDates != '' && noticeDates.indexOf(date) !== -1) {
                  noticeDates = noticeDates.replace('^' + date, '');
                  localSave('noticeDates', noticeDates);
                  isToNotice();
                }
              }
            } else {
              tmpTaskDate = '原样修改呀';
            }

            if (type === 'del' && length > 1) {
              li.removeChild(oitem);
            } else if (type === 'del') {
              let oul = li.parentElement;
              oul.removeChild(li);
              let lilength = oul.querySelectorAll('li').length;
              if (oul.className === 'regularUlPass' && lilength === 0) {
                opassline.classList.add('hidden');
              }
            }
          }
          localSave('regularObj', regularObj, 'object');

        }

        function onTaskMention(event) { // 按钮开关 和 呈现的变化
          const ele = event.target || event.srcElement;
          const i = ele.parentElement.children[0];
          const li = ele.parentElement.parentElement;
          var date = i.innerText;
          var dateCon = '^' + date;
          let isadd = false;
          let regularObj = localGet('regularObj', 'object');
          if (regularObj && regularObj[date]) {
            if (ele.innerText === '关') {
              ele.innerText = '开';
              li.classList.add('closed');
              regularObj[date][0] = false;
            } else {
              ele.innerText = '关';
              li.classList.remove('closed');
              regularObj[date][0] = true;
              isadd = true;
            }
            let noticedate = localGet('noticeDates', 'string');
            if (noticedate) {
              noticeDates = noticedate;
              if (isadd && noticeDates.indexOf(dateCon) === -1) {
                noticeDates += dateCon;
              } else if(!isadd){
                noticeDates = noticeDates.replace(dateCon, '');
              }
            } else if (isadd) { // 内存中无提醒项的添加
              noticeDates = dateCon;
            }
            localSave('noticeDates', noticeDates);
            localSave('regularObj', regularObj, 'object');
            isToNotice();
          }
        }

        function refreshFinish(event) {
          //  完成之后存进  && 放进完成清单中
          var {
            year,
            month,
            date,
            week
          } = getTime();
          var oli = event.target.parentElement.parentElement;
          let ul = oli.parentElement;
          let index = oli.getAttribute("data-id");
          var delRefresh = localGet('delRefresh', 'object') || [];
          var obj = {};
          var temp = '';
          var str = '';
          var isnot = false;
          if (oli.getElementsByTagName('b')[0]) {
            thatdayNum = alldayNumObj[today] ? alldayNumObj[today] : 0;
            thatdayNum++;
            getDatelist();
            var val = oli.getElementsByTagName('b')[0].innerText;
            finishList[finishList.length] = today + val;
            localSave('finishlist', finishList, 'object');
            datasimpleshow(finishList, places[1], "simple");
            datasimpleshow(finishList, uls[4], 'simple');
            showFinishtask();
            checkSummary();
            var front = val.substring(0, 3);
            // debugger
            if (front === '【日】') {
              str = date + '';
              obj = delRefresh[0] || {};
              if (obj && obj[str]) {
                temp = obj[str] + '^' + val;
              } else {
                temp = val;
              }
              obj[str] = temp;
              delRefresh[0] = obj;
            } else if (front === '【周】') {
              str = date - week + 1 + '';
              obj = delRefresh[1] || {};
              if (obj && obj[str]) {
                temp = obj[str] + '^' + val;
              } else {
                temp = val;
              }
              obj[str] = temp;
              delRefresh[1] = obj;
            } else if (front === '【月】') {
              str = month + '';
              obj = delRefresh[2] || {};
              if (obj && obj[str]) {
                temp = obj[str] + '^' + val;
              } else {
                temp = val;
              }
              obj[str] = temp;
              delRefresh[2] = obj;
            }

          }
          // console.log(delRefresh);
          ul.removeChild(oli);
          localSave('delRefresh', delRefresh, 'object');
          refreshfun();
          refreshDetailFun();
          changeFinishProgress();
        }

        function findList(name) {
          if (/tmpDolist/.test(name)) {
            nowlistStr = "tmpDolist";
            solveUl = dolist;
          } else if (/tmpDaylist/.test(name)) {
            nowlistStr = "tmpDaylist";
            solveUl = daylist;
          } else if (/tmpWaitlist/.test(name)) {
            nowlistStr = "tmpWaitlist";
            solveUl = waitlist;
          } else if (/tmpProject/.test(name)) {
            nowlistStr = "tmpProject";
            solveUl = project;
          } else if (/tmpMaylist/.test(name)) {
            nowlistStr = "tmpMaylist";
            solveUl = maylist;
          } else if (/tmpReference/.test(name)) {
            nowlistStr = "tmpReference";
            solveUl = reference;
          } else if (/tmpRecycle/.test(name)) {
            nowlistStr = "tmpRecycle";
            solveUl = recycle;
          } else if (/checkList/.test(name)) {
            nowlistStr = "checkList";
            solveUl = places[0];
          } else if (/summaryList/.test(name)) {
            nowlistStr = "summaryList";
            solveUl = places[2];
          } else if (/collectUl/.test(name)) {
            nowlistStr = "collectUl";
            solveUl = ocollectUl;
          }
          // console.log(nowlistStr, solveUl);
        }

        function ableToEdit(event, num) {
          let btn = event.target;
          let tar = btn.parentNode.parentNode;
          if (num === -1) {
            tar = tar.parentNode;
          }
          if (num === -5) { // tag
            tar = btn.parentNode;
          }
          let classname = tar.getAttribute("class");
          if (/noEdit/.test(classname)) {
            tar.classList.remove("noEdit");
          } else {
            tar.classList.add("noEdit");
          }
        }

        //  处理 添加按钮的实现 数据处理
        var solvedbtns = toGet('solvedBtn', 'classname', true);

        function getDatelist() {
          getTime();
          var list = [];
          var old = localGet('finishdate', 'object');
          if (old) {
            if (old[old.length - 1] !== today) {
              list = old;
              list[old.length] = today;
              localSave('finishdate', list, 'object');
            }
          } else {
            list[0] = today;
            localSave('finishdate', list, 'object');
          }
        }

        function fixit(index, list, listname) {
          getDatelist(); // 获取完成清单的日期
          var num = list.length;
          thingsNums[index].innerText = num;
          datasolve(list, listname);
          changeFinishProgress(); // 算进度
          saveData(1);
        }

        solvedbtns[0].onclick = function() {
          beforeData.tmpDolist = solveAll(dolist, "执");
          var list = beforeData.tmpDolist;
          localSave('dolist', list.join('*'));
          fixit(0, list, dolist);
        }
        solvedbtns[1].onclick = function() {
          beforeData.tmpDaylist = solveAll(daylist, "历");
          var list = beforeData.tmpDaylist;
          fixit(1, list, daylist);
          outOfTime();
        }
        solvedbtns[2].onclick = function() {
          beforeData.tmpWaitlist = solveAll(waitlist, "等");
          var list = beforeData.tmpWaitlist;
          fixit(2, list, waitlist);
        }

        var otoItemBtn = toGet('toItemBtn', 'classname');
        otoItemBtn.onclick = function() {
          toMainSquare(4, '模板');
        }

        var progressSim = toGet('progressSim', 'classname');

        function changeFinishProgress(num0, num1) {
          getTime();
          var oScrollbar = toGet('scrollbar_orange', 'classname');
          var progress = toGet('progress', 'classname');
          var num0 = num0 || beforeData.tmpDolist.length;
          var num1 = num1 || beforeData.tmpDaylist.length;
          var num2 = beforeData.tmpWaitlist.length;
          var num3 = tmpRefresh.length; // 刷新任务单
          var opercent = {};
          var oldpercent = localGet('finishpercent', 'object');
          if (oldpercent) {
            opercent = oldpercent;
          }
          allNum = num0 + num1 + num2 + num3 + thatdayNum;
          // console.log(allNum,thatdayNum,num0,num1,num2,num3);
          percent = "0%";
          if (allNum) {
            percent = Math.ceil(thatdayNum / allNum * 100) + "%";
          }
          oScrollbar.style.width = percent;
          // console.log(today,finishList);
          // console.log(allNum,thatdayNum,percent);
          alldayNumObj[today] = thatdayNum;
          var weeklist = ['日', '一', '二', '三', '四', '五', '六'];
          var weekday = new Date().getDay();
          var littleSum = todayAdd + " 周" + weeklist[weekday] + '  ' + thatdayNum + "/" + allNum + "  (" + percent +
            ")";
          progress.innerText = littleSum;
          progressSim.innerText = littleSum;
          
          localSave('allDayNum', alldayNumObj, 'object');
          opercent[today] = percent;
          localSave('finishpercent', opercent, 'object');
        }
        var addbtns = toGet('addBtn', 'classname', true);
        addbtns[0].onclick = function() {
          addItem();
          solveUl = dolist;
          writeboxTips.innerText = '【执行清单添加】';
        }
        addbtns[1].onclick = function() {
          addItem();
          menuBtns[10].classList.add('active');
          writeboxTips.innerText = '【日历清单添加】( Ps:加日期可添加当日 或 根据“明天”“后天”“?天后”字眼自动添加，其中?为数字 )';
          solveUl = daylist;
        }
        addbtns[2].onclick = function() {
          addItem();
          solveUl = waitlist;
          writeboxTips.innerText = '【等待清单添加】';
        }
        addbtns[3].onclick = function() {
          addItem();
          solveUl = project;
          writeboxTips.innerText = '【项目清单添加】末尾添加“ @编号”（支持小写字母|数字|下划线|短横线）';
        }
        addbtns[4].onclick = function() {
          addItem();
          solveUl = maylist;
          writeboxTips.innerText = '【可能清单添加】';
        }

        function addItem() {
          // 打开编辑区
          menuBtns[5].innerText = "添加项*";
          menuBtns[5].title = '清单添加，支持多项添加(快捷键Alt+Enter)';
          writeLayer();
        }

        function getList(obj, type) {
          var bs = obj.querySelectorAll("b.item");
          var list = [];

          for (let i = 0; i < bs.length; i++) {
            let val = bs[i].innerHTML;
            if (obj == daylist && /剩\s[0-9]+\s天/.test(val)) {
              let tempval = bs[i].innerText;
              let tempindex = /(?<=)剩\s[0-9]+\s天/.exec(tempval).index;
              // (?<=)剩\s[0-9]+\s天  检测
              val = val.slice(0, tempindex).trim();
            }
            list[list.length] = val;
          }
          return list;
        }

        var datacollectchange = [];

        function solveAll(obj, pre) {
          getTime();
          var inputs = obj.querySelectorAll("input");
          var bs = obj.querySelectorAll("b.item");
          var list = [];
          datacollectchange = [];
          // 当天完成的事项
          thatdayNum = alldayNumObj[today] ? alldayNumObj[today] : 0;
          for (let i = 0; i < inputs.length; i++) {
            let val = bs[i].innerHTML;
            let tempval = bs[i].innerText;
            if (obj == daylist && /剩\s[0-9]+\s天/.test(val)) {
              let tempindex = /(?<=)剩\s[0-9]+\s天/.exec(tempval).index;
              val = val.slice(0, tempindex - 1);
            }
            if (inputs[i].checked && obj != ocollectUl) {
              finishList[finishList.length] = today + " (" + pre + ") " + val;
              thatdayNum++;
            } else if (inputs[i].checked && obj == ocollectUl) {
              datacollectchange[datacollectchange.length] = val;
            } else {
              list[list.length] = val;
            }
          }
          // console.log(finishList);
          
          if (obj != ocollectUl) {
            datasimpleshow(finishList, places[1], "simple");
          }
          // localSave('allDayNum', alldayNumObj, 'object');
          return list;
        }

        var nowCollect = 0;
        var clearallBtn = toGet('clearall', 'classname');
        clearallBtn.classList.add('hidden');
        clearallBtn.onclick = function() {
          // nowCollect 为 0时是刷新任务表，所以没有删除的说法
          var val = confirm("确定要删除当前卡片的所有内容吗？删除的数据将无法恢复。");
          if (val) {
            let list = [];
            if (nowCollect === 2) {
              // nowCollect 为2，清空回收箱
              beforeData.tmpRecycle = [];
              recycle.innerHTML = '';
              saveData();
            } else if (nowCollect === 1) {
              // nowCollect 为1，清空参考资料表
              beforeData.tmpReference = [];
              reference.innerHTML = '';
              saveData();
            }

          }
        }


        var asideTogs = document.querySelectorAll(".aside input");
        var collect = document.querySelectorAll(".aside .list");
        var orefername = toGet('headname', 'classname');
        var oasidecontrol = document.querySelector(".aside .controlers");
        oasidecontrol.onclick = function(e) {
          var event = e || window.event;
          var ele = event.target || event.srcElement;
          asideToggle(ele);
        }

        function asideToggle(ele) {
          var index = 0;
          var namelist = ['刷新任务', '参考卡', '回收箱'];
          if (ele.tagName === 'INPUT') {
            index = ele.getAttribute('data-index') * 1;
            if (index !== nowCollect) {
              collect[nowCollect].style.display = 'none';
              collect[index].style.display = 'block';
              nowCollect = index;
              orefername.innerText = namelist[index];
              if (index === 0) {
                clearallBtn.classList.add('hidden');
              } else {
                clearallBtn.classList.remove('hidden');
              }
            }
          }
        }

        var otoCopydata = toGet('toCopydata', 'classname');
        otoCopydata.onclick = function() {
          summPartToggle();
          toMainSquare(1);
          tosearchtag('「本本」');
          if (odownloadnowbtn.innerText === '编辑模式') {
            isTagEditshow();
          }
          // 复制到粘贴板  这种复制只支持文本框和文本域innput textarea (注意后者才支持换行符)
          // var copyData = beforeData.summaryList.join("\n");
          // writebox.value = copyData;
          // writebox.select();
          // document.execCommand("Copy"); // 执行浏览器复制命令
          // writeLayer();
        }
      </script>

    <script>
        //  下面是页面主菜单和书写框的按钮 以及页面展开折叠按钮
        var opages = toGet('pages', 'id'); // 非设置部分
        var omain = toGet('main', 'classname');
        var write = toGet('write', 'classname');
        var writebox = write.getElementsByClassName("writebox")[0];
        var writeboxTips = write.getElementsByClassName("writeboxTips")[0];
        var ocontent = toGet('mainpart', 'classname');
        var parts = ocontent.getElementsByClassName("part");
        var oheaders = ocontent.getElementsByClassName("header");
        var oresource = toGet('resource', 'classname');
        var uls = toGet('detailSimple', 'classname', true);
        var ostart = toGet('start', 'classname');
        var obook = toGet('book', 'classname');
        var oshowings = toGet('onepart', 'classname', true);
        var simplebtns = document.querySelectorAll('.simplebtn');
        for (let i = 0; i < parts.length; i++) {
          oheaders[i].onclick = function() {
            if (oheaders[i].getAttribute('data-id') === '0') {
              parts[i].style.display = "block";
              oheaders[i].setAttribute('data-id', '1');
            } else {
              parts[i].style.display = "none";
              oheaders[i].setAttribute('data-id', '0');
            }
          }
        }
        simplebtns[0].onclick = function(e) {
          toSimplePart(e);
        }
        simplebtns[1].onclick = function() {
          toNewpart(0);
        }
        simplebtns[2].onclick = function() {
          toNewpart(1);
        }
        simplebtns[3].onclick = function() {
          toNewpart(2);
        }
        simplebtns[4].onclick = function() {
          toNewpart(3);
        }

        function showTaskContent() {
          // 显示的情况下，根据data-open & 是否在本页决定来关闭
          var isOpen = ojumpToRefresh.getAttribute('data-open');
          if (isOpen === '1') { // 原始=要显示
            if (oshowings[3].style.display === 'block') { // 在本页
              var olis = obookmenu.getElementsByTagName('li');
              olis[txtpartshow].classList.remove('active');
              txtparts[txtpartshow].classList.remove('active');
              olis[5].classList.add('active');
              txtparts[5].classList.add('active');
              txtpartshow = 5;
              if (isOpenSetting) {
                oshowings[newpartshow].style.top = '52px';
                osettingbtn.setAttribute('data-change', '1');
              }
              window.scrollTo(0, 0);
            } else {
              oldpartshow = newpartshow;
              toNewpart(3, 'refresh', 5);
              ojumpToRefresh.setAttribute('data-open', '0');
            }
          } else { // 第二次点击“看”
            ojumpToRefresh.setAttribute('data-open', '1');
            if (oldpartshow === -1) {
              toNewpart(newpartshow);
            } else {
              toNewpart(oldpartshow);
            }
          }
        }
        var ojumpToRefresh = toGet('jumpToRefresh', 'classname');
        var otaskwarn = toGet('taskwarn', 'classname');
        var oprogress = toGet('progress', 'classname');
        ojumpToRefresh.onclick = showTaskContent;
        otaskwarn.onclick = showTaskContent;
        oprogress.onclick = showTaskContent;


        simplebtns[5].onclick = toNewPlugin;

        simplebtns[6].onclick = toOutput;

        simplebtns[7].onclick = function() {
          toOutput('solve');
        }
        simplebtns[8].onclick = function() {
          openInoutWrite('open');
          toOutput('backup', 'copy');
        }
        simplebtns[9].onclick = function() {
          openInoutWrite('open');
          toOutput('solve', 'copy');
        }
        simplebtns[10].onclick = function() {
          toMainSquare(1);
        }
        simplebtns[11].onclick = function() {
          var file_input = toGet('file_input', 'id');
          file_input.value = "";
        }
        var writeBoxForCopy = toGet('writeBoxForCopy', 'classname');
        simplebtns[12].onclick = function() {
          var file_input = toGet('file_input', 'id');
          var files = file_input.files;
          var list = [];
          var justOpen = false;
          // console.log(files);
          function txtTodata(data) {
            let nmatch = data.match(/(\^)/g);
            if (nmatch) {
              list = data.split('^');
              if (nmatch.length > 1) {
                datacollectbox = list[0].split('&');
              }
              sortBoxStr = list[nmatch.length - 1];
              beforeData.checkList = list[nmatch.length].split('&');

            } else {
              // console.log('默认为导入收集箱');
              datacollectbox = data.split('&');
            }

            localSave('collect', datacollectbox, 'object');
            localSave('collectSortBox', sortBoxStr);
            localSave('checklist', beforeData.checkList, 'object');
            strToList(sortBoxStr); // 确保数据替换
            // 简版的数据更正
            datasimpleshow(memorylist, uls[0], 'memory');
            datasimpleshow(beforeData.tmpDolist, uls[1], 'simple', '【执】 ');
            datasimpleshow(beforeData.tmpDaylist, uls[2], 'simple', '【限】');
            datasimpleshow(beforeData.tmpWaitlist, uls[3], 'simple', '【待】 ');
            datasimpleshow(finishList, uls[4], 'simple');
          }
          if (files.length > 0) { // 判断文件存在
            justOpen = confirm(
              "该操作将用txt文件内容覆盖现有数据，你确定要覆盖吗？\n\n(非此处下载的备份文件导入时除了注意格式还需注意：文件非UTF-8编码的请另存一份UTF-8编码的txt再导入，否则内容会出现乱码)");
            if (justOpen) { // 确定覆盖
              var file_data = files[0];
              // console.log(file_data);
              if (/\.txt$/.test(file_data.name)) {
                let reader = new FileReader();
                reader.readAsText(file_data, 'UTF-8'); // 读取纯文本文件,且编码格式为 utf-8
                // 读取文件,会触发 onload 异步事件,可使用回调函数 来获取最终的值.
                reader.onload = function(e) {
                  let fileContent = e.target.result;
                  txtTodata(fileContent);
                  writeBoxForCopy.value = '(' + file_input.value + ' 的数据已成功导入)';
                  file_input.value = "";
                }
              }
            }
          } else if (writeBoxForCopy.value.trim()) {
            justOpen = confirm("确定采用下面显示框的数据导入吗？该操作会覆盖现有数据，确定要覆盖吗？");
            if (justOpen) {
              txtTodata(writeBoxForCopy.value);
              writeBoxForCopy.value = '(本显示框的数据已成功导入)';
            }

          } 

        }

        function toOutput(type, copy = "not") {
          getTime();
          strToList(sortBoxStr); // 确保数据替换
          let list = [];
          let listStr = '';
          let filename = '';
          let tempFreshList = []; // 收集刷新任务
          let tempMemoryList = []; // 收集记忆列表
          let tempObj = localGet('memoryObj', 'object');
          let tempRegularList = []; // 收集定期任务列表
          regularObj = localGet('regularObj', 'object');
          let temp1 = [];
          let temp5 = [];
          let temp0 = [];
          let aftertxt = '';
          let dakatxt = '';
          let n = 7;
          // 导出数据有两种：
          // ①下次使用的备份 = 事项清单的组合"collectSortBox",sortBoxStr（包括参考卡，回收箱）+ 检查卡"checklist",beforeData.checkList
          // ②数据再次处理 = 参考卡beforeData.tmpReference + 完成卡"finishlist",finishList + 随记"summarylist",beforeData.summaryList
          // 参考列表temp2  自定义链接temp3，完成卡temp0，随记temp1，刷新任务tempFreshList， 记忆清单tempMemoryList ，检查卡temp5
          if (type === 'solve') {
            temp1 = localGet('summarylist', 'object');
            list[1] = solveLink(temp1, '0');
            let temp2 = beforeData.tmpReference;
            let referStr = temp2.join("\n- ");
            if (/toLink/.test(referStr)) {
              list[2] = solveLink(temp2, '0');
            } else {
              list[2] = referStr;
            }
            if (userDefined['outputChose'] === undefined || userDefined['outputChose'] !== 'simple') {
              temp0 = finishList;
              list[0] = temp0.join("\n- ");
              let temp3 = linklist;
              list[3] = solveLink(temp3, '0');
              if (refreshlist[0]) {
                tempFreshList[tempFreshList.length] = refreshlist[0];
              }
              if (refreshlist[1]) {
                tempFreshList[tempFreshList.length] = refreshlist[1];
              }
              if (refreshlist[2]) {
                tempFreshList[tempFreshList.length] = refreshlist[2];
              }
              list[4] = solveLink(tempFreshList, '1');
              temp5 = beforeData.checkList;
              list[5] = solveLink(temp5, '0');
              if (tempObj) {
                for (let key in tempObj) {
                  if (key !== 'origin') {
                    tempMemoryList[tempMemoryList.length] = key + ":\n- " + tempObj[key];
                  }
                }
              }
              list[6] = solveLink(tempMemoryList, '2');
              if (regularObj) {
                for (let regulardate in regularObj) {
                  if (regulardate !== 'datestr') {
                    let rrgli = regularObj[regulardate];
                    let rrgval = '';
                    if (rrgli.length === 2) {
                      rrgval = rrgli[1];
                    } else {
                      rrgval = rrgli.slice(1).join('\n- ');
                    }
                    tempRegularList[tempRegularList.length] = regulardate + ":\n- " + rrgval;
                  }
                }
              }
              list[7] = tempRegularList.join('\n- ');
            } else {
              let templist = [];
              temp0 = finishList;
              for (let k = 0; k < temp0.length; k++) {
                templist[k] = temp0[k].substring(14);
              }
              list[0] = templist.join("\n- ");
              n = 2;
            }
            let prename = [0, '小本本', '参考列表', '热链接', '刷新任务', '检查卡', '记忆卡', '定期任务'];

            for (let t = 1; t <= n; t++) {
              if (list[t] !== '0' && list[t] !== '') {
                aftertxt += '\n\n> ' + prename[t] + '\n- ' + list[t];
              }
            }
            var dakadateobj = localGet('dakadateObj', 'object'); // {}日期对应打卡内容
            if (dakadateobj && dakadateobj[today]) {
              dakatxt = ' #' + dakadateobj[today];
            }
            listStr = "> " + progressSim.innerText + dakatxt + "\n- " + list[0] + aftertxt;

            if (copy === 'copy') {
              writeBoxForCopy.value = listStr;
              writeBoxForCopy.select();
              document.execCommand("Copy");
            } else {
              filename = todayAdd + "(Doit).md";
              download(filename, listStr, 'text/markdown');
            }
          } else {
            if (copy === 'copy') {
              let mdstr = '> 收集箱\n- ';
              let coldata = solveLink(datacollectbox, '0');
              mdstr = mdstr + coldata + '\n\n> 清单数据(7个 执|历|等|项|可|参考|回收)\n- ';
              let sevendata = solveLink(sortBoxStr.split('$'), '0');
              let tempList = sevendata.replace(/~/g, '\n\n- ');
              mdstr = mdstr + tempList + '\n\n> 检查卡\n- ';
              let checkdata = solveLink(beforeData['checkList'], '0');
              mdstr = mdstr + checkdata + '\n\n';
              writeBoxForCopy.value = mdstr;
              writeBoxForCopy.select();
              document.execCommand("Copy");
            } else {
              list[0] = datacollectbox.join('&');
              list[1] = sortBoxStr;
              list[2] = beforeData['checkList'].join('&');
              listStr = list.join("^");
              filename = todayAdd + "Doit备份数据.txt";
              download(filename, listStr, 'text/txt');
            }
          }

          function solveLink(listContent, type) {
            let templist = listContent;
            let newlist = [];
            if (templist.length !== 0) {
              if (type === '0') {
                newlist = listContent;
              }
              if (type === '1') {
                newlist = templist.join('*').split('*');
              }
              if (type === '2') {
                newlist = templist.join('\n- ').split('~');
              }

              for (let i = 0; i < newlist.length; i++) {
                if (/toLink/.test(newlist[i])) {
                  newlist[i] = linkSolved(newlist[i], 'linktoMd');
                }
              }
              return newlist.join("\n- ");
            } else {
              return ' ';
            }
          }
        }

        function linkSolved(str, type) {
          // 应该注意 str除了链接，还有其他
          let div = document.createElement('div');
          div.innerHTML = str;
          let temp = div.innerText;
          let val = str.replace(/&quot;/g, '');
          var regex1 = /((https?|http):\/\/[-A-Za-z0-9%@#&+/?=~_|!:;,.]+[-A-Za-z0-9+&@#/%=~_|])/g;
          var regex2 = /((https?|http):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|])/g;
          var regex3 = /(http\S+)\)/g;
          let islink = regex1.exec(val) || regex2.exec(val) || regex3.exec(val);
          let istext = '';
          if (type === 'mdtoLink') {
            let mdlink = /\[([\u4E00-\u9FA5A-Za-z0-9_-\|\s]+)\]\((http|https):\/\/[\w\d+&@#\/%?=~_|!:,.;-]+\S/g.exec(
              val);
            istext = mdlink ? mdlink[0] : 'nxnnnaaannjdjdndnnnnbbbnn';
            var text = mdlink ? mdlink[1] : '链接';
          } else {
            let b = div.getElementsByClassName('link')[0];
            istext = b.innerText;
          }

          if (istext) {
            let url = islink[1].replace(/\\/g, '');
            url = url.replace(/\"/g, '');
            if (type === 'resetLink') {
              val = '<b class="link" onclick = toLink("' + url + '")>' + istext + '</b>';
            } else if (type === 'linktoMd') {
              val = '[' + istext + '](' + url + ')';
            } else if (type === 'mdtoLink') {
              val = '<b class="link" onclick = toLink("' + url + '")>' + text + '</b>';
            }
            temp = temp.replace(istext, val);
          }
          return temp;
        }

        function download(filename, content, type) {
          var blob;
          if (typeof window.Blob === 'function') {
            blob = new Blob([content], {
              type: type
            });
          } else {
            var BlobBuilder = window.BlobBuilder || window.MozBlobBuilder || window.WebKitBlobBuilder || window
              .MSBlobBuilder;
            var bb = new BlobBuilder();
            bb.append(content);
            blob = bb.getBlob(type);
          }
          if (navigator.msSaveBlob) {
            navigator.msSaveBlob(blob, filename);
          } else {
            var URL = window.URL || window.webkitURL;
            var bloburl = URL.createObjectURL(blob);
            var anchor = document.createElement('a');
            if ('download' in anchor) {
              anchor.style.visibility = 'hidden';
              anchor.href = bloburl;
              anchor.download = filename;
              document.body.appendChild(anchor);
              var evt = document.createEvent('MouseEvents');
              evt.initEvent('click', true, true);
              anchor.dispatchEvent(evt);
              document.body.removeChild(anchor);
            } else {
              location.href = bloburl;
            }
          }
        }

        var omenu = toGet('menu', 'classname');
        omenu.onclick = function(event) {
          var e = event || window.event;
          var ele = e.target || e.srcElement;
          if (ele.tagName === 'SPAN') {
            getTime();
          }
        }


        function toSimplePart(e) { // 简版与编辑按钮
          window.scrollTo(0, 0);
          var event = e || window.event;
          var ele = event.target || event.srcElement;
          var back = toGet('bodybg', 'classname');
          omain.classList.remove('unshow');
          var isshow = false;
          back.style.display = 'none';
          if (todayDakaItem !== '') {
            var dakatxt = '今天打卡了' + todayDakaItem;
            progressSim.title = dakatxt;
            otodayDakaTxt.innerText = todayDakaItem;
          }

          // 按钮和内容的切换
          if (newpartshow !== -1) {
            if (newpartshow === 1 && isTimeCounting) {
              oshowings[1].style.visibility = 'hidden';
              simplebtns[2].classList.add('counting');
            } else {
              oshowings[newpartshow].style.display = 'none';
            }
            simplebtns[newpartshow + 1].classList.remove('active');
            newpartshow = -1;
          }
          var val = ele.innerText;
          var oparts = toGet('content', 'classname', true);

          if (val === "切简版") {
            oparts[0].style.display = "none";
            oparts[1].style.display = "block";
            ele.innerText = "切编辑";
            omain.classList.add('simple');
            omenu.classList.remove('on');
            isshow = true;
          } else {
            oparts[0].style.display = "block";
            oparts[1].style.display = "none";
            omain.classList.remove('simple');
            ele.innerText = "切简版";
            omenu.classList.add('on');
          }

          if (isshow) {
            // 数据保存和渲染
            if (memorylist.length === 0) {
              uls[0].style.display = 'none';
              otoMemorypart.classList.remove('active');
            } else {
              datasimpleshow(memorylist, uls[0], 'memory');
              uls[0].style.display = 'block';
              otoMemorypart.classList.add('active');
            }
            datasimpleshow(beforeData.tmpDolist, uls[1], 'simple', '【执】 ');
            datasimpleshow(beforeData.tmpDaylist, uls[2], 'simple', '【限】');
            datasimpleshow(beforeData.tmpWaitlist, uls[3], 'simple', '【待】 ');
            datasimpleshow(finishList, uls[4], 'simple');
          }
        }

        var ocheckHeader = toGet('check-header', 'classname');
        var obookheader = toGet('book-header', 'classname');
        var oheaderboxs = obookheader.getElementsByClassName('share_box');
        var otoTeachNextBtn = toGet('toTeachNextBtn', 'classname');

        function getRandomTxt(ele, type) {
          if (ele.innerText === '展开' || type === 'new') {
            var randomindex = 0;
            do {
              randomindex = Math.floor(Math.random() * 13);
            }
            while (randomshow === randomindex);

            // 0~12 13个值
            oheaderboxs[randomshow].classList.remove('active');
            oheaderboxs[randomindex].classList.add('active');
            randomshow = randomindex;
          }
          if (ele.innerText === '展开') {
            ele.classList.remove('unactive');
            ocheckHeader.classList.add('active');
            obookheader.style.display = 'block';
            otoTeachNextBtn.style.display = 'block';
            ele.innerText = '关闭';
          } else if (ele.innerText === '关闭') {
            ele.classList.add('unactive');
            ocheckHeader.classList.remove('active');
            obookheader.style.display = 'none';
            otoTeachNextBtn.style.display = 'none';
            ele.innerText = '展开';
          }

        }

        function toNewpart(num, type, which) { // 0-资料 1-启动 2-检 3-书
          var back = toGet('bodybg', 'classname');
          var ofiveheart = toGet('fiveheart', 'classname');
          if (num !== -1) {
            // 本页双击则关闭，他页进入则开启（主页或其他）
            if (oshowings[num].style.display !== 'block') { // 开启页面
              if ((isTimeCounting && num !== 1) || (isTimeCounting && newpartshow === 1)) {
                // console.log('1.除杂-计时+到非启动|计时+启动页离开', num)
                makeit(true, newpartshow, 'oStartOFF', false, oshowings[num]);
              } else {
                makeit(true, newpartshow, null, false, oshowings[num]);
                // console.log('常规', num);
              }
              omain.classList.remove('changecolor');
              oshowings[num].style.display = 'block';
              simplebtns[num + 1].classList.add('active');
              newpartshow = num;
              if (num === 2) {
                omain.classList.add('changecolor');
              }

            } else { // 当前页面是block  =  关闭页面 开启正在计数的页面
              if (num === 1) {
                if (newpartshow === 1) {
                  if (isTimeCounting) {
                    makeit(false, null, 'oStartOFF', true, opages);
                  } else {
                    makeit(true, newpartshow, null, true, opages);
                  }
                  newpartshow = -1;

                } else {
                  makeit(true, newpartshow, 'oStartON', false, oshowings[1]);
                }
              } else {
                makeit(true, num, null, true, opages);
                newpartshow = -1;
              }
              if (num === 2) {
                omain.classList.remove('changecolor');
              }
            }

          }

          function makeit(isClear, index, type, isToMain, overflowObj) {
            if (isClear && index !== -1) {
              oshowings[index].style.display = 'none';
              simplebtns[index + 1].classList.remove('active');
            }

            if (type === 'oStartOFF') {
              ofiveheart.style.display = 'none';
              oshowings[1].style.display = 'block';
              oshowings[1].style.visibility = 'hidden';
              simplebtns[2].className = 'simplebtn counting';
            } else if (type === 'oStartON') {
              ofiveheart.style.display = 'inline-block';
              oshowings[1].style.visibility = 'visible';
              simplebtns[2].className = 'simplebtn active';
              newpartshow = 1;
            }

            if (!isToMain || index === -1) {
              back.style.display = 'block';
              omain.classList.add('unshow');
            } else {
              back.style.display = 'none';
              omain.classList.remove('unshow');
            }
          }

          if (newpartshow === -1 && simplebtns[0].innerText === '切简版') {
            omenu.classList.add('on');
          } else {
            omenu.classList.remove('on');
          }
          if (num === 0 && newpartshow !== -1) {
            hotlinkload();
          }
          if (num === 2 && newpartshow !== -1) {
            showFinishtask();
            checkSummary();
          }
          if (num === 3 && newpartshow !== -1) {
            loadBook();
            if (type === 'refresh' || type === 'question' || type === 'review') {
              getTime();
              var olis = obookmenu.getElementsByTagName('li');
              olis[txtpartshow].classList.remove('active');
              txtparts[txtpartshow].classList.remove('active');
              olis[which].classList.add('active');
              txtparts[which].classList.add('active');
              txtpartshow = which;
              if (isOpenSetting) {
                oshowings[newpartshow].style.top = '52px';
                osettingbtn.setAttribute('data-change', '1');
              }
            }
          }
          window.scrollTo(0, 0);
        }

        var ocleartxtbtn = toGet('cleartxtbtn', 'classname');
        var omorewritebox = toGet('morewritebox', 'classname');
        ocleartxtbtn.onclick = function() {
          omorewritebox.value = '';
        }
        omorewritebox.onkeydown = function(e) {
          var event = e || window.event;
          var keycode = event.keyCode || event.which;
          var val = omorewritebox.value.trim();
          if (val && keycode === 13) {
            inputDataSet(5, 'morewritebox', val);
            omorewritebox.value = '';
            omorewritebox.focus();
          }
        }
        var omorefunpart = toGet('morefunpart', 'classname');
        var omorePartBack = omorefunpart.querySelector('.back');
        var omoreSections = omorefunpart.querySelectorAll('.section');
        var oclosesectionbtn = omorefunpart.querySelector('.closetipbtn');
        var numOfSection = -1;
        var opartDl = toGet('partDl', 'classname');
        omorePartBack.onclick = function() {
          toMainSquare(numOfSection);
        }
        oclosesectionbtn.onclick = function() {
          toMainSquare(numOfSection);
        }
        var ojumpbtns = toGet('jumpbtn', 'classname', true);
        ojumpbtns[0].onclick = function() {
          toMainSquare(0);
        }
        ojumpbtns[1].onclick = function() {
          toMainSquare(1);
        }
        var ojumptagbtn = toGet('jumptagbtn', 'classname');
        ojumptagbtn.onclick = function() {
          toMainSquare(1);
        }
        var ojumpboxbtn = toGet('jumpboxbtn', 'classname');
        ojumpboxbtn.onclick = function() {
          toMainSquare(0);
        }
        var oquesCon = toGet('quesCon', 'classname');

        function conToquestxt() {
          let str = oquesCon.innerHTML;
          // 如何保证数据安全，保证格式正确
          let testtxt = str.replace(/<br>/g, '');
          testtxt = testtxt.replace(/<div>/g, '');
          testtxt = testtxt.replace(/<\/div>/g, '');

          if (isSaveItem(testtxt)) {
            quesContent = isSaveItem(testtxt);
            localSave('questxt', str);
          }

        }

        ojumpbtns[2].onclick = function() {
          if (quesContent === '') {
            oquesCon.innerHTML = localGet('questxt', 'string') ? localGet('questxt', 'string') : '';
          }
          toMainSquare(3);
        }
        ojumpbtns[3].onclick = function() {
          toMainSquare(4, '模板');
        }


        var oquesConwrapper = toGet('quesCon-wrapper', 'classname');
        var oquesnav = toGet('quesnav', 'classname');
        oquesnav.onclick = function(e) {
          let event = e || window.event;
          let ele = event.target || event.srcElement;

          if (ele.tagName === 'SPAN') {
            let txt = ele.innerText;
            let str = oquesCon.innerHTML;
            if (txt === '存') {
              conToquestxt();
              ele.classList.add('green');
              setTimeout(function() {
                ele.classList.remove('green');
              }, 2000);
            } else if (txt === '模') {
              str += '<br><div>> ' + todayAdd +
                ' ( Ques: ) </div><div>- try1: </div><div>- result1: </div><br><div>- try2: </div><div>- result2: </div><br><div>- try3: </div><div>- result3: </div><div>- 启发: </div>';

            } else if (txt === '今') {
              str += '<div>' + todayAdd + '</div>';

            } else if (txt === '清') {
              str = '';
            } else { // 回顶部
              oquesConwrapper.scrollTop = -35;
            }
            oquesCon.innerHTML = str;
          }
        }

        function toMainSquare(num, itemnum = null) { // 0 收集箱 1标签 2链接互用(2处引用 3473 6212) 3问题记录  4项目管理
          if (omorefunpart.classList.contains('open') && num === numOfSection) { // 当前页关闭、
            if (num === 4) {
              itemClose();
            }
            opages.style = '';
            let scrollnum = opages.getAttribute('data-top');
            window.scrollTo(0, scrollnum);

            omoreSections[num].classList.remove('active');
            omorefunpart.classList.remove('open');
            numOfSection = -1;
            if (num === 0) {
              datacollectSave();
            }
            if (num === 3) {
              conToquestxt();
            }

          } else {
            if (omorefunpart.classList.contains('open')) { // 关闭旧的打开新的
              if (numOfSection === 4) {
                itemClose();
              }
              omoreSections[numOfSection].classList.remove('active');
              if (numOfSection === 0) {
                datacollectSave();
              }
              if (num === 0) { // 
                datacollectshow(datacollectbox, ocollectUl);
              }
              if (num === 3) {
                conToquestxt();
              }

            } else { // 从关闭到打开
              let scroll = document.documentElement.scrollTop || document.body.scrollTop || 0;
              if (newpartshow === 0) {
                scroll = scroll;
              }
              opages.style.position = 'fixed';
              opages.style.top = '-' + scroll + 'px';
              opages.style.width = '100%';
              opages.setAttribute('data-top', scroll);
              omorefunpart.classList.add('open');
              if (num === 0) { // 其他情况已在保存里实现
                tempcheckcountnum = 0;
                ocollectPnums[1].innerHTML = tempcheckcountnum;
                datacollectshow(datacollectbox, ocollectUl);
              }
            }
            omoreSections[num].classList.add('active');
            numOfSection = num;
            if (num === 1 && osetting.classList.contains('active')) {
              settingOpen(); 
            }
            if (num === 2) { // 2链接互用 链接变动-修改  
              hotlinkload('use');
            }
            if (num === 4) {
              itemOpen(itemnum);
            }

          }
        }

        var oeasylinks = toGet('easylink', 'classname', true);

        function linknectShowFun() { // 展示
          var inputs = opartDl.querySelectorAll('input');
          var olink = localGet('linkconnect', 'object');
          if (olink) {
            linkconnect = olink;
            for (let i = 0; i < 11; i++) {
              let x = i + '';
              if (linkconnect[x]) {
                let item = linkconnect[x];
                if (item.length >= 2) {
                  inputs[i].setAttribute('placeholder', '(' + item[1] + ')');
                } else {
                  inputs[i].setAttribute('placeholder', '(' + item[0] + ')');
                }
                // 处理下链接 
                oeasylinks[i].innerHTML = '<span onclick = toLink("' + item[0] + '")></span>';
                oeasylinks[i].classList.add('active');
              } else {
                inputs[i].setAttribute('placeholder', '(未设置)');
                oeasylinks[i].classList.remove('active');
              }
            }
          } else {
            linkconnect = {};
            for (let i = 0; i < 11; i++) {
              inputs[i].setAttribute('placeholder', '(未设置)');
              oeasylinks[i].classList.remove('active');
            }
          }
        }

        var ofunbtns = omorefunpart.querySelectorAll('.funbtns span');
        ofunbtns[0].onclick = function() { // 清空互用数据
          localDel('linkconnect');
          linknectShowFun();
        }
        ofunbtns[1].onclick = function() { // 确认修改
          var inputs = opartDl.querySelectorAll('input');
          var obj = linkconnect;
          for (let i = 0; i < 11; i++) {
            let val = inputs[i].value.trim();
            let num = val * 1;
            let x = i + '';
            let itemlist = [];
            if (val !== '') {
              // 输入的是数字或网址
              if (/^[http|https]+:\/\/[\S]+/.test(val)) {
                // itemlist[0] = val;
                obj[x] = [val];
                inputs[i].value = '';
              } else if (!isNaN(num) && typeof num === 'number' && num < linklist.length) {
                let r1 = /([http|https]+:\/\/[\S]+)"[\)）]+/;
                let r2 = /\>([\u4E00-\u9FA5A-Za-z0-9_-\|]+)\<\//;
                let olink = linklist[val];
                if (r1.test(olink) && r2.test(olink)) {
                  itemlist[0] = r1.exec(olink)[1];
                  itemlist[1] = r2.exec(olink)[1];
                  obj[x] = itemlist;
                  inputs[i].value = '';
                }

              }
            }
          }
          localSave('linkconnect', obj, 'object');
          linknectShowFun();
        }



        window.onload = function() {
          if (!window.utools) { // 网站 => MD不显示
            simplebtns[5].style.display = 'none';
          }
          periodHTML = oitemAllPeriod.innerHTML;
          filedlist = localGet('filedlist', 'object')?localGet('filedlist', 'object'):[];
          userdefinedfun();
          isToNotice();
          var badmoonstr = localGet('badmoon', 'string');
          badmoonRec(badmoonstr);
          sortBoxStr = localGet('collectSortBox', 'string');
          hotlinkload();
          hotlinkload('use');
          linknectShowFun(); // 显示自定义互用链接
          tolinkReferFun();
          refreshfun();
          refreshDetailFun();
          if(document.body.offsetWidth < 594){
            for(let ee = 0; ee < 5; ee++){
              parts[ee].classList.add('noEdit');
            }
            aside.classList.add('noEdit');
            fllists[0].classList.add('noEdit');
            fllists[2].classList.add('noEdit');
          }
          
          if (norefreshnote) {
            var oreferinput = toGet('referinput', 'classname');
            oreferinput.checked = true;
            asideToggle(oreferinput);
          }
          itemObj = localGet('itemObj', 'object')?localGet('itemObj', 'object'):{};
          strToList(sortBoxStr);
          everyDayDaka();
          showNote(0);
          loadMemory();
          osimpleWriteBox.focus();
          regularDetailFun();

        }


        function toNewPlugin() {
          if (window.utools) {
            utools.redirect('Markdown 笔记', '');
          }

        }
        // 首行menu的按钮 +笔记button
        var menuBtns = toGet('circlebtn', 'classname', true);
        menuBtns[0].onclick = function() { // 折叠或展开
          if (this.innerText === "展开") {
            for (let i = 0; i < parts.length; i++) {
              parts[i].style.display = "block";
              oheaders[i].setAttribute('data-id', '1');
            }
            this.innerText = "折叠";
          } else if (this.innerText === "折叠") {
            for (let i = 0; i < parts.length; i++) {
              parts[i].style.display = "none";
              oheaders[i].setAttribute('data-id', '0');
            }
            this.innerText = "展开";
          }

        }
        var oasideBtns = toGet('toRightBtn', 'classname', true);
        var aside = toGet('aside', 'classname');
        oasideBtns[0].onclick = function() {
          getTime();
          if (this.innerText === '>') {
            this.innerText = '<';
            aside.style.display = 'none';
            omain.classList.add('active');
          } else {
            this.innerText = '>';
            aside.style.display = 'block';
            omain.classList.remove('active');
          }
        }
        oasideBtns[1].onclick = function() {
          getTime();
          if (omain.offsetWidth < 666) {
            otoRightFixbtn.setAttribute('data-aside', '0');
            aside.classList.remove('fixed');
            otoRightFixbtn.classList.remove('active');
            otoRightFixbtn.innerText = '<';
          } else {
            aside.style.display = 'none';
            omain.classList.add('active');
            oasideBtns[0].innerText = '<';
          }
        }
        oasideBtns[2].onclick = function() {
          getTime();
          if (aside.classList.contains('fixed')) {
            aside.classList.remove('fixed');
            oasideBtns[2].title = '右侧栏完全显示出来';
          } else {
            aside.classList.add('fixed');
            oasideBtns[2].title = '右侧栏回归原位置';
          }
        }
        menuBtns[1].onclick = writeLayer; // 打开或关闭输入框
        var otowritebtn = toGet('towritebtn', 'classname');
        otowritebtn.onclick = writeLayer;
        var ototopbtn = toGet('totopbtn', 'classname');
        ototopbtn.onclick = function() {
          window.scrollTo(0, 0);
          // document.body.scrollTop = 0;
          opages.scrollIntoView(true);

        }
      

        function writeLayer(type = null, itemsign = null) {
          menuBtns[5].classList.remove('active');
          menuBtns[10].classList.remove('active');
          menuBtns[20].classList.remove('active');
          if (menuBtns[5].innerText !== '加入随记') {
            menuBtns[5].classList.add('active');
          } else {
            menuBtns[5].title = '写入小本本，不支持多项添加(快捷键Alt+Enter)';
          }
          if (menuBtns[1].innerText === "书写W") { // 显示框
            write.style.display = "block";
            writebox.focus();
            menuBtns[1].classList.add('active');
            menuBtns[1].innerText = "隐藏W";
            if (itemsign) {
              writebox.value = '@' + itemsign + ' ';
              menuBtns[20].classList.add('active');
              writeboxTips.innerText = '收集箱新增多项时，以@标志 开头，表每项都添加该标志（其他清单想要同样效果需点击自动处理）';
            }else{
              writeboxTips.innerText = '随记随感-解决问题时遇到的难点/关键点/技巧等方面的想法（用关键词写）';
            }
          } else if (type !== '刷新任务' && type !== '定期任务' && type !== '启动页自定义' && type !== '日期倒计时') { // 隐藏框
            menuBtns[1].innerText = "书写W";
            menuBtns[1].classList.remove('active');
            menuBtns[16].innerText = "设置";
            menuBtns[16].title = '去设置搜索范围';
            menuBtns[16].classList.remove('active');
            menuBtns[20].style.display = 'block';
            write.style.display = "none";
            // 隐藏按钮
            let btns = write.querySelectorAll(".btns .circlebtn");
            btns[3].classList.add("edit");
            btns[3].classList.remove("active");

            if (tmpValue === null) {
              btns[2].innerText = "加入随记";
              writebox.value = "";
            }
          }
          if (type === '刷新任务' || type === '定期任务' || type === '日期倒计时') {
            menuBtns[20].style.display = 'none';
            if (type === '刷新任务') {
              odorefreshtask.classList.add('active');
            } else {
              odorefreshtask.classList.remove('active');
            }
            orefreshbtn.classList.add('active');
            menuBtns[5].innerText = '加入随记';
            menuBtns[5].classList.remove('active');
          } else {
            orefreshbtn.classList.remove('active');
            odorefreshtask.classList.remove('active');
          }

        }
        var hasopenSidebox = 0;
        menuBtns[2].onclick = summPartToggle;

        function summPartToggle() { // 开启或关闭总结面板
          if (menuBtns[2].innerText === "总结") {
            floor.style.display = "block";
            menuBtns[2].classList.add('active');
            menuBtns[2].innerText = "关闭";
            document.body.style.overflow = 'hidden';
            oasidemenu.classList.add('hidding');
            if (omorefunpart.classList.contains('open')) {
              omorefunpart.classList.remove('open');
              hasopenSidebox = 1;
            }
          } else {
            menuBtns[2].innerText = "总结";
            floor.style.display = "none";
            menuBtns[2].classList.remove('active');
            document.body.style.overflow = 'auto';
            oasidemenu.classList.remove('hidding');
            if (hasopenSidebox) {
              omorefunpart.classList.add('open');
              hasopenSidebox = 0;
            }
          }
        }

        // 总结面板的内容
        var floor = toGet('upfloor', 'classname');
        var flcheckeds = floor.querySelectorAll("input");
        var oanalyzeCon = floor.querySelector('.analyzeCon');
        var fllists = document.querySelectorAll(".analyzeCon .list");
        // var oflstatus = floor.querySelector('.controlers');

        for (let j = 0; j < flcheckeds.length; j++) {
          flcheckeds[j].onclick = function() {
            let status = oanalyzeCon.getAttribute('data-num');
            if (flcheckeds[j].checked) {
              fllists[j].style.display = "block";
              status++;
            } else {
              fllists[j].style.display = "none";
              status--;
            }
            oanalyzeCon.setAttribute('data-num', status);
            if (status === 3) {
              oanalyzeCon.classList.remove('canbig');
            } else {
              oanalyzeCon.classList.add('canbig');
            }
          }
        }

        var osetting = toGet('setting', 'classname');
        var osettingpart = toGet('settingpart', 'classname');

        var osettingback = toGet('settingback', 'classname');
        var osettingbtn = toGet('settingbtn', 'classname');
        osettingback.onclick = settingOpen;
        osettingbtn.onclick = settingOpen;
        var oasidemenu = toGet('asidemenu', 'classname');

        function settingOpen() { // 打开设置页面
          let scroll = 0;
          let element = null;
          // 禁止主部分移动
          let val = osettingbtn.getAttribute('data-val');
          if (val === '1') { // 显示
            osetting.classList.add('active');
            osettingbtn.classList.add('active');
            osettingbtn.setAttribute('data-val', '0');
            osettingbtn.setAttribute('data-newpartshow', newpartshow);
            isOpenSetting = true;
            if (newpartshow < 0) {
              element = opages;
              scroll = document.documentElement.scrollTop || document.body.scrollTop || 0;
            } else {
              element = oshowings[newpartshow];
              scroll = window.scrollY || opages.scrollTop || 0;
              if (newpartshow !== 1) {
                scroll = scroll - 52;
              }
            }
            osettingbtn.setAttribute('data-scroll', scroll);
            element.style.position = 'fixed';
            element.style.top = '-' + scroll + 'px';


          } else { // 隐藏
            osetting.classList.remove('active');
            osettingbtn.classList.remove('active');
            osettingbtn.setAttribute('data-val', '1');
            let scrollnum = osettingbtn.getAttribute('data-scroll') * 1;
            isOpenSetting = false;
            let truepart = osettingbtn.getAttribute('data-newpartshow') * 1;
            if (newpartshow < 0) { // 去主页
              if (truepart !== newpartshow) { // 其他页-》主页
                oshowings[truepart].style = 'display:none;';
              } else { // 主编辑页和简版切换 
                opages.style = '';
                window.scrollTo(0, scrollnum);
              }
            } else if (newpartshow > -1) { // 去其他页
              if (truepart === newpartshow) { // 没动
                oshowings[truepart].style = 'display:block;';
                let ischange = osettingbtn.getAttribute('data-change');
                if (ischange && ischange === '1') {
                  scrollnum = -52;
                  osettingbtn.setAttribute('data-change', '0')
                }
                if (newpartshow !== 1) {
                  window.scrollTo(0, scrollnum + 52);
                } else {
                  window.scrollTo(0, scrollnum);
                }
              } else if (truepart < 0) { // 动了-主页到其他页
                opages.style = '';
                window.scrollTo(0, 0);
              } else { // 动了-其他页到其他页
                oshowings[truepart].style = 'display:none;';
              }
            }
          }
        }

        // 反向
        var concheckeds = document.querySelectorAll(".mainpart .controlers input");
        for (let j = 0; j < concheckeds.length; j++) {
          concheckeds[j].onclick = function() {
            if (j === 0) {
              selectReverse(dolist);
            } else if (j === 1) {
              selectReverse(daylist);
            } else if (j === 2) {
              selectReverse(waitlist);
            }
          }
        }

        function selectReverse(obj) {
          var items = obj.querySelectorAll("b");
          var checkeds = obj.querySelectorAll("input");
          for (let k = 0; k < checkeds.length; k++) {
            if (checkeds[k].checked) {
              checkeds[k].checked = false;
              if (items[k].classList.contains("finish")) {
                items[k].classList.remove("finish");
                items[k].parentElement.classList.remove("finish");
              }
            } else {
              checkeds[k].checked = true;
              items[k].classList.add("finish");
              items[k].parentElement.classList.add("finish");
            }
          }

        }
        menuBtns[3].onclick = function() { // 清空
          writeboxTips.innerText = '随记随感-解决问题时遇到的难点/关键点/技巧等方面的想法（用关键词写）';
          inputDeleteFun(writebox);
        }

        function inputDeleteFun(inputbox) {
          var val = inputbox.value.trim();
          var noelse = true;
          if (val.indexOf('@急') !== -1 || val.indexOf('@重') !== -1) {
            val = val.replace(/[\s]?@急/g, '');
            val = val.replace(/[\s]?@重/g, '');
            noelse = false;
          }
          if (regexDate.test(val)) {
            val = val.slice(0, -10);
            noelse = false;
          }
          if (noelse) {
            inputbox.value = "";
          } else {
            inputbox.value = val;
          }
          inputbox.focus();
        }
        menuBtns[4].onclick = quickTodo; // 快速添加
        function quickTodo() {
          var val = writebox.value.trim();
          if (val && !/[$\^&]/.test(val)) {
            let list = addToList(val, 'dolist');
            if (list.length !== 0) {
              saveData();
              getNum(list);
              beforeData['tmpDolist'] = list;
              localSave('dolist', list.join('*'));
              datasolve(list, dolist);
              changeFinishProgress();
            }
            if (tempInputWrong.length !== 0) {
              writeboxTips.innerText = '( 上面内容不规范，添加失败，请删除链接外的<或>。【确保：每项的链接位置同时占据头尾或只在中间】 )';
              tempInputWrong = [];
            } else {
              writeboxTips.innerText = '( 事项已成功加入执行清单 )';
            }
          } else {
            writeboxTips.innerText = '( 请输入正确内容，注意不包含$^&字符 )';
          }
          writebox.focus();
        }

        menuBtns[5].onclick = inputDataSet;
        var tempInputWrong = [];

        function addToList(val, type) {
          tempInputWrong = [];
          let lis = [];
          let isIllegal = false;
          let oUl = solveUl;
          if (type === 'dolist') {
            oUl = dolist;
          }
          if (type === 'checkList') {
            oUl = places[0];
          }
          if (/\*+/.test(val)) { // 多项添加 *分隔
            lis = val.trim().split("*");
          } else {
            lis[0] = val;
          }
          
          let index = oUl.querySelectorAll("li").length;
          for (let i = 0; i < lis.length; i++) {
            let finalVal = lis[i].trim();
            if (finalVal) {
              var valResult = isSaveItem(finalVal);
              if ((valResult && isNowALink) || (valResult && !/toLink/.test(valResult))) {
                if(type === 'testItemID' && /\s@[a-z-_0-9]+$/g.test(finalVal)){
                  let temp = /\s@([a-z-_0-9]+)$/g.exec(finalVal);
                  let itemid = temp?temp[1]:null;
                  if(itemid && existItem.indexOf(itemid) !== -1 || itemid && filedlist.indexOf(itemid) !== -1){ // 已存在的编号失效
                    let idx = valResult.lastIndexOf('@');
                    finalVal = valResult.slice(0, idx);
                  }else{
                    finalVal = valResult;
                  }
                  
                }else{
                  finalVal = valResult;
                }
              } else {
                tempInputWrong.push(finalVal);
                isIllegal = true;
                continue;
              }
              let liItem =
                '<label><input type="checkbox" value=""/><span class="cbox" onclick="checkIt(event)"></span><b class="item"  onclick="checkIt(event)">' +
                finalVal +
                '</b></label><div class="smallcontrol"><span class="writebtn line" onclick="lineEdit(event)"></span><span class="deletebtn line" onclick="lineDelete(event)">×</span></div>';

              let li = document.createElement('li');
              li.setAttribute("data-id", index + i);
              li.innerHTML = liItem;
              oUl.appendChild(li);

              if (solveUl == daylist && valResult && isNowALink && regexDate.test(valResult)) {
                writeboxTips.innerText = '( 注意：日历清单日期和链接同时使用时剩余天数将不进行提示 )';
              }
            }
          }

          if (isIllegal) {
            writebox.value = tempInputWrong.join('*');
          } else {
            writebox.value = "";
          }
          if (type === 'dolist') {
            let list = getList(oUl);
            beforeData['tmpDolist'] = list;
            return list;
          } else if (type === 'checkList') {
            let list = getList(oUl);
            return list;
          } else {
            let classname = oUl.getAttribute("class");
            findList(classname);
          }

        }

        var osimpleWriteBox = toGet('simpleWriteBox', 'classname');
        var obuttonline = toGet('buttonline', 'classname');
        obuttonline.onclick = function(e) {
          var event = e || window.event;
          var ele = event.target || event.srcElement;
          if (ele.tagName === 'INPUT') {
            ele = ele.parentElement;
          }
          if (ele.tagName === 'LABEL') {
            var index = ele.getAttribute('data-index') * 1;
            ele.parentElement.setAttribute('data-index', index);
            // osimpleWriteBox.focus();  // 不生效？
          }
          if (ele.tagName === 'U') {
            toNewpart(3, 'review', 3);
          }
        }
        var otoknewbtn = document.querySelector('.rightside .toknewbtn'); // 收集箱的问号box
        otoknewbtn.onclick = function() {
          toMainSquare(0);
          if (newpartshow === 3) { // 帮助页已打开
            var olis = obookmenu.getElementsByTagName('li');
            olis[txtpartshow].classList.remove('active');
            txtparts[txtpartshow].classList.remove('active');
            olis[2].classList.add('active');
            txtparts[2].classList.add('active');
            txtpartshow = 2;
            window.scrollTo(0, 0);
          } else {
            toNewpart(3, 'question', 2);
          }
        }
        var osearchControl = toGet('searchControl', 'classname');
        var otopInput = toGet('topInput', 'classname');
        osearchControl.onclick = function(e) {
          var event = e || window.event;
          var ele = event.target || event.srcElement;
          var ospans = osearchControl.getElementsByTagName('span');
          if (ele.tagName === 'SPAN') {
            var index = ele.getAttribute('data-id');
            var nowindex = osearchControl.getAttribute('data-status');
            if (index === nowindex && nowindex !== '0') {
              ele.classList.remove('active');
              osearchControl.setAttribute('data-status', '0');
              otopInput.classList.remove('searching');
            } else {
              ospans[0].classList.remove('active');
              ospans[1].classList.remove('active');
              ele.classList.add('active');
              osearchControl.setAttribute('data-status', index);
              otopInput.classList.add('searching');
            }
          }
        }

        osimpleWriteBox.onkeydown = function(e) {
          var event = e || window.event;
          if (event.keyCode === 13) {
            var status = osearchControl.getAttribute('data-status') * 1;
            var val = osimpleWriteBox.value;
            if (status) {

              if (status === 2) {
                toMainSquare(1);
                if (val) {
                  tosearchtag(val);
                }
              } else if (status === 1) {
                webSearchFun('mainpart');
              }
            } else {
              var index = obuttonline.getAttribute('data-index') * 1;
              if (index < 6) {
                inputDataSet(index);
              } else {
                if (/^@[a-z-_\u4e00-\u9fa5]+\s/.test(val)) {
                  let pre = val.slice(0, val.indexOf(' '));
                  inputcollect(null, pre);
                } else {
                  inputcollect();
                }
              }
              osimpleWriteBox.focus();
            }
          }
        }

        var otagsearch = toGet('tagsearch', 'classname');
        var otagmakebtn = toGet('tagmakebtn', 'classname');
        var otagmenu = toGet('tagmenu', 'classname');
        var otagmenudecor = toGet('tagmenudecor', 'classname');
        var otagConwrapper = toGet('tagCon-wrapper', 'classname');
        var tagUls = document.querySelectorAll('.tagContent ul');
        otagsearch.onkeydown = function(e) {
          var event = e || window.event;
          var val = otagsearch.value;
          if (event.keyCode == 13) {
            // 实现标签搜索功能
            tosearchtag(val);
          }
        }

        function tosearchtag(things) {
          otagsearch.focus();
          let finalfind = things;
          let type = 'txt';
          let [list00, list11, list22, list33] = [
            [],
            [],
            [],
            []
          ];
          let searchRecord = false;
          let itemidFind = false;
          if (finalfind === '#全部') {
            finalfind = '';
          } else if (finalfind === '#今天') {
            // 加上五个清单项和开启的刷新任务

            [list00, list11, list22, list33] = datatagsolve(today, 'today');
            type = 'date';
            finalfind = todayAdd;
          } else if (finalfind === '#记忆') {
            type = 'justmemory';
            finalfind = '';
          } else if (finalfind === '本本') {
            finalfind = '「本本」';
          } else if (finalfind === '收藏') {
            [list00, list11, list22, list33] = datatagsolve('「链接」');
            finalfind = '「参考」';
          } else if (finalfind === '搜索记录') {
            finalfind = '';
            searchRecord = true;
          } else if(finalfind.indexOf('@@') === 0){
            let trueitem = finalfind.slice(2);
            existItem = localGet('existItem', 'object')?localGet('existItem', 'object'):['模板'];
            if(existItem.indexOf(trueitem) !== -1){
              itemidFind = true;
            }
          } else {
            if (regexDate.test(finalfind)) {
              let tmpdate = finalfind.replace(/[-]+/g, '/');
              [list00, list11, list22, list33] = datatagsolve(tmpdate);
              type = 'date';
            }
          }
          otagsearch.value = finalfind;
          if (searchRecord) { // 搜索记录
            // recordChoseStr = localGet('searchData', 'string')?localGet('searchData','string'):'';
            let txt = recordChoseStr ? recordChoseStr.replace(/\^/g, '\n') : '';
            if (odownloadnowbtn.innerText === '编辑模式') {
              isTagEditshow();
            }
            otagDownCon.innerText = txt ? '【搜索记录】 搜索位置：内容' + txt : '暂无搜索记录';
          } else if(itemidFind){
            let itemid = finalfind.slice(2);
            let title = itemObj[itemid][3]?itemObj[itemid][0]+itemObj[itemid][3]:itemObj[itemid][0];
            let tip = itemObj[itemid][2]?itemObj[itemid][2]:'';
            let obj = itemObj[itemid][1]?itemObj[itemid][1]:{};
            let txt1 = '## '+title+' \n'+tip+'\n';
            for(let item in obj){
              let obbj = obj[item][1];
              txt1 = txt1 + '### ' + obj[item][0] + '\n> plan('+obbj['plan'].length+')\n';
              let txt2 =  obbj['plan'].length > 0 ? '- '+ obbj['plan'].join('\n- ') + '\n':'';
              txt1 = txt1 + txt2 + '> todo('+obbj['todo'].length+')\n';
              let txt3 =  obbj['todo'].length > 0 ? '- '+ obbj['todo'].join('\n- ') + '\n':'';
              txt1 = txt1 + txt3 + '> done('+obbj['done'].length+')\n';
              let txt4 =  obbj['done'].length > 0 ? '- '+ obbj['done'].join('\n- ') + '\n\n':'\n';
              txt1 = txt1 + txt4;
            }
            if (odownloadnowbtn.innerText === '编辑模式') {
              isTagEditshow();
            }
            otagDownCon.innerText = txt1;
          } else {
            var [list0, list1, list2, list3] = datatagsolve(finalfind, type);
            if (type === 'date' || finalfind === '「参考」') {
              list0 = list0.concat(list00);
              list1 = list1.concat(list11);
              list2 = list2.concat(list22);
              list3 = list3.concat(list33);
            }
            if (finalfind === '「参考」') {
              otagsearch.value = '';
            }
            datatagshow(list0, tagUls[0]);
            datatagshow(list1, tagUls[1]);
            datatagshow(list2, tagUls[2]);
            datatagshow(list3, tagUls[3]);
            if (odownloadnowbtn.innerText === '查看模式') {
              otagDownCon.innerText = tagdownloadEdit();
            }
          }
          tojumptagmenu('0');
        }

        function datatagshow(list, obj) {
          let str = '';
          for (let m = 0; m < list.length; m++) {
            str += '<li>' + list[m] + '</li>';
          }
          obj.innerHTML = str;
        }
        otagmakebtn.onclick = function() {
          let val = otagsearch.value.trim();
          if (val && /[^|]+$/.test(val)) {
            var tmp = isSaveItem(val);
            if (tmp && !isNowALink) {
              let str = localGet('taglist', 'object');
              if (str) {
                taglist = str;
              } else {
                taglist = [];
              }
              taglist.push(tmp);
              localSave('taglist', taglist, 'object');
              showCustomize(taglist, 'tag', otagstatus);
            }
          }
        }
        otagmenu.onclick = function(event) {
          let ele = event.target || event.srcElement;
          if (ele.tagName === 'LI') {
            let index = ele.getAttribute('data-menu');
            tojumptagmenu(index);
          }
        }

        function tojumptagmenu(index) {
          let oldindex = otagmenu.getAttribute('data-menu');
          let lis = otagmenu.querySelectorAll('li');
          lis[oldindex].classList.remove('active');
          otagmenu.setAttribute('data-menu', index);
          lis[index].classList.add('active');
          if (index === '1') {
            otagmenudecor.className = 'tagmenudecor off';
          } else if (index === '0') {
            otagmenudecor.className = 'tagmenudecor';
          } else {
            otagmenudecor.className = 'tagmenudecor task';
          }
          let top = tagUls[index].offsetTop - 50;
          otagConwrapper.scrollTop = top; // 此处的top的值是数值
        }
        var ocollectUl = toGet('collectUl', 'classname');
        var osavecollectbtn = toGet('savecollectbtn', 'classname');
        var oclassifybtn = toGet('classifybtn', 'classname');
        var ocardecor = toGet('cardecor', 'classname');
        var ocollectGuide = toGet('collectGuide', 'classname');
        var nowSolveList = 0;
        osavecollectbtn.onclick = datacollectSave;

        function datacollectSave() {
          // 存数据 （总数计算 序列排列）
          let list = getList(ocollectUl);
          datacollectbox = list;
          localSave('collect', datacollectbox, 'object');
          datacollectshow(datacollectbox, ocollectUl); // 为了让序号生效 总数计算
          tempcheckcountnum = 0;
          ocollectPnums[1].innerHTML = tempcheckcountnum;
        }
        oclassifybtn.onclick = collectsolveFun;
        ocardecor.onclick = collectsolveFun;

        function collectsolveFun() {
          datacollectbox = solveAll(ocollectUl); // 剩下的项的数组
          localSave('collect', datacollectbox, 'object');
          if (datacollectbox.length > 0) {
            datacollectshow(datacollectbox, ocollectUl);
            // 待处理的数组  datacollectchange
            nowSolveList = ocollectGuide.getAttribute('data-num') * 1;
            let name = datalist[nowSolveList];
            findList(name);
            // debugger
            if (nowSolveList < 5) {
              inputDataSet(-2, 'solve', datacollectchange.join('*'));
            } else if (nowSolveList === 5) { // 参考资料
              beforeData.tmpReference = beforeData['tmpReference'].concat(datacollectchange);
              saveData();
              datashow(beforeData.tmpReference, reference);
            } else if (nowSolveList === 6) { // 回收箱
              beforeData.tmpRecycle = datacollectchange.concat(beforeData['tmpRecycle']);
              saveData();
              datasimpleshow(beforeData.tmpRecycle, recycle);
            }
          }
          ocollectPnums[1].innerText = '0';
          tempcheckcountnum = 0;
        }
        ocollectGuide.onclick = function(e) {
          var ele = e.target || e.srcElement;
          if (ele.tagName === 'INPUT') {
            ele = ele.parentElement;
          }
          if (ele.tagName === 'LABEL') {
            var labels = ocollectGuide.getElementsByTagName('label');
            let list = [5, 6, 4, 3, 0, 1, 2];
            let old = list[nowSolveList * 1];
            labels[old].classList.remove('active');
            nowSolveList = ele.getAttribute('data-num');
            ocollectGuide.setAttribute('data-num', nowSolveList);
            let newone = list[nowSolveList * 1];
            labels[newone].classList.add('active');
          }
        }

        function inputcollect(type, pre = null) {
          let list = [];
          var name = '';
          if (type === 'writebox') {
            var val = writebox.value.trim();
          } else {
            var val = osimpleWriteBox.value.trim();

          }
          if (val && /[$\^&]/.test(val)) {
            writeboxTips.innerText = '( 请输入正确内容，注意不包含$^&字符 )';
            val = false;
            name = 'red';
          }

          val = isSaveItem(val, null);
          if ((val && isNowALink) || (val && !/toLink/.test(val))) {
            if (/\*/.test(val)) {
              if (pre) {
                val = val.replace(/\*/g, '*' + pre + ' ');
              }
              list = val.split('*');
            } else {
              list[0] = val;
            }
            datacollectbox = list.concat(datacollectbox);
            localSave('collect', datacollectbox, 'object');
            solveUl = ocollectUl;
            nowlistStr = "collectUl";
            // 用findList(name)能找到上面两个，name从元素ul的classname获取
            ocollectPnums[0].innerText = datacollectbox.length;
            datacollectshow(datacollectbox, ocollectUl);
            name = 'green';
            if (type === 'writebox') {
              writebox.value = '';
              writeboxTips.innerText = '( 事项已成功加入收集箱 )';
            } else {
              osimpleWriteBox.value = '';
            }
          } else {
            name = 'red';
          }

          if (type !== 'writebox') {
            osimpleWriteBox.classList.add(name);
            setTimeout(function() {
              osimpleWriteBox.classList.remove(name);
            }, 2000);
          }
        }

        function inputDataSet(model, type, data = null) {
          // model = 012345 
          var val = '';
          var isopen = false;
          var name = '';
          if (model > -1) {
            val = osimpleWriteBox.value.trim();
            isopen = true;
            if (model == 5) { // model=5
              nowlistStr = "summaryList";
              solveUl = places[2];
              if (data) {
                val = data;
              }
            } else { // model=01234
              var classname = datalist[model];
              findList(classname);
            }
          } else if (data) {
            val = data;
          } else {
            val = writebox.value.trim();
          }
          if (val && /[$\^&]/.test(val)) {
            writeboxTips.innerText = '( 请输入正确内容，注意不包含$^&字符 )';
            val = false;
            name = 'red';
          }

          if ((menuBtns[5].innerText === "添加项*" && val) || (model < 5 && val) || (val && type === 'solve')) {
            if((menuBtns[5].innerText === "添加项*" && val && solveUl === project) || (model === 3 && val) ){
              addToList(val, 'testItemID');
            }else{
              addToList(val);
            }
            let list = getList(solveUl);
            if (list.length !== 0) {
              beforeData[nowlistStr] = list;
              saveData();
              if (nowlistStr === "tmpDolist" || nowlistStr === "tmpDaylist" || nowlistStr === "tmpWaitlist") {
                getNum(list);
                datasolve(list, solveUl);
              }
              if (nowlistStr === "tmpProject" || nowlistStr === "tmpMaylist") {
                datashow(list, solveUl);
              }
              if (nowlistStr === "tmpDaylist") {
                outOfTime();
              }
              if (nowlistStr === "tmpDolist") {
                localSave('dolist', list.join('*'));
              }
              changeFinishProgress();
              if (tempInputWrong.length !== 0) {
                writeboxTips.innerText = '( 上面内容不规范，添加失败，请删除链接外的<或>。【确保：每项的链接位置同时占据头尾或只在中间】 )';
                tempInputWrong = [];
                name = 'red';
              } else {
                writeboxTips.innerText = '( 新项添加成功 )';
                name = 'green';
              }
              if (!model > -1) {
                writebox.focus();
              }
            }

          } else if (val) {
            val = isSaveItem(val, null);
            if ((val && isNowALink) || (val && !/toLink/.test(val))) {
              if (menuBtns[5].innerText === "加入随记" || model === 5) {
                beforeData.summaryList[beforeData.summaryList.length] = val;
                // localSave('summarylist', beforeData.summaryList, 'object');
                datasimpleshow(beforeData.summaryList, places[2]);
                writebox.value = "";
                writeboxTips.innerText = '( 笔记写入小本本了，可点击总结按钮查看 )';
                name = 'green';
                if (model !== 5 && type !== 'morewritebox') {
                  writebox.focus();
                }
              } else if (menuBtns[5].innerText === "确定修改") {
                menuBtns[1].innerText = '隐藏W';
                // 确定修改 需要获取当前列表 修改项 修改内容val
                var temp = val;
                if (tmpNode) {
                  if (isNowALink) {
                    temp = linkSolved(val, 'resetLink');
                  }

                  tmpNode.innerHTML = temp;
                  tmpNode.style.color = "orange";
                  
                  let classname = solveUl.getAttribute("class");
                  findList(classname);
                  let isclose = true;
                  let isvalDel = true;
                  if(nowlistStr === 'tmpProject'){
                    let finalVal = temp;
                    let item = /\s@([a-z-_0-9]+)$/g.exec(temp);
                    let itemid = item?item[1]:null;
                    let oldid = tmpNode.parentElement.getAttribute('data-sign');
                    if(itemid && existItem.indexOf(itemid) !== -1 || itemid && filedlist.indexOf(itemid) !== -1){
                      let idx = temp.lastIndexOf('@');
                      finalVal = temp.slice(0, idx);
                      if(oldid){
                        finalVal = finalVal + ' @'+ oldid;
                        writeboxTips.innerText = '( 由于目前项目编号 ' + itemid + ' 已存在（无法添加），修改结果已还原原来编号'+oldid+' )';
                      }else{
                        writeboxTips.innerText = '( 由于目前项目编号 ' + itemid + ' 已存在，修改结果已删除该编号 )';
                      }
                      isclose = false;
                    }else if(itemid && oldid){
                      writeboxTips.innerText = '( 项目编号由 ' + oldid + ' 变为 '+itemid+'，原有该项目关联的内容将失去关联 )';
                      isclose = false;
                    }else if(oldid && !itemid){
                      writeboxTips.innerText = '( 删除了项目编号 ' + oldid + ' ，原本关联的内容将失去关联 )';
                      isclose = false;
                      isvalDel = true;
                    }
                    tmpNode = null;
                    tmpValue = null;
                    beforeData['tmpProject'][changeId] = finalVal;
                    datashow(beforeData.tmpProject, project);
                  }else{
                    beforeData[nowlistStr][changeId] = temp;
                  }
                  if(isclose){
                    writebox.value = "";
                    writeLayer();
                  }
                } else {
                  writeboxTips.innerText = '( 选择对象出错了 )';
                }
                if (nowlistStr === "tmpDaylist") {
                  outOfTime();
                }
                if (nowlistStr === "tmpDolist") {
                  localSave('dolist', beforeData['tmpDolist'].join('*'));
                }
              }
              saveData(1);
            } else {
              writeboxTips.innerText = '( 内容不规范，请删除链接外的<或>。【确保：每项的链接位置同时占据头尾或只在中间】 )';
              name = 'red';
            }
          }
          var boxtoWrite = null;
          if (model > -1) {
            boxtoWrite = osimpleWriteBox;
          }
          if (type === 'morewritebox') {
            boxtoWrite = omorewritebox;
          }
          if (model > -1 && name) {
            boxtoWrite.classList.add(name);
            if (name === 'green') {
              boxtoWrite.value = '';
            } else {
              boxtoWrite.value = boxtoWrite.value + ' (注意删除字符$^&) ';
            }
            setTimeout(function() {
              boxtoWrite.classList.remove(name);
            }, 2000);
          }
        }



        function getNum(list) { // 未完成事件数量
          // 事件数的计算 表的更新
          let num = list.length;
          if (nowlistStr === "tmpDolist") {
            thingsNums[0].innerText = num;
          } else if (nowlistStr === "tmpDaylist") {
            thingsNums[1].innerText = num;
          } else if (nowlistStr === "tmpWaitlist") {
            thingsNums[2].innerText = num;
          }
        }
        menuBtns[6].onclick = function() { // 标红修改
          menuBtns[1].innerText = '隐藏W';
          var val = writebox.value.trim();
          if (val && /[$\^&]/.test(val)) {
            writeboxTips.innerText = '( 请输入正确内容，注意不包含$^&字符 )';
            val = false;
          }
          if (val) {
            val = isSaveItem(val, null);
            if ((tmpNode && val && isNowALink) || (tmpNode && val && !/toLink/.test(val))) {
              let temp = val;
              if (isNowALink) {
                temp = linkSolved(val, 'resetLink');
              }
              tmpNode.innerHTML = temp;
              tmpNode.style.color = "red";
              tmpNode = null;
              tmpValue = null;
              let classname = solveUl.getAttribute("class");
              findList(classname);
              
              beforeData[nowlistStr][changeId] = temp;
              if (nowlistStr === "tmpDaylist") {
                outOfTime();
              }
              if (nowlistStr === "tmpDolist") {
                localSave('dolist', beforeData['tmpDolist'].join('*'));
              }
              saveData(1);
              // writebox.value = "";
              writeLayer();
            } else {
              writeboxTips.innerText = '( 内容不规范，请删除链接外的<或>。【确保：每项的链接位置同时占据头尾或只在中间】 )';
            }
          }
        }

        menuBtns[7].onclick = function() { // 参考卡
          var val = writebox.value.trim();
          if (val && /[$\^&]/.test(val)) {
            writeboxTips.innerText = '( 请输入正确内容，注意不包含$^&字符 )';
            val = false;
          }
          if (val) {
            val = isSaveItem(val, null);
            if ((val && isNowALink) || (val && !/toLink/.test(val))) {
              beforeData.tmpReference[beforeData.tmpReference.length] = val;
              saveData();
              datashow(beforeData.tmpReference, reference);
              writeboxTips.innerText = '( 参考卡新项提交成功 )';
              writebox.value = '';
            } else {
              writeboxTips.innerText = '( 内容不规范，请删除链接外的<或>。【确保：每项的链接位置同时占据头尾或只在中间】 )';
            }
          }
          writebox.focus();
        }

        menuBtns[8].onclick = function() { // 检查卡
          var val = writebox.value.trim();
          if (val && /[$\^&]/.test(val)) {
            writeboxTips.innerText = '( 请输入正确内容，注意不包含$^&字符 )';
            val = false;
          }
          if (val) {
            let lis = addToList(val, 'checkList')
            if (lis.length !== 0) {
              beforeData.checkList = lis;
              datasimpleshow(beforeData.checkList, places[0]);
              localSave('checklist', beforeData.checkList, 'object');
            }
            if (tempInputWrong.length !== 0) {
              writeboxTips.innerText = '( 上面内容不规范，添加失败，请删除链接外的<或>。【确保：每项的链接位置同时占据头尾或只在中间】 )';
              tempInputWrong = [];
            } else {
              writeboxTips.innerText = '( 检查卡新项提交成功 )';
            }
          }
          writebox.focus();
        }

        menuBtns[9].onclick = function() { // 记忆单的保存
          var val = writebox.value.trim();
          if (val && /[$\^&]/.test(val)) {
            writeboxTips.innerText = '( 请输入正确内容，注意不包含$^&字符 )';
            val = false;
          }
          if (val) {
            getTime();
            val = isSaveItem(val, null);
            var tip = "（记忆项添加成功！）";
            var regex = /记忆项添加成功/g;
            if ((val && !regex.test(val) && isNowALink) || (val && !regex.test(val) && !/toLink/.test(val))) {
              if (omemory[todayAdd]) {
                omemory[todayAdd] = omemory[todayAdd] + "~" + val;
              } else {
                omemory.origin = todayAdd;
                omemory[todayAdd] = val;
              }
              localSave('memoryObj', omemory, 'object');
              writebox.value = val + "  " + tip;
              writeboxTips.innerText = '( 注意: 记忆项文本中[]括起来的部分可在主动回忆模式下隐藏哦 )';
            } else if (!regex.test(val)) {
              writeboxTips.innerText = '( 内容不规范，请删除链接外的<或>。【确保：每项的链接位置同时占据头尾或只在中间】 )';
            } else {
              writeboxTips.innerText = '( 请勿重复添加 )';
            }
          }
        }

        menuBtns[10].onclick = function() { // 加日期
          getTime();
          var val = writebox.value;
          let ttday = '';
          if (/[\d]+天后/.test(val) || /明天/.test(val) || /后天/.test(val)) {
            let times = 0;
            if (/明天/.test(val)) {
              times = 1;
            } else if (/后天/.test(val)) {
              times = 2;
            } else {
              times = /([\d]+)天后/.exec(val)[1];
            }
            let d = now + times * 86400000;
            let timer = new Date(d);
            let month = timer.getMonth() + 1;
            let date = timer.getDate();
            ttday = ' ' + timer.getFullYear() + "-" + formatDate(month) + "-" + formatDate(date);
          } else {
            ttday = ' ' + todayAdd;
          }
          writebox.value = val + ttday;
          writeboxTips.innerText = '( 提示：日期需放在文本的末尾，这样日期排序或定期任务才生效哦 )';
        }

        menuBtns[11].onclick = function() { // 加链接
          writeboxTips.innerText = '<b class="link" onclick = toLink("【写网址】")>【写链接标题文字】</b>';
          var val = writebox.value;
          var item = false;
          if (/\[([\u4E00-\u9FA5A-Za-z0-9_-\s\|]+)\]\((http|https):\/\/[\w\d+&@#\/%?=~_|!:,.;-]+\S/g.test(val)) {
            item = linkSolved(val, 'mdtoLink');
            writebox.value = item;
          } else {
            if (regexDate.test(val)) {
              writebox.value = val.slice(0, -10) + '（<b class="link" onclick = toLink("")></b>）' + val.slice(-10);
            } else {
              writebox.value = val + '（<b class="link" onclick = toLink("")></b>）';
            }
          }

        }
        menuBtns[12].onclick = function() { // 确定任务内容
          // var orefreshbtn = toGet('setrefreshtask','classname');
          var val = writebox.value.trim();
          var txt = orefreshbtn.innerText;
          var temp = '';
          var isOk = true;
          val = val.replace(/\n/g, '');
          val = val.replace(/[\s]*\*[\s]*/g, '*');
          val = val.replace(/javascript/gi, 'javascript');
          if (val && /[$\^&]+/.test(val) || ((txt === '定义日期倒计时' || txt === '新增定期任务' || txt === '确定定期任务') && /toLink/.test(val))) {
            val = false;
          }
          if (val && !/javascript(?=\:)+/.test(val)) {
            if (txt === '定义日期倒计时' || txt === '新增定期任务' || txt === '确定定期任务') {
              if (!/\<[a-z]+\>/.test(val)) {
                if (regexDate.test(val)) {
                  let time = regexDate.exec(val);
                  if (isDate(time[1], time[2], time[3])) {
                    // 在更改之前要删掉之前的
                    let date = time[0];
                    
                    let d = Date.UTC(time[1], time[2] - 1, time[3]);
                    if (d >= now && txt !== '定义日期倒计时') {
                      if (!noticeDates) {
                        noticeDates = '^' + date;
                      } else if (noticeDates.indexOf(date) === -1) {
                        noticeDates += '^' + date;
                      }
                      localSave('noticeDates', noticeDates);
                    }else if(d < now){
                      writeboxTips.innerText = '( 该日期已过期了，请修改日期 )';
                      isOk = false;
                    }
                    if(txt === '定义日期倒计时' && isOk){
                      countdownFun(val);
                      countdownTxt = val;
                      ocountdowncon.innerText = val;
                      userDefined['countdown'] = val;
                      localSave('userDefined', userDefined, 'object');
                      writeboxTips.innerText = '( 日期倒计时设置成功，已在右上角显示 )';
                    }else if(txt === '确定定期任务' && isOk){
                      tmpTaskDate = date;
                      taskDelete(null, 'change');
                      if (tmpTaskDate === '原样修改呀') {
                        var oregular = localGet('regularObj', 'object');
                        if (oregular) {
                          regularObj = oregular;
                          let item = regularObj[date].join('^');
                          item = item.replace(tmpOldtask, val.slice(0, -11)); // 输入框的val去掉日期，不包括11位的空格
                          regularObj[date] = item.split('^');
                          localSave('regularObj', regularObj, 'object');
                          regularDetailFun('newadd');
                        }
                      
                        tmpTaskDate = null;
                      } else {
                        regularFun(val, date, d);
                        isToNotice();
                      }
                      writeboxTips.innerText = '( 定期任务设置成功，帮助页的特殊任务列表已刷新 )';
                    }
                    
                    
                    if (txt === '定义日期倒计时' && isOk || txt === '确定定期任务' && isOk) {
                      writebox.value = '';
                      writeLayer();
                    }
                  } else {
                    writeboxTips.innerText = '( 该日期不存在，请核查 )';
                  }
                } else {
                  writeboxTips.innerText = '( 日期判断失误，需要把2022-01-01格式的日期写在末尾 )';
                }
              } else {
                writeboxTips.innerText = '( 目前该项并不支持链接输入 )';
              }


            } else { //刷新任务部分
              // 预防出错：禁止嵌套输入
              let templist = val.split('*');
              for (let k = 0; k < templist.length; k++) {
                if (/toLink/.test(templist[k])) { // 去链接
                  let div = document.createElement('div');
                  div.innerHTML = templist[k];
                  temp = div.innerText;
                } else {
                  temp = templist[k];
                }
                temp = temp.trim().replace(/\n/g, '');
                // temp = temp.trim().replace(/\\/g, '\\');  // 文本中若有\会报错
                // temp = temp.trim().replace(/\//g, '\/');  // 文本中若有\会报错
                // let regex = new RegExp('(' + temp + ')', 'g');
                // debugger
                let firstIndex = val.indexOf(temp);

                if (templist.length > 1 && firstIndex !== -1 && val.substring(firstIndex + 1).indexOf(temp) !== -1) {
                  writeboxTips.innerText = '( 警告：不要输入两项包含关系的任务，请修改文本再确定任务 )';
                  isOk = false;
                  break;
                }
              }
              if (isOk) {
                if (txt === '确定日刷任务*') {
                  refreshlist[0] = val;
                } else if (txt === '确定周刷任务*') {
                  refreshlist[1] = val;
                } else if (txt === '确定月刷任务*') {
                  refreshlist[2] = val;
                }

                localSave('refreshlist', refreshlist, 'object');
                if (odorefreshtask.innerText === '开启任务') {
                  writeboxTips.innerText = '( 任务内容设置成功，可点击【开启任务】按钮开启任务 )';
                } else {
                  writeboxTips.innerText = '( 任务内容设置成功，列表已刷新 )';
                }

                refreshfun();
                refreshDetailFun();
                changeFinishProgress();
                writebox.value = '';
              }
            }

          } else if(txt === '定义日期倒计时' && val === ''){
            countdownTxt = '';
            ocountdownTxt.innerText = '';
            ocountdownTxt.classList.add('unshow');
            ocountdowncon.innerText = '（暂无）';
            userDefined['countdown'] = '';
            localSave('userDefined', userDefined, 'object');
            writeboxTips.innerText = '( 已删除该倒计时 )';
          } else {
            writeboxTips.innerText = '( 请输入正确内容，注意不包含$^&字符，目前' + txt.slice(2) + '不支持链接输入 )';
          }
        }
        menuBtns[13].onclick = function() { // 开启日刷周刷月刷任务
          // var odorefreshtask = toGet('dorefreshtask','classname');
          var isok = false;
          var txt = orefreshbtn.innerText;
          var list = refreshlist[3];
          if (txt === '确定日刷任务*' && refreshlist[0]) {
            list[0] = !list[0];
            resetTask('0', list[0]);
            isok = true;
          } else if (txt === '确定周刷任务*' && refreshlist[1]) {
            list[1] = !list[1];
            resetTask('1', list[1]);
            isok = true;
          } else if (txt === '确定月刷任务*' && refreshlist[2]) {
            list[2] = !list[2];
            resetTask('2', list[2]);
            isok = true;
          }
          if (isok) {
            var btntxt = odorefreshtask.innerText;
            if (btntxt === '开启任务') {
              odorefreshtask.innerText = '关闭任务';
            } else {
              odorefreshtask.innerText = '开启任务';
            }
            localSave('refreshlist', refreshlist, 'object');
            refreshfun();
            // console.log(refreshObj);
            refreshDetailFun();
            changeFinishProgress();
            // writeboxTips.innerText = '(操作成功!)';
            orefreshbtn.classList.remove('active');
            odorefreshtask.classList.remove('active');
            writeLayer();

          } else {
            writeboxTips.innerText = '( 提示：没内容是无法开启任务的，请先确定任务内容后再开启 )';
          }

          function resetTask(key, isnot) {
            if (isnot) {
              refreshObj[key] = refreshlist[key * 1];
            } else {
              refreshObj[key] = '';
            }
          }
        }


        var searchList = [
          'https://www.baidu.com/s?ie=UTF-8&wd=',
          'https://topbook.cc/search/article?keywords=',
          'https://search.bilibili.com/all?keyword=',
          'https://www.zhihu.com/search?q=',
          'https://so.csdn.net/so/search?q=',
          'https://www.jianshu.com/search?q=',
          'https://juejin.cn/search?query=',
          'https://segmentfault.com/search?q=',
          'https://weixin.sogou.com/weixin?type=2&query=',
          'https://www.yuque.com/search?q='
        ];
        var searchNameList = ['百度', 'topbook', 'B站', '知乎', 'CSDN', '简书', '掘金', '思否', '微信搜狗', '语雀'];
        var searchListIndex = 0;
        menuBtns[14].onclick = function() {
          toMainSquare(1);
          var val = writebox.value;
          tosearchtag(val);
          writebox.value = '';
          writeLayer();
        }
        menuBtns[15].onclick = webSearchFun; // 搜索
        menuBtns[16].onclick = function(e) {
          var ele = e.target || e.srcElement;
          var txt = ele.innerText;
          var name = ele.getAttribute('data-name');
          littleset('normal', txt, name);
        }

        function littleset(type = 'normal', txt = 'del', name) {
          var isOk = false;
          if (txt !== '设置') { // 确定做事类型 or 可用方法
            let val = writebox.value.trim();
            if (val && type !== 'newset') {
              val = val.replace(/\n/g, '');
              val = val.replace(/[\s]*/g, '');
              val = val.replace(/\*$/g, '');
              if (/^[-_\*\u4E00-\u9FA5A-Za-z0-9]+$/.test(val)) {
                userDefined[name] = val;
                isOk = true;
              } else {
                writeboxTips.innerText = '( 修改失败，只支持中英文数字和-_*符号输入 )';
              }
            } else if (type !== 'newset') {
              userDefined[name] = txtChooe[name];
              isOk = true;
            }

          } else if (txt === '设置') { // 设置搜索范围
            if (osettingbtn.getAttribute('data-val') === '1') {
              settingOpen();
            }

            // 滚动到底部的2个方法：
            // ① div.scrollTop = div.scrollHeight
            // osettingpart.scrollTop = osettingpart.scrollHeight;
            // ② div.scrollIntoView()
            // osettingpart.scrollIntoView(false); // 不能实现，原因？设置面板是一个固定定位？
            // ③ div.scrollTo(x,y), 此处792是osettingpart.scrollHeight
            osettingpart.scrollTo(0, osettingpart.scrollHeight);
          }

          if (isOk || type === 'newset') {
            var list = userDefined[name].split('*');
            var temlabel = '';
            var text = '';
            localSave('userDefined', userDefined, 'object');
            writeLayer();
            // 显示 odotype
            for (let item = 0; item < list.length; item++) {
              if (name === 'doType') {
                temlabel += '<label><input type="checkbox" name="thingsType" value="' + list[item] +
                  '" /><span class="cbox"></span>' + list[item] + '</label>';
              } else if (name === 'betterWay') {
                temlabel += '<label><input type="checkbox" name="vaSkills" value="' + list[item] +
                  '" /><span class="cbox"></span>' + list[item] + '</label>';
              }
            }
            if (name === 'doType') {
              var otaskType = toGet('taskTypeItems', 'classname');
              odotype.innerText = userDefined[name] || '……默认项……';
              otaskType.innerHTML = temlabel;
            } else if (name === 'betterWay') {
              var otaskSkill = toGet('taskSkillItems', 'classname');
              obetterway.innerText = userDefined[name] || '……默认项……';
              otaskSkill.innerHTML = temlabel;
            }
          }

        }
        var otoWebSearchBtn = toGet('toWebSearchBtn', 'classname');
        otoWebSearchBtn.onclick = function() {
          if (osettingbtn.getAttribute('data-val') === '1') {
            settingOpen();
          }
          osettingpart.scrollTo(0, osettingpart.scrollHeight);
        }

        function webSearchFun(type) {
          var val = '';
          if (type === 'start') { // 启动页的
            val = taskInput.value.trim();
          } else {
            val = osimpleWriteBox.value.trim() || writebox.value.trim();
            if (type === 'mainpart') {
              val = osimpleWriteBox.value.trim();
            }
            val = val.replace(/javascript/gi, 'javascript');
            if (/toLink+/.test(val) && !(/javascript(?=\:)+/.test(val))) {
              let temp = document.createElement('div');
              temp.innerHTML = val;
              val = temp.innerText;
            }
          }
          if (val) {
            var prelink = searchList[searchListIndex];
            var str = '';
            if(/^a\s/.test(val)){
              str = 'https://fanyi.baidu.com/?#zh/en/' + val.slice(2);
            }else{
              str = prelink + val;
            }
            toLink(str);
            if (userDefined['recordSearchChose']) {
              let record = '^' + searchNameList[searchListIndex] + '： ' + val;
              let oldstr = localGet('searchData', 'string') ? localGet('searchData', 'string') : '';
              recordChoseStr = oldstr + record;
              localSave('searchData', recordChoseStr);
            }
          }
        }
        menuBtns[17].onclick = function() {
          let val = writebox.value;
          let isSame = false;
          if (val.indexOf('[]') === 0) {
            // 进行把单词和含义分开，并将中文含义包裹起来
            val = wordsSolved(val);
          } else if (val.indexOf('-[]') === 0) {
            val = wordsSolved(val, 'reverse');
          } else if (val.indexOf('---') === 0) {
            val = val.slice(3).trim();
            val = val.replace(/(?<=\s)-/g, '*');
            isSame = true;
          } else if(/^(@[\u4e00-\u9fa5a-z-_0-9]+\s)/.test(val)){
            let item = /^(@[\u4e00-\u9fa5a-z-_0-9]+\s)/.exec(val);
            let sign = item?item[1]:'';
            val = val.replace(/\*/g, '*'+sign);
            isSame = true;
          }else{
            isSame = true;
          }
          if (val && isSame) {
            val = val.replace(/\*[\s]*\*/g, '*');
            val = val.replace(/\*[\s]*/g, '* ');
            val = val.replace(/\*\n/g, '\n* ');
            val = val.replace(/\n(?!\*)+/g, '\n* ');
            val = val.replace(/(?<!\n)\*+/g, '\n* ');
          }
          writebox.value = val;
          writebox.focus();
        }

        function wordsSolved(str, type = 'normal') {
          let val = str.trim();
          if (type === 'reverse') {
            val = val.slice(3).trim();
            val = val.replace(/(?<=\w)[\s]+/g, '^');
          } else {
            val = val.slice(2).trim();
            val = val.replace(/[\s]+(?=\w)/g, '^');

          }
          let lists = val.split('^');
          for (let i = 0; i < lists.length; i++) {
            let totalitem = /([-a-zA-Z]+)/g.exec(lists[i]);
            let aa = totalitem[0];
            if (aa) {
              lists[i] = lists[i].replace(aa, '[' + aa + ']');
            }
          }
          val = lists.join('  ');
          return val;
        }
        menuBtns[18].onclick = addTextPoint; // @急
        menuBtns[19].onclick = addTextPoint; // @重
        var oaddfunbtns = toGet('addfunbtns', 'classname');
        oaddfunbtns.onclick = function(e) {
          addTextPoint(e, 'open');
        };
        menuBtns[20].onclick = function() {
          let val = writebox.value;
          if (/^@[a-z-_\u4e00-\u9fa5]+\s/.test(val)) {
            let pre = val.slice(0, val.indexOf(' '));
            // console.log(pre);
            inputcollect('writebox', pre);
          } else {
            inputcollect('writebox');
          }
        }

        function addTextPoint(e, type) {
          var event = e || window.event;
          var ele = event.target || event.srcElement;
          let val = '';
          if (ele.tagName === 'BUTTON') {
            if (type === 'open') {
              val = osimpleWriteBox.value;
              if (ele.innerText === '今') {
                osimpleWriteBox.value = val + ' ' + todayAdd;
              } else if (ele.innerText === '清') {
                inputDeleteFun(osimpleWriteBox);
                // osimpleWriteBox.value = '';
              } else {
                osimpleWriteBox.value = val + ' @' + ele.innerText;
              }
              osimpleWriteBox.focus();
            }
          } else if (ele.tagName === 'SPAN') {
            val = writebox.value.trim();
            let back = '';
            if (regexDate.test(val)) {
              back = val.slice(-10); // 取后面10位 日期
              val = val.slice(0, -10).trim(); // 取前面部分，不包括-10
            }
            writebox.value = val + ' ' + ele.innerText + ' ' + back;
            writebox.focus();
          }
        }
      </script>

    <script>
        // 页面计时代码
        var ocat = toGet('meetcat', 'classname');
        var omeetinghouse = toGet('meetinghouse', 'classname');
        var otimer = toGet('timer', 'classname');
        var oStart = toGet('startBtn', 'classname');
        var oflyline = toGet('flymove', 'classname');
        var oendtime = toGet('endtime', 'classname');
        var obusyouter = toGet('busyouter', 'classname');
        var obusyItems = toGet('busyItems', 'classname');
        var otip = toGet('tips', 'id');
        oStart.onclick = balloonStart;

        var ostopTimerBtn = toGet('stopTimerBtn', 'classname');
        var oballbtnTxt = document.querySelector(".timer-text");
        var otimeStatus = toGet('timeStatus', 'classname');
        var iVrunning = null;
        var iVmoveit = null;
        var iVtimeout = null;
        var iVtimeoutnum = null;
        var isTimeCounting = false;
        var recordLeaveNum = 0;


        function recordBusyTime() {
          if (!obusyouter.classList.contains('active')) {
            obusyouter.classList.add('active');
          }
          let val = '<span class="justATime">' + oballbtnTxt.innerText + '</span>';
          recordLeaveNum++;
          obusyItems.innerHTML = obusyItems.innerHTML + val;
          obusyouter.title = '离开的时间记录(已有' + recordLeaveNum + '项)'
        }


        function stopRunning(type = 'stop') {
          clearInterval(iVrunning);
          clearTimeout(iVmoveit);
          clearInterval(iVtimeout);
          clearInterval(iVtimeoutnum);
          if (type === 'clear') { // 清理
            isTimeCounting = true;
            omeetinghouse.classList.remove('active');
            otimer.classList.remove('rest');
            oStart.classList.remove('rest');
            oStart.classList.add('running');
            ocat.classList.add('active');
            otimer.style.animationName = "resetRun";
            oflyline.style.animationName = "resetFly";
            obusyouter.classList.remove('over');
          }
          if (type === 'stop') { // 手动停止 归零
            isTimeCounting = false;
            simplebtns[2].classList.remove('counting');
            omeetinghouse.classList.remove('active');
            otimer.classList.remove('rest');
            oStart.classList.remove('rest');
            oStart.classList.remove('running');
            ocat.classList.remove('active');
            obusyouter.classList.remove('active');
            obusyItems.innerHTML = '';
            otimer.style.animationName = "resetRun";
            oflyline.style.animationName = "resetFly";
            oballbtnTxt.innerHTML = '开始计时';
            otimeStatus.innerText = '';
          }
          if (type === 'over') { // 自动停止
            isTimeCounting = true;
            var lefttime = userDefined['restTime'] || 300;
            var olefttime = toGet('lefttime', 'classname');
            olefttime.innerText = '';
            otimer.classList.add('rest');
            oStart.classList.add('rest');
            omeetinghouse.classList.add('active');
            obusyouter.classList.add('over');
            oballbtnTxt.innerHTML = '休息时间';
            otimer.style.animationName = "timerRun";
            oflyline.style.animationName = "flyliner";
            iVtimeoutnum = setInterval(function() {
              olefttime.innerText = lefttime + '秒';
              otimeStatus.innerText = '[休息] ' + lefttime + ' 秒';
              --lefttime;
              if (lefttime < 0) {
                clearInterval(iVtimeoutnum);
                iVtimeout = setInterval(function() {
                  omeetinghouse.classList.remove('active');
                  otimer.classList.remove('rest');
                  oStart.classList.remove('rest');
                  ocat.classList.remove('active');
                  obusyouter.className = 'busyouter';
                  obusyItems.innerHTML = '';
                  otimer.style.animationName = "resetRun";
                  oflyline.style.animationName = "resetFly";
                  oballbtnTxt.innerHTML = '开始计时';
                  otimeStatus.innerText = '';
                  isTimeCounting = false;
                  simplebtns[2].classList.remove('counting');
                  clearInterval(iVtimeout);
                }, 1000)

              }
            }, 1000);

          }
          otimer.style.animationPlayState = "paused";
          oflyline.style.animationPlayState = "paused";
        }

        function balloonStart() {
          stopRunning('clear');
          otip.innerText = '(提示：内容先生成后写入)';
          addPresentTime();
          oballbtnTxt.innerHTML = "<span>00</span>:<span>00</span>";
          var time = 0;
          var oPlanTime = document.getElementsByClassName("oData")[2];
          var planTime = oPlanTime.value * 60 || 1800;
          var oTime = document.querySelectorAll(".startBtn span");
          oendtime.innerText = planTime / 60 + 'min';
          iVmoveit = setTimeout(function() {
            otimer.style.animationName = "timerRun";
            otimer.style.animationPlayState = "running";
            otimer.style.animationTimingFunction = "steps(" + planTime + ") ";
            otimer.style.animationDuration = planTime + "s ";
            oflyline.style.animationName = "flyliner";
            oflyline.style.animationPlayState = "running";
            oflyline.style.animationTimingFunction = "steps(" + planTime + ") ";
            oflyline.style.animationDuration = planTime + "s ";
          }, 1000)

          iVrunning = setInterval(function() {
            time++;
            var m = Math.floor(time / 60);
            var s = time % 60;
            if (m < 10) {
              m = '0' + m;
            }
            if (s < 10) {
              s = '0' + s;
            }
            oTime[0].innerText = m;
            oTime[1].innerText = s;
            otimeStatus.innerText = '[任务] ' + m + ':' + s;
            // console.log(m,s);
            if (time > planTime) { // 加29表示，超时30秒后会停止计时
              // 播放音频
              if (userDefined['audioChose'] && !window.utools) {
                var oaudio = document.createElement('audio');
                oaudio.src = './叮咚.mp3';
                oaudio.volume = 0.7;
                oaudio.play();
              }
              stopRunning('over');
            }
          }, 1000);
        }
        var timeCount = {
          startMin: 0,
          endMin: 0
        };
        var keyindex = 0;
        var taskInput = toGet('taskGoal', 'id');
        var taskPTime = toGet('taskPTime', 'id');
        var taskLevel = toGet('taskLevel', 'id');
        var taskSFTime = toGet('taskSFTime', 'id');
        var taskFTime = toGet('taskFTime', 'id');
        var taskFStatus = toGet('taskFStatus', 'id');

        var oupdownbtns = toGet('updownbtn', 'classname', true);
        for (let a = 0; a < 4; a++) {
          oupdownbtns[a].onclick = function(e) {
            var temp = a + '';
            autoContent(e, temp);
          }
        }

        function autoContent(event, mode) {
          // mode有4种情况：0-设置，1-默认，2-上一项， 3-下一项
          if (window.localStorage || window.utools) {
            var assignment = toGet('taskAGoal', 'id');
            var otxt = toGet('goalTxt', 'classname');
            if (mode === "0") {
              if (assignment.value) {
                localSave('defaultTask', assignment.value.trim());
                otxt.innerText = '(默认项设置成功)';
              } else {
                otxt.innerText = '(请先输入内容)';
              }

            } else if (mode === '1') {
              localSave('defaultTask', '今日事今日毕，每天进步一点点');
              otxt.innerText = '(恢复出厂默认值)';
              assignment.value = '今日事今日毕，每天进步一点点';
            } else if (mode === "3" || mode === "2") {
              const list = localGet('dolist', 'list', null, '*');
              var ohastxt = toGet('hastText', 'classname');
              ohastxt.innerText = '';
              // 若有问题看towork的235行
              if (list) {
                if (mode === '2' && keyindex > 0) {
                  keyindex--;
                  ohastxt.innerText = '第' + (keyindex + 1) + '项';
                } else if (mode === '3' && keyindex < list.length - 1) {
                  keyindex++;
                  ohastxt.innerText = '第' + (keyindex + 1) + '项';
                } else {
                  ohastxt.innerText = '第' + (keyindex + 1) + '项(取值到头了呢)';
                }
                let str = list[keyindex];
                if (/toLink+/.test(str)) {
                  let temp = document.createElement('div');
                  temp.innerHTML = str;
                  taskInput.value = temp.innerText;
                } else {
                  taskInput.value = str;
                }
              } else {
                ohastxt.innerText = '(当前执行清单无事项)';
              }
            }

          } else {
            var e = event || window.event;
            var ele = e.target || e.srcElement;
            ele.classList.add('hidden');
            console.log('该浏览器版本并不支持localStorage，请更新最新版本或换浏览器。');
          }
        }

        function addTime(time) {
          taskPTime.value = time;
        }


        // 侦听事件  鼠标滑过，添加class 滑过startouchbtn 点击active

        touchHeart(ostart, 'start');
        var ostarStatus = toGet('starStatus', 'classname');

        function touchHeart(parentElement, use) {
          var stars = parentElement.getElementsByClassName('starbtn');
          var starLength = stars.length;

          var txtlist = ['(难度一星)', '(难度二星)', '(难度三星)', '(难度四星)', '(难度五星)'];

          function toDegree(touchbtn, parentElement) {
            var stars = parentElement.getElementsByClassName("starbtn");
            for (let u = 0; u < starLength; u++) {
              if (touchbtn < u) {
                stars[u].classList.remove("active");
              } else {
                stars[u].classList.add("active");
              }
              if (u < 4) {
                levelboxs[u].classList.remove("active");
              }
            }
          }
          taskLevel.onchange = function() {
            if (taskLevel.value) {
              var degree = taskLevel.value;
              var deg = degree * 1 - 1;
              toDegree(deg, ostart);
            }
          }
          for (let touchbtn = 0; touchbtn < 5; touchbtn++) {
            stars[touchbtn].onmouseenter = function() {
              for (let u = 0; u < 5; u++) {
                if (u <= touchbtn) {
                  stars[u].classList.add("startouchbtn");
                }
              }

            }
            stars[touchbtn].onmouseleave = function() {
              for (let u = 0; u < 5; u++) {
                stars[u].classList.remove("startouchbtn");
              }
            }
            stars[touchbtn].onclick = function() {
              if (use === 'start') {
                taskLevel.value = touchbtn + 1;
              } else if (use === 'analyse') {
                ostarStatus.innerText = txtlist[touchbtn];
                analyseDiff = touchbtn + 1;
                window.scrollTo(0, mobilenum);
                // ocheckContent.scrollIntoView(true);
                showNote(analyseDiff);
              }
              toDegree(touchbtn, parentElement);
            }
          }
        }

        function addPresentTime() {
          var date = new Date();
          var nowTime = formatDate(date.getHours()) + ':' + formatDate(date.getMinutes());
          taskSFTime.value = nowTime;
          timeCount.startMin = date.getTime() / 60000;

        }

        function getWorkTime() {
          var val = 1; // 最终显示值
          var date = new Date();
          var finalTime = date.getHours() * 60 + date.getMinutes();
          if (taskSFTime.value.trim()) {
            var startimeStr = taskSFTime.value.trim();
            var startime = 0;
            // 判断输入时间是否正确
            var hour = /[0-9]+\:/.exec(startimeStr);
            var min = /\:[0-9]+/.exec(startimeStr);
            // console.log(hour);
            if (hour && hour[0].slice(0, -1) * 1 < 24) {
              startime = (hour[0].slice(0, -1) * 1) * 60;
              // console.log("hour 成功",startime);
            }
            if (min && min[0].substring(1) * 1 < 60) {
              startime += min[0].substring(1) * 1;
              // console.log("min 成功",startime);
            }
            if (finalTime >= startime) {
              val = Math.ceil(finalTime - startime);
            } else {
              val = Math.ceil(1440 - finalTime + startime);
            }
            // console.log("不是计算出来的起始时间",startime,val);
          } else {
            timeCount.endMin = date.getTime() / 60000;
            if (timeCount.startMin > 0) {
              val = Math.ceil(timeCount.endMin - timeCount.startMin);
            }
          }
          taskFTime.value = val;
        }

        function getWorkProccess() {
          var a = taskPTime.value;
          var b = taskFTime.value;
          if (a * 1 > 0 && b * 1 > 0) {
            var percent = Math.round(a / b * 100);
            taskFStatus.value = percent + "%";
          }
        }
      </script>

    <script>
        // 每天打卡的实现
        var everyDay = true;
        var dakaData = {}; // 对应 checkDaka 的值，key是内容，value是数组
        var dakaDays = 0; // 总打卡天数
        var daysBtn = toGet('dataDays', 'classname', true); // 天数显示元素
        var statusBtn = toGet('dakastatus', 'classname'); // 未与已打卡的显示文本


        // 页面打卡区域展示实现
        var odakas = toGet('odaka', 'classname', true);
        odakas[0].onclick = toggleDaka;
        odakas[1].onclick = function() {
          toggleDaka('chart', 'dayCheck');
        }
        odakas[2].onclick = toggleDaka;

        function toggleDaka(objnew, objold = null) {
          if (objnew !== 'chart') {
            objnew = 'slideBox';
          }
          var oSliBox1 = document.getElementsByClassName(objnew)[0];
          var nowState = oSliBox1.classList.contains("active");

          if (nowState) {
            oSliBox1.classList.remove("active");
          } else {
            oSliBox1.classList.add("active");
          }

          if (objold === 'dayCheck') {
            var oSliBox2 = document.getElementsByClassName('dayCheck')[0];
            var ulState = oSliBox2.classList.contains("active");
            if (ulState) {
              oSliBox2.classList.remove("active");
            } else {
              oSliBox2.classList.add("active");
            }
          }
          if (objnew === 'chart') {
            paint();
          }
          statusOfDaka();
        }

        function paint() {
          // 绘图 
          var canvas = toGet('myCanvas', 'id');
          var bi = canvas.getContext("2d");
          // 因为出现了模糊,所以把原来html上的canvas的宽高双倍定义了，这里再修改style为单倍
          canvas.style.width = '568px';
          canvas.style.height = '260px';
          bi.lineWidth = 2;
          bi.strokeStyle = "white";
          bi.clearRect(0, 0, 1136, 520);
          // 坐标轴
          bi.moveTo(92, 28);
          bi.lineTo(100, 20);
          bi.lineTo(108, 28);
          bi.stroke();
          bi.moveTo(100, 20);
          bi.lineTo(100, 428);
          bi.lineTo(1072, 428);
          bi.stroke();
          bi.moveTo(1064, 420);
          bi.lineTo(1072, 428);
          bi.lineTo(1064, 436);
          bi.stroke();
          // bi.fillRect(0,0,568,260);
          bi.fillStyle = "#2a252c";
          bi.fillRect(103, 33, 956, 392);

          if (dakaData) {

            var column = document.querySelectorAll(".chart .col")[0];
            var row = document.querySelectorAll(".chart .row")[0];
            var {
              dakaDaylength,
              maxDays
            } = showDays(); // 打卡最大天数

            var colheight = Math.ceil(340 / maxDays); // 每一格高度：根据最大值和固定高度180px分配坐标点
            var rowwidth = Math.round(852 / dakaDaylength); // 宽度
            var originX = 102;
            for (let key in dakaData) {
              // 绘图部分 (104,32,956,392);
              bi.fillStyle = "#5eb6ed";
              let y = colheight * dakaData[key][0];
              let x = originX + rowwidth - 10;
              originY = 425 - y;
              bi.fillRect(originX, originY, rowwidth - 10, y);
              bi.fillStyle = "#FFFFFF";
              bi.font = "28px Arial";
              bi.textAlign = "center";
              bi.fillText(key, originX + rowwidth / 2, 472, rowwidth);
              originX += rowwidth;
              // let ospan = document.createElement("span");
              // ospan.innerText = key;
              // ospan.style.width = rowwidth - 5 + 'px';
              // ospan.title = key;
              // row.appendChild(ospan);
            }
            for (let i = maxDays; i >= 0; i--) {
              bi.fillStyle = "#FFFFFF";
              bi.fillText(i, 72, 432 - i * colheight, 80);
              // let ospan =  document.createElement("span");
              // ospan.innerText = i;
              // ospan.style.height = colheight + 'px';
              // column.appendChild(ospan);
            }
          }
          bi.fillText("天数", 40, 32);
          bi.fillText("技术", 1080, 480);
        }

        function showDays() {
          var dakaDaylength = 0;
          var maxDays = 0;
          if (!everyDay) {
            statusBtn.innerText = "已";
            statusBtn.classList.add('hascheck');
          }
          for (let key in dakaData) {
            if (dakaData[key][0] > maxDays) {
              maxDays = dakaData[key][0];
            }
            dakaDaylength++;
          }
          return {
            dakaDaylength,
            maxDays
          };
        }


        function statusOfDaka(type) {
          getTime();
          var dakaDaka = localGet('checkDaka', 'object');
          // debugger
          if (dakaDaka) {
            dakaData = dakaDaka;
            var lastSave = localGet('lastDaka', 'string');
            var dakadateObj = localGet('dakadateObj', 'object');
            var dakadate = localGet('dakadate', 'object');
            if (lastSave && lastSave != today) {
              everyDay = true; // 未打卡
              // console.log(lastSave);
            } else {
              everyDay = false; // 已打卡
              todayDakaItem = dakadateObj[today];
              // console.log(lastSave, today);
              statusBtn.classList.add('hascheck');
              statusBtn.innerText = "已";
            }
            // 把打卡记录遍历出来  dakadate[] 对应 dakadateObj{}
            var odetailDaka = toGet('detailDaka', 'classname');
            var liStr = '';
            for (let m = dakadate.length - 1; m >= 0; m--) {
              let tempkey = dakadate[m];
              let tempvalue = dakadateObj[tempkey];
              liStr += '<li>' + tempkey + '&nbsp;&nbsp;&nbsp;&nbsp;' + tempvalue + '</li>';
            }
            odetailDaka.innerHTML = liStr;
          } else {
            // console.log("第一次初始化，数据还未存入浏览器中。");
            dakaData = {
              "HTML": [0],
              "CSS": [0],
              "JAVASCRIPT": [0],
              "GIT": [0],
              "VUE": [0]
            }
            everyDay = true;
            localDel('dakadate');
            localDel('dakadateObj');
          }
        }

        function everyDayDaka() {
          statusOfDaka();
          // 1.每天只能点击一次 进行数据储存
          // 2.数据显示，存的是对象的字符串
          var oulCheck = toGet('dakaUl', 'classname');
          for (let key in dakaData) { // 初始化表
            let oli = document.createElement("li");
            oli.innerHTML = "<span>" + key + "</span><span>" + dakaData[key][0] + "</span><b>打卡</b><i>删除</i>";
            oulCheck.append(oli);
            dakaDays = dakaDays + (dakaData[key][0] * 1);
          }
          daysBtn[0].innerText = dakaDays;
          daysBtn[1].innerText = dakaDays;
          paint();

          // btnAchieve实现的是打卡和删除按钮的功能
          function btnAchieve() {
            var obDaka = document.querySelectorAll(".dakaUl b");
            var obDel = document.querySelectorAll(".dakaUl i");
            var dakalist = [];
            for (let i = 0; i < obDaka.length; i++) {
              obDaka[i].onclick = function(e) {
                if (everyDay) {
                  getTime();
                  var keyLi = e.target.parentNode.firstChild.innerText;
                  var newNum = 1;
                  otodayDakaTxt.innerText = keyLi;
                  if (dakaData[keyLi][0]) {
                    newNum = dakaData[keyLi][0] + 1;
                  }
                  var length = dakaData[keyLi].length;
                  dakaData[keyLi][0] = newNum;
                  dakaData[keyLi][length] = today;
                  todayDakaItem = keyLi;
                  everyDay = false;
                  e.target.previousElementSibling.innerText = newNum;
                  dakaDays++;
                  daysBtn[0].innerText = dakaDays;
                  daysBtn[1].innerText = dakaDays;
                  localSave('checkDaka', dakaData, 'object');
                  localSave('lastDaka', today);
                  var dakadate = localGet('dakadate', 'object');
                  if (dakadate) {
                    dakalist = dakadate;
                    dakalist.push(today);
                  } else {
                    dakalist[0] = today;
                  }
                  localSave('dakadate', dakalist, 'object');
                  var dakaobj = {};
                  var dakadateobj = localGet('dakadateObj', 'object');
                  if (dakadateobj) {
                    dakaobj = dakadateobj;
                  }
                  dakaobj[today] = keyLi;
                  localSave('dakadateObj', dakaobj, 'object');
                  paint();
                }
              };
              obDel[i].onclick = function(e) {
                var keyLi = e.target.parentNode.firstChild.innerText;
                if (todayDakaItem == keyLi) {
                  everyDay = true; // 未打卡
                  statusBtn.classList.remove('hascheck');
                  statusBtn.innerText = '未';
                  localSave('lastDaka', '重置');
                  otodayDakaTxt.innerText = '未签到';
                }
                e.target.parentNode.remove();
                if (dakaData[keyLi][0]) {
                  dakaDays = dakaDays - dakaData[keyLi][0];
                }
                daysBtn[0].innerText = dakaDays;
                daysBtn[1].innerText = dakaDays;
                delete dakaData[keyLi]; // 注意不能用.来获取属性
                localSave("checkDaka", dakaData, 'object');
                dakaFun(dakaData);
              };
            }
          }

          btnAchieve();
          var addBtn = toGet('addItemBtn', 'classname');
          addBtn.onclick = function() {
            var oval = toGet('writeIn', 'classname');
            var val = oval.value.trim();
            val = val.toUpperCase();
            var valList = [];
            if (val !== "") {
              if (/\*/.test(val)) {
                valList = val.split('*');
                // console.log(valList);
              } else {
                valList[0] = val;
              }
              // console.log(dakaData);
              for (var item = 0; item < valList.length; item++) {
                var realval = valList[item].trim();
                if (realval && /^[\u4E00-\u9FA5A-Za-z0-9_-\|]+$/.test(realval)) {
                  let oli = document.createElement("li");
                  oli.innerHTML = "<span>" + realval + "</span><span>0</span><b>打卡</b><i>删除</i>";
                  oulCheck.append(oli);
                  dakaData[realval] = [];
                  dakaData[realval][0] = 0;
                }
              }
              oval.value = "";
              localSave("checkDaka", dakaData, 'object');
              btnAchieve();
            }
          }
        }

        function dakaFun(obj) {
          var date = [];
          var dateObj = {};
          var isok = false;
          if (obj) {
            for (let key in obj) {
              // 获取每个签到项obj[key]的打卡日期数组date,每个日期是val
              if (obj[key][0] > 0) { // 有签到
                let templist = obj[key];
                for (let k = 1; k < templist.length; k++) {
                  let val = templist[k];
                  date.push(val);
                  dateObj[val] = key;
                }
                isok = true;
              }
            }
            if (isok) {
              localSave("dakadate", date, 'object');
              localSave("dakadateObj", dateObj, 'object');
            } else {
              localDel("dakadate");
              localDel("dakadateObj");
            }

          }
        }

        // 启动页内容
        var tempTask = '';
        var defaultAnalyseStr =
          "2021-02-28 内容关于或问题：“等级C模板”<br />总任务是：天天开心，身体健康<br />优先解决：……<br />【难度4颗星】 [计划15分钟，实际用时30分钟]，完成度：50%<br />困难或障碍出自：…… <br />打算：……^2021-02-28 内容关于或问题：“等级A模板”<br />总任务是：天天开心，身体健康<br />优先解决：…… <br />【难度2颗星】 [计划8分钟，实际用时10分钟]，完成度：80%<br />困难或障碍出自：…… <br />打算：……^2021-02-27 内容关于或问题：“等级B模板”<br />总任务是：天天开心，身体健康<br />优先解决：…… <br />【难度3颗星】 [计划21分钟，实际用时30分钟]，完成度：70%<br />困难或障碍出自：…… <br />打算：……^2021-02-27 内容关于或问题：“默认空版”<br />总任务是：今日事今日毕，每天进步一点点(可自定义默认的)<br />优先解决：……<br />【难度1颗星】 [计划……分钟，实际用时……分钟]，完成度：……<br />困难或障碍出自：…… <br />打算：……";


        var oformdelBtn = toGet('formdelBtn', 'classname');
        let othingsType = toGet("thingsType", 'name');
        let ovaSkills = toGet("vaSkills", 'name');
        oformdelBtn.onclick = formDateDel;

        function formDateDel() {
          var osingleLine = toGet('singleLine', 'classname');
          var inputs = osingleLine.getElementsByClassName('oData');
          let othingsType = toGet("thingsType", 'name');
          let ovaSkills = toGet("vaSkills", 'name');
          for (let i = 0; i < inputs.length; i++) {
            inputs[i].value = '';
          }
          for (let j = 0; j < othingsType.length; j++) {
            othingsType[j].checked = false;
          }
          for (let k = 0; k < ovaSkills.length; k++) {
            ovaSkills[k].checked = false;
          }
          var stars = ostart.getElementsByClassName("starbtn");
          var starLength = stars.length;
          for (let u = 0; u < starLength; u++) {
            stars[u].classList.remove("active");
          }
        }
        var tOstartTip = null;
        var odayTaskbtns = toGet('dataSTNoteBtn', 'classname', true);
        odayTaskbtns[0].onclick = generateFormData; //生成表单信息
        odayTaskbtns[1].onclick = function() { // 添加分析数据
          clearTimeout(tOstartTip);
          var oTextAreaS = toGet('allTaskData', 'id');
          var val = oTextAreaS.value;
          val = val.replace(/javascript/gi, 'javascript');
          // debugger
          if (/javascript(?=\:)+/.test(val)) {
            otip.innerText = '(写入失败，禁止javascript:的输入)';
          } else {
            var fonttxt = val.substring(0, 10);
            if (regexDate.test(fonttxt)) {
              let time = regexDate.exec(fonttxt);
              let d = Date.UTC(time[1], time[2] - 1, time[3]);
              if (d === now) {
                var temp = localGet('analyseData', 'list', null, '^');
                if (temp && temp[0] !== '重置') {
                  analyseList = temp;
                  var length = analyseList.length;
                  analyseList[length] = val.trim();
                } else if (temp[0] === '重置' || !temp) {
                  analyseList[0] = val.trim();
                }
                localSave('analyseData', analyseList.join('^'));
                otip.innerText = '(写入成功)';
                showNote(analyseDiff);
                if (userDefined['deleteChose'] === 1) {
                  formDateDel();
                }
                oTextAreaS.value = '';
                tOstartTip = setTimeout(function() {
                  otip.innerText = '(提示：内容先生成后写入)';
                }, 2000);

              } else {
                otip.innerText = '(写入失败，非今天日期)';
              }

            } else {
              otip.innerText = '(写入失败，日期格式非正确输入)';
            }
          }

        };

        // 表单生成数据
        function generateFormData() {
          getTime();
          getWorkProccess();
          var frontTask = '';
          let oTextArea = toGet("allTaskData", 'id');
          let oInputData = toGet("oData", 'classname', true);
          let othingsType = toGet("thingsType", 'name');
          let ovaSkills = toGet("vaSkills", 'name');
          var otxt = toGet('goalTxt', 'classname');
          var ohastxt = toGet('hastText', 'classname');
          otxt.innerText = '';
          ohastxt.innerText = '';
          for (let i = 0; i < othingsType.length; i++) {
            if (othingsType[i].checked) {
              frontTask = frontTask + othingsType[i].value + '\+';
            }
          }
          var length = frontTask.length - 1;
          frontTask = todayAdd + ' 内容关于或问题：' + frontTask.substring(0, length) + '（方式为';
          for (let i = 0; i < ovaSkills.length; i++) {
            if (ovaSkills[i].checked) {
              frontTask = frontTask + ovaSkills[i].value + '\+';
            }
          }

          let inputDataArr = [];
          for (let i = 0; i < oInputData.length; i++) {
            if (oInputData[i].value) {
              inputDataArr[i] = oInputData[i].value;
            } else {
              inputDataArr[i] = '……';
              if (i === 0) {
                inputDataArr[i] = localGet('defaultTask', 'string') || '今日事今日毕，每天进步一点点';
              }
            }
          }
          length = frontTask.length - 1;
          frontTask = frontTask.substring(0, length) + '）<br />\n总任务是：' + inputDataArr[0] + '<br />\n优先解决：' +
            inputDataArr[1] +
            '<br />\n【难度' + inputDataArr[3] + '颗星】 [计划' + inputDataArr[2] + '分钟，实际用时' + inputDataArr[5] + '分钟]，完成度：' +
            inputDataArr[6] +
            '<br />\n困难或障碍出自：' + inputDataArr[7] + ' <br />\n打算：' + inputDataArr[8];
          oTextArea.value = frontTask;
          tempTask = frontTask;
          otip.innerText = '(模板数据生成成功，请删除不需要的行，修改每行省略号或冒号后的内容)';

        };
      </script>

    <script>
        var ocheckContent = toGet('check-content', 'classname');
        // 检查页逻辑
        var ocheck = oshowings[2];
        var ocheckmenu = toGet('datamenu', 'classname');
        var ocheckbtns = ocheckmenu.getElementsByTagName('span');
        var ooneclips = toGet('oneclip', 'classname', true);
        var originalClip = 0;
        ocheckmenu.onclick = function(e) {
          window.scrollTo(0, mobilenum);
          var event = e || window.event;
          var ele = event.target || event.srcElement;
          var index = ele.getAttribute('data-id') * 1;
          if (index !== originalClip) {
            ocheckbtns[index].classList.add('active');
            ooneclips[index].classList.add('active');
            ocheckbtns[originalClip].classList.remove('active');
            ooneclips[originalClip].classList.remove('active');
            originalClip = index;
          }
        }

        var odatatext = toGet('datatext', 'classname');
        var odaysClip = toGet('daysClip', 'classname');

        function checkSummary(type) {
          var str = '';
          var regex = /^([0-9]{4})\/(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])$/;
          var ospans = odatatext.getElementsByTagName('span');
          var dakadate = localGet('dakadate', 'object');
          var dakastr = '';
          var dakadateobj = localGet('dakadateObj', 'object'); // {}日期对应打卡内容
          var alldayObj = localGet('alldayNumObj', 'object');
          if (alldayObj) {
            alldayNumObj = alldayObj;
          }
          var finishdate = null;
          if (type !== 'delete') {
            finishdate = localGet('finishdate', 'object');
          } else {
            finishAll = 0; // 任务总数
            finishObj = {};
          }
          var badmoonstr = localGet('badmoon', 'string');

          if (dakadate) {
            dakastr = dakadate.join('^');
            ospans[0].innerText = dakadate.length;
            ospans[1].innerText = dakadate[0] + '起';
          } else {
            ospans[0].innerText = 0;
            ospans[1].innerText = '今天?';
          }
          if (finishdate) {
            ospans[2].innerText = finishAll;
            ospans[3].innerText = finishdate[0] + '起';
          } else {
            ospans[2].innerText = 0;
            ospans[3].innerText = '今天?';
          }

          var diffnum = 0;
          var totalnum = 30;
          var {
            year,
            month,
            date
          } = getTime();
          var tem = {
            '1': 31,
            '2': 28,
            '3': 31,
            '4': 30,
            '5': 31,
            '6': 30,
            '7': 31,
            '8': 31,
            '9': 30,
            '10': 31,
            '11': 30,
            '12': 31
          }
          if (year % 4 === 0 && year % 400 !== 0 || year % 400 === 0) {
            tem['2'] = 29;
          }
          var first = '';
          var firstmonth = '';
          var firstyear = null;
          var firstdatePre = '';
          var firstdate = '';
          var nextdate = '';
          var premonth = 30 - date - 1;
          if (month == 3 && premonth >= 28 && year % 4 == 1) {
            premonth = 27;
            totalnum = 29;
          }
          if (month == 1) {
            firstmonth = '12';
            firstyear = year - 1;
          } else {
            firstmonth = month - 1 + '';
          }
          first = tem[firstmonth] - premonth;
          if (firstyear) {
            firstdatePre = firstyear + '/' + formatDate(firstmonth) + '/';
          } else {
            firstdatePre = year + '/' + formatDate(firstmonth) + '/';
          }
          //  data-num class='gray blue purple|white ||checked'
          // <li data-num="10" class="purple checked"></li>
          for (var i = 0; i <= premonth; i++) {
            firstdate = firstdatePre + formatDate(first + i);
            let num = isInText(firstdate);
            let name = isInClass(firstdate);
            let dakatxt = '';
            let eve = '"';
            if (dakadateobj && dakadateobj[firstdate]) {
              dakatxt = ' ，打卡了' + dakadateobj[firstdate];
            }
            if(num > 0){
              eve = '" onclick = "searchit(\'' + firstdate + '\')"';
            }
            if (num >= userDefined['tasknum']) {
              str += '<li  title="' + firstdate + ' 完成数:【' + num + '】' + dakatxt + '" class="' + name +  eve + '>' + num +
                '</li>'
            } else {
              str += '<li  title="' + firstdate + ' 完成数:【' + num + '】' + dakatxt + '" class="' + name +  eve + '></li>'
            }
          }
          for (var j = date - 1; j >= 0; j--) {
            nextdate = year + '/' + formatDate(month) + '/' + formatDate(date - j);
            let num = isInText(nextdate);
            let name = isInClass(nextdate);
            let dakatxt = '';
            let eve = '"';
            if (dakadateobj && dakadateobj[nextdate]) {
              dakatxt = ',打卡了' + dakadateobj[nextdate];
            }
            if(num > 0){
              eve = '" onclick = "searchit(\'' + nextdate + '\')"';
            }
            if (num >= userDefined['tasknum']) {
              str += '<li title="' + nextdate + ' 完成数:【' + num + '】' + dakatxt + '" class="' + name + eve + '>' + num +
                '</li>'
            } else {
              str += '<li title="' + nextdate + ' 完成数:【' + num + '】' + dakatxt + '" class="' + name + eve + '></li>'
            }
          }


          odaysClip.innerHTML = str;
          ospans[4].innerText = diffnum + '/' + totalnum;

          function isInClass(day) {
            var str = '';
            var isnot = false;
            if (finishObj[day]) {
              str += 'white ';
              var percent = finishObj[day][0].slice(0, -1); // 字符串 '30%'
              if (percent * 1 / 100 < userDefined['difficult']) {
                str += 'purple ';
                isnot = true;
              }
              if (badmoonstr && badmoonstr.indexOf(day) !== -1) {
                str += 'blue ';
                isnot = true;
              }
            } else {
              str = '';
            }
            if (dakastr.indexOf(day) !== -1) {
              str += 'checked ';
            }
            if (isnot) {
              diffnum++;
            }
            return str;
          }

          function isInText(day) {
            var num = 0;
            if (finishObj[day]) {
              num = finishObj[day][1];
            }
            return num;
          }
        }


        // ① 分析层代码
        var oanalyseContent = toGet('analyseContent', 'classname');
        var osummaryNum = toGet('summaryNum', 'classname');
        var otipclose = document.querySelector('.tipclosebtn');
        var oknowfirst = toGet('knowfirst', 'classname');
        otipclose.onclick = function(event) {
          var e = event || window.event;
          var ele = e.target || e.srcElement;
          if (ele.tagName === 'I') {
            var level = ele.getAttribute('data-level');
            cancelStar();
            ele.classList.add('active');
            showNote(level);
          }
          if (ele.tagName === 'SPAN') {
            var val = ele.innerText;
            if (val === '指南') {
              ele.innerText = '关闭';
              oknowfirst.style.display = 'block';
            } else {
              ele.innerText = '指南';
              oknowfirst.style.display = 'none';
            }
          }
        }

        function showNote(level, type = 'analyse') {
          var outputList_s = ''; // 把添加好html标签的数组元素结合成字符串
          var outputList = []; // 中间值
          var outputListStr = '';
          var day = [];
          var templist = [];
          var fortaglist = [];
          var fortagstr = '';
          var typeis = type;
          outputListStr = localGet('analyseData', 'string');
          if (outputListStr) {
            if (outputListStr.substring(0, 2) !== '重置') {
              specifyDo(typeis);
            } else {
              outputListStr = '';
              osummaryNum.innerText = '（0:0-0-0-0）';
            }
          } else {
            outputListStr = defaultAnalyseStr;
            specifyDo(typeis);
          }

          function specifyDo(type) {
            var abcStatus = false;
            var lengthnum = 1;
            var tempLength = 0;
            var totalA = 0;
            var totalB = 0;
            var totalC = 0;
            outputList = outputListStr.split('^'); // 若内存有值，则取出转成数组赋值。  
            lengthnum = outputList.length;
            let difflevel = ['', '★', '★★', '★★★', '★★★★', '★★★★★'];
            if (level === 'A' || level === 'B' || level === 'C') {
              abcStatus = true;
            }
            for (let i = 0; i < lengthnum; i++) {
              let val = outputList[i];
              val = val.replace(/javascript/gi, 'javascript');
              if (/javascript(?=\:)+/.test(val)) {
                continue;
              } else {
                // num=2021-02-28, time0 + '/' + time1=16/38,
                let num = val.substring(0, 10);
                let olevel = /难度[0-9]+/g.exec(val);
                let otime0 = /\[计划[0-9]+/g.exec(val); // 得到的是一个数组对象 
                let otime1 = /用时[0-9]+/g.exec(val);
                let oprogress = /完成度：[0-9]+/.exec(val);
                let tempdiv = '';
                let templi = '';
                let starNumTxt = 0;
                let htmltxt = '';
                // 区分是难度筛选还是等级筛选

                if (level && level !== '无') { // 要筛选
                  if (!abcStatus) { // 难度筛选
                    if (olevel) {
                      let levelval = olevel[0].substring(2) * 1;
                      if (level != levelval) {
                        continue;
                      }
                    } else {
                      continue;
                    }
                  } else { //等级筛选
                    if (!oprogress) {
                      continue;
                    }
                  }

                }

                if (olevel) {
                  starNumTxt = olevel[0].substring(2);
                }
                tempLength++;
                // console.log(num, otime0, otime1, oprogress);

                if (otime1 && oprogress) {
                  let progress = oprogress[0].substring(4) * 1;
                  let leveltxt = 'levelc 找缺点';
                  let sign = 'C';
                  if (progress >= userDefined['levela']) {
                    leveltxt = 'levela 找优点';
                    sign = 'A';
                    totalA++;
                  } else if (progress >= userDefined['levelb']) {
                    leveltxt = 'levelb 找方法';
                    sign = 'B';
                    totalB++;
                  } else {
                    totalC++;
                  }
                  if (abcStatus && sign !== level) {
                    continue;
                  }
                  let time0 = otime0[0].substring(3) * 1 || 0;
                  let time1 = otime1[0].substring(2) * 1;
                  htmltxt = contentToCss(outputList[i], starNumTxt, sign);
                  if (type === 'analyse') {
                    tempdiv = "<div class='" + leveltxt.substring(0, 6) + "' title='" + leveltxt +
                      "'><span class='percent'>" + progress +
                      "%</span><span class='timer'><span class='realtime-percent' title='计划用时/实际用时'>" + time0 +
                      '/<strong class="realtime">' + time1 +
                      "</strong></span><span class='back' style='width:" + progress + "%;'></span></span>" + htmltxt +
                      "</div>";
                  } else if (type === 'tagsolve') {
                    fortagstr = ' ' + difflevel[starNumTxt] + '， ' + otime1 + '分钟 | ' + progress + '%， 评级：' + leveltxt
                      .toUpperCase() + htmltxt;
                    fortaglist.push(fortagstr);
                  }

                  if (num === day[day.length - 1]) {
                    templi = "<li>" + tempdiv + "</li>";
                  } else {
                    day.push(num);
                    templi = "<li><b>" + num + "</b>" + tempdiv + "</li>";
                  }

                } else {
                  htmltxt = contentToCss(outputList[i], starNumTxt);
                  if (type === 'analyse') {
                    if (num === day[day.length - 1]) {
                      templi = "<li><div>" + htmltxt + "</div></li>";
                    } else {
                      day.push(num);
                      templi = "<li><b>" + num + "</b><div>" + htmltxt + "</div></li>";
                    }
                  } else if (type === 'tagsolve') {
                    fortagstr = ' ' + difflevel[starNumTxt] + htmltxt;
                    fortaglist.push(fortagstr);
                  }
                }
                templist.push(templi);
              }
            }

            function contentToCss(txt, starNumTxt, sign = '') {

              // <span class='starNum'>" + starNumTxt + "</span>
              let starTxt = '';
              let origindate = txt.substring(0, 11);
              let otitle = /内容关于或问题：+(.[^<]*)<br/g.exec(txt);
              let ofirst = /优先解决：+(.[^<]*)/g.exec(txt);
              let ogoal = /总任务是：+(.[^<]*)<br/g.exec(txt);
              let odiffcult = /困难或障碍出自：+(.[^<]*)<br/g.exec(txt);
              let oplan = /打算：+(.[^<]*)/g.exec(txt);
              let html = '';
              let tipAdd = '';
              let title = otitle && otitle[1] !== '（方式）' ? "<h3 class='titleTxt'>" + otitle[1] + "</h3>" : '';
              let way = ofirst ? "<p class='smalltitle'>" + ofirst[0] + "</p>" : '';
              let goal = ogoal && ogoal[1] !== '空' ? "<p class='goalTxt'>" + ogoal[1] + "</p>" : '';
              let diffcult = odiffcult ? "<p class='diffTxt' title='困难或障碍来自……'>" + odiffcult[1] + "</p>" : '';
              let plan = oplan ? "<p class='planTxt' title='打算……'>" + oplan[1] + "</p>" : '';
              if (starNumTxt && starNumTxt * 1 >= 3) {
                tipAdd = '【多练习，多接触】';
              } else if (starNumTxt) {
                tipAdd = '【多角度勤分析，熟练掌握】';
              }
              if (sign) {
                starTxt = starNumTxt ? "<span class='starNum' title='难度等级：" + starNumTxt + tipAdd + "'>" +
                  difflevel[starNumTxt] + "&nbsp;&nbsp;&nbsp;评级-" + sign + "</span>" : "<span class='starNum'  > 评级-" +
                  sign + "</span>";
              } else {
                starTxt = starNumTxt ? "<span class='starNum' title='难度等级：" + starNumTxt + tipAdd + "'>" + difflevel[
                    starNumTxt] +
                  "</span>" : '';
              }

              if (type === 'analyse') {
                html = title + goal + way + diffcult + plan + starTxt;
              } else if (type === 'tagsolve') {
                title = otitle && otitle[1] !== '（方式）' ? " <u>【" + otitle[1] + "】</u>" : '';
                goal = ogoal && ogoal[1] !== '空' ? ' title="' + origindate + ogoal[1] + '"' : '';
                way = ofirst ? '<p class="smalltitle"' + goal + '>' + ofirst[0] + title + '</p>' : '';
                plan = oplan ? '<p class="nextTxt" title="打算……">' + oplan[1] + '</p>' : '';
                html = way + diffcult + plan;
              }
              return html;


            }
            // 先排序  好难好麻烦-> 在写入的时候就限定是今天的才能写入

            outputList_s = templist.join('');

            // 汇总
            if (!abcStatus) {
              var numleft = tempLength - totalA - totalB - totalC;
              osummaryNum.innerText = '（' + tempLength + ':' + totalA + '-' + totalB + '-' + totalC + '-' + numleft +
                '）';
            } else {
              osummaryNum.innerText = '（' + tempLength + ': A' + totalA + '- B' + totalB + '- C' + totalC +
                '）';
            }

          }


          if (outputList_s.trim() && type === 'analyse') {
            oanalyseContent.innerHTML = outputList_s;
          } else if (type === 'analyse') {
            oanalyseContent.innerHTML = '<li><b></b><div>无数据（另：筛选状态下可点击小猫清除状态）</div></li>';
          } else if (type === 'tagsolve') {
            return fortaglist;
          }
        }



        var oanalyseBtn = toGet('analyseBtn', 'classname');
        var ocancelbtn = toGet('cancelbtn', 'classname');
        var levelboxs = otipclose.getElementsByTagName('i');
        ocancelbtn.onclick = function() {
          cancelStar();
          showNote(0);
        };

        function cancelStar() {
          // ocheckContent.scrollIntoView(true);
          window.scrollTo(0, mobilenum);
          ostarStatus.innerText = '(原始状态)';
          // 把选中的心取消状态
          var stars = oanalyseBtn.getElementsByClassName("starbtn");
          for (let u = 0; u < stars.length; u++) {
            stars[u].classList.remove("active");
            if (u < 4) {
              levelboxs[u].classList.remove("active");
            }
          }
          analyseDiff = 0;
        };
        touchHeart(oanalyseBtn, 'analyse'); // 获得点击的难度 analyseDiff
        // ② 清单层
        var osearchtxt = toGet('searchtxt', 'classname');
        var osearchbtn = toGet('searchbtn', 'classname');
        var oletterbtn = toGet('letterbtn', 'classname');
        var odaymenu = toGet('daymenu', 'classname');
        var otodoCon = toGet('todoCon', 'classname');
        var oweekbtns = document.querySelectorAll('.weekbtn span');
        oweekbtns[0].onclick = function(){
          showFinishtask('本周');
        }
        oweekbtns[1].onclick = function(){
          showFinishtask('最近7天');
        }
        oweekbtns[2].onclick = function(){
          showFinishtask('上周');
        }
        var nowshowing = 0;
        var datesortStatus = false;
        oletterbtn.onclick = function() {
          this.classList.toggle('btnon');
          hasSetRegex = !hasSetRegex;
          searchit();
        }
        odaymenu.onclick = function(e) {
          var event = e || window.event;
          var ele = event.target || event.srcElement;
          var obj = ele;
          if (ele.tagName === 'B') {
            obj = ele.parentElement;
          }
          var odaysbtns = odaymenu.getElementsByTagName('span');
          var oworklist = toGet('worklist', 'classname', true);
          var top = 0;
          if (obj.tagName === 'SPAN') {
            var index = obj.getAttribute('data-id') * 1;
            odaysbtns[index].classList.add('active');
            if (index != nowshowing) {
              odaysbtns[nowshowing].classList.remove('active');
              nowshowing = index;
              top = oworklist[index].offsetTop;
              // console.log(index,top,otodoCon.scrollTop)
              otodoCon.scrollTop = top; // 此处的top的值是数值
              // ocheckContent.scrollIntoView(true);
              window.scrollTo(0, mobilenum);
            }
          }
        }

        var oTofinishparts = toGet('tofinishpart', 'classname', true);
        oTofinishparts[0].onclick = toSeeFinish;
        oTofinishparts[1].onclick = toSeeFinish;

        function toSeeFinish() {
          getTime();
          menuBtns[2].innerText = "总结";
          menuBtns[2].classList.remove('active');
          floor.style.display = "none";
          document.body.style.overflow = 'auto';
          // toNewpart(2);
          var back = toGet('bodybg', 'classname');
          back.style.display = 'block';
          if (oshowings[2].style.display !== 'block') { // 开启页面
            if (newpartshow !== -1) {
              oshowings[newpartshow].style.display = 'none';
              simplebtns[newpartshow + 1].classList.remove('active');
            }
            oshowings[2].style.display = 'block';
            simplebtns[3].classList.add('active');
            newpartshow = 2;
          }
          showFinishtask('watch');
          checkSummary();
          ocheckbtns[originalClip].classList.remove('active');
          ooneclips[originalClip].classList.remove('active');
          originalClip = 1;
          ocheckbtns[1].classList.add('active');
          ooneclips[1].classList.add('active');
        }

        var hasSetRegex = false; // 决定是否是预设的正则表达式

        var odatesortbtn = toGet('datesortbtn', 'classname');
        odatesortbtn.onclick = function() {
          showFinishtask('reverse');
        }

        function showFinishtask(type, search = null) {
          // <span data-id='0'><b>2021/8/8</b> <b>(完成度|任务数)</b></span>
          if (type === 'reverse') {
            search = osearchtxt.value;
            datesortStatus = !datesortStatus; // false为顺序-默认
          }
          var weekcolornum = -99;
          getTime();
          var comparedate = '';
          var comparedatelow = '';
          if(type === '本周' || type === '上周'){
            let wkk = [6, 0, 1, 2, 3, 4, 5];
            var weekday = new Date().getDay();
            comparedate = now - 86400000 * wkk[weekday];
            weekcolornum = 0;
            if(type === '上周'){
              comparedatelow = comparedate;
              comparedate = comparedate - 86400000 * 7; 
              weekcolornum = 2;
            }
          }else if(type === '最近7天'){
            comparedate = now - 86400000 * 7; // 目标日期大于等于它
            weekcolornum = 1;
          }
          for(let colorit = 0; colorit < 3; colorit++){
            if(weekcolornum === colorit){
              oweekbtns[colorit].classList.add('active');
            }else{
              oweekbtns[colorit].className = '';
            }
          }
          var otodoOut = toGet('todoOut', 'classname');
          var daylist = localGet('finishdate', 'object');
          var finishlist = localGet('finishlist', 'object'); // 数组，对应总结面板的项
          var finishpercent = localGet('finishpercent', 'object'); // {}
          var countNums = odatesortbtn.children;
          var showingnum = 0; // 当前呈现的项的个数
          var one = ''; //菜单日期每一项
          var day = ''; // 纯日期
          var regex = null;
          var numIndex = 0;
          odaymenu.innerHTML = '';
          otodoOut.innerHTML = '';
          if (daylist && finishlist) {
            countNums[0].innerText = daylist.length;
            odaymenu.classList.remove('hidden');
            finishAll = finishlist.length;
            if (search) {
              try {
                regex = new RegExp(search, 'g');
              } catch (e) {
                console.log('正则输入有问题');
              }
            }
            if (datesortStatus) {
              odatesortbtn.classList.add('reverse');
              for (var i = daylist.length - 1; i >= 0; i--) {
                showingnum += itemSolve(i, numIndex);
                numIndex++;
              }
            } else {
              odatesortbtn.classList.remove('reverse');
              for (var k = 0; k < daylist.length; k++) {
                showingnum += itemSolve(k, k);
              }
            }
            countNums[1].innerText = showingnum;
            if (search || type) {
              // 让内容回到顶部
              otodoCon.scrollTop = 0;
              // ocheckContent.scrollIntoView(true);
              window.scrollTo(0, mobilenum);
            }

            function itemSolve(i, spanIndex) {

              var searchcount = 0;
              var linum = 0;
              var str = ''; // 具体全部任务
              var searchstr = ''; //查找后的任务
              var weekstr = ''; // week按钮下的任务
              var ul = document.createElement('ul');
              ul.classList.add('worklist');
              day = daylist[i];
              var span = document.createElement('span');
              span.setAttribute('data-id', spanIndex);
              span.setAttribute('data-date', day);

              for (var j = 0; j < finishAll; j++) {
                if (finishlist[j].indexOf(day) !== -1) {
                  linum++;
                  let temp = finishlist[j].substring(10);
                  let newtemplist = temp.match(/([A-Za-z]+)/g);
                  // console.log(newtemplist);
                  if (hasSetRegex && newtemplist) {
                    for (let k = 0; k < newtemplist.length; k++) {
                      let element = '<span class="letter">' + newtemplist[k] + '</span>';
                      temp = temp.replace(newtemplist[k], element);
                      // 存在当由空格间隔的两个单词存在包含时，replace的都是前面一个，使得替换出错
                    }

                  }
                  if (regex && finishlist[j].indexOf(search) !== -1) {
                    let newspan = '';
                    newspan = '<span class="chosed">' + search + '</span>';
                    let tempval = temp.replace(regex, newspan);

                    searchstr += '<li title = "' + day + '">' + tempval + '</li>';
                    searchcount++;
                  } else if(comparedate !== ''){
                    let time = regexOnlyDate.exec(day);
                    let dd = Date.UTC(time[1], time[2] - 1, time[3]);
                    if(dd >= comparedate){
                      if((comparedatelow !== '' && dd < comparedatelow)|| comparedatelow === ''){
                        weekstr += '<li title = "' + day + '">' + temp + '</li>';
                        searchcount++;
                      }
                    }
                  } else {
                    // console.log(j,finishlist[j],str);
                    str += '<li title = "' + day + '">' + temp + '</li>';
                  }
                }
              }

              if (search) {
                str = searchstr;
              } else if(comparedate !== ''){
                str = weekstr;
              }else {
                searchcount = linum;
              }

              if (searchcount || userDefined['unshowNoneChose']) {
                str = '<li class="daycount">' + day + '&nbsp;（' + searchcount + '）</li>' + str;
              } else {
                span.classList.add('hide');
                ul.classList.add('hide');
              }

              ul.innerHTML = str;
              one = '<b>' + day + '</b> <b>(' + linum + ' | ' + finishpercent[day] + ')</b>'
              span.innerHTML = one;
              odaymenu.appendChild(span);
              otodoOut.appendChild(ul);


              finishObj[day] = [finishpercent[day], linum];

              return searchcount;
            }
          } else {
            odaymenu.classList.add('hidden');
            countNums[0].innerText = '0';
            countNums[1].innerText = '0';
          }
        }
        osearchbtn.onclick = searchit;

        function searchit(date=null) {
          var val = date?date:osearchtxt.value.trim();
          val = val.replace(/javascript/gi, 'javascript');
          if (val && /javascript(?=\:)+/.test(val) || val && /\<[a-z]+\>.*\<\/[a-z]+\>/.test(val)) {
            osearchtxt.value = '（不可搜索）' + val;
          } else if (regexOnlyDate.test(val)) {
            var oworklist = toGet('worklist', 'classname', true);
            let spans = odaymenu.querySelectorAll('span');
            var index = 0;
            for (let a = 0; a < spans.length; a++) {
              if (val == spans[a].getAttribute('data-date')) {
                index = a;
                spans[a].className = 'active';
                nowshowing = a;
              }else{
                spans[a].className = '';
              }
            }
            
            // console.log(index,oworklist[index]);
            let top = oworklist[index].offsetTop;
            otodoCon.scrollTop = top; // 此处的top的值是数值
            if(!date){
              // ocheckContent.scrollIntoView(true);
              window.scrollTo(0, mobilenum);
            }else{
              if (originalClip !== 1) {
                ocheckbtns[1].classList.add('active');
                ooneclips[1].classList.add('active');
                ocheckbtns[originalClip].classList.remove('active');
                ooneclips[originalClip].classList.remove('active');
                originalClip = 1;
              }
            }
          } else {
            showFinishtask('watch', val);
          }
        }
        osearchtxt.onkeydown = function(e) {
          var event = e || window.event;
          if (event.keyCode == 13) {
            searchit();
          }
        }

        // ③ 记忆层
        var omemoryCons = toGet('memoryCon', 'classname', true);

        function loadMemory() {
          getTime();
          let memoryObj = localGet('memoryObj', 'object');
          var omemoryArea = toGet('memoryArea', 'classname');
          var omemoryclearbtn = toGet('memoryclearbtn', 'classname');
          var ovisibleBtn = toGet('contentHiddenBtn', 'classname');
          var otoseeMemory = toGet('toseeMemory', 'classname');
          var lastDate = '';
          var expirestr = ''; // 逾期的内容
          var expirelist = [];
          if (memoryObj) {
            omemory = memoryObj;
            // 取完数据了，接下来是按照遗忘记忆表的日期计算着来显示（只管天数）
            // 5分钟 30分钟 12小时  1天   2天    4天    7天   15天
            let [undefined, year, month, date] = /(\d{4})-(\d{2})-(\d{2})/.exec(todayAdd);
            let newDay = '';
            let num = {
              "15": [16, 13, 16, 15, 16, 15, 16, 16, 15, 16, 15, 16],
              "7": [24, 21, 24, 23, 24, 23, 24, 24, 23, 24, 23, 24],
              "4": [27, 24, 27, 26, 27, 26, 27, 27, 26, 27, 26, 27],
              "2": [29, 26, 29, 28, 29, 28, 29, 29, 28, 29, 28, 29],
              "1": [30, 27, 30, 29, 30, 29, 30, 30, 29, 30, 29, 30]
            }
            let daymemorylist = [1, 2, 4, 7, 15];

            function isWrite(n, index) {
              // 从今天起，算前1,2,4,7,15天的日期，找对应的内容
              let numlist = num[n];
              let tempstr = ''; // 记忆项内容
              let templist = [];
              // debugger;
              if (date > n) {
                let newdate = date - n;
                if (newdate < 10) {
                  newdate = "0" + newdate;
                }
                newDay = year + "-" + month + "-" + newdate;
              } else if (month > 1) {
                let newmonth = month - 1;
                let newdate = date * 1 + numlist[newmonth - 1];
                if (newmonth < 10) {
                  newmonth = "0" + newmonth;
                }
                newDay = year + "-" + newmonth + "-" + newdate;
              } else { // 当日份不够减，月份是1月的时候，处理年份
                let newyear = year - 1;
                let newdate = date * 1 + numlist[11];
                newDay = newyear + "-" + 12 + "-" + newdate;
              }
              lastDate = newDay;
              if (omemory[newDay]) {
                memorylist.push(newDay + ' |  ' + omemory[newDay]);
                templist = omemory[newDay].split('~');
                for (let i = 0; i < templist.length; i++) {
                  let ttemp = templist[i];
                  ttemp = itemToVisible(ttemp);
                  tempstr += '<li>' + ttemp + '</li>'
                }
              }
              omemoryCons[index].title = newDay;
              omemoryCons[index].innerHTML = tempstr;
            }

            for (let i = 0; i < 5; i++) {
              isWrite(daymemorylist[i], i);
            }
            // 逾期处理
            var time = /(\d{4})-(\d{2})-(\d{2})/.exec(lastDate);
            var d = Date.UTC(time[1], time[2], time[3]);
            for (let key in omemory) {
              if (key !== 'origin') {
                let timer = /(\d{4})-(\d{2})-(\d{2})/.exec(key);
                let t = Date.UTC(timer[1], timer[2], timer[3]);
                let expiretemp = [];
                if (t < d) {
                  expirelist.push(key);
                  expiretemp = omemory[key].split('~');
                  for (let k = 0; k < expiretemp.length; k++) {
                    expirestr += '<li>' + expiretemp[k] + '</li>'
                  }
                }
              }
            }
            if (expirestr) {
              omemoryCons[5].innerHTML = expirestr;
            } else {
              omemoryCons[5].innerHTML = '<li class="justtip">（没有过期的记忆数据哦）</li>';
            }
          } else {
            for (let k = 0; k < 6; k++) {
              omemoryCons[k].innerHTML = '<li class="justtip">(空)</li>';
            }
          }

          function itemToVisible(item) {
            let newtemplist = item.match(/\[(.+?)\]/g);
            let finalitem = item;
            if (newtemplist) {
              for (let k = 0; k < newtemplist.length; k++) {
                let span = '<span class="itemhide">' + newtemplist[k] + '</span>';
                finalitem = finalitem.replace(newtemplist[k], span);
              }
            }
            return finalitem;
          }
          ovisibleBtn.onclick = function() {
            if (this.innerText === '开启主动回忆模式') {
              omemoryArea.classList.add('visible');
              this.innerText = '关闭主动回忆模式';
              // ocheckContent.scrollIntoView(true);
              window.scrollTo(0, mobilenum);
            } else {
              omemoryArea.classList.remove('visible');
              this.innerText = '开启主动回忆模式';
            }
          }
          otoseeMemory.onclick = function() {
            toMainSquare(1);
            tosearchtag('#记忆');
          }
          omemoryclearbtn.onclick = function() {
            var isDo = false;
            for (var i = 0; i < expirelist.length; i++) {
              var key = expirelist[i];
              if (key) {
                delete omemory[key];
                isDo = true;
              }
            }
            if (isDo) {
              omemory['origin'] = lastDate;
              localSave('memoryObj', omemory, 'object');
              omemoryCons[5].innerHTML = '<li class="justtip">（逾期项清除了）</li>';
            }
          }
        }
        var otoMemorypart = toGet('toMemorypart', 'classname');
        otoMemorypart.onclick = function() {
          getTime();
          var back = toGet('back', 'classname');
          back.style.display = 'block';
          omain.classList.add('unshow');
          omain.classList.add('changecolor');
          oshowings[2].style.display = 'block';
          simplebtns[3].classList.add('active');
          newpartshow = 2;
          checkSummary();
          window.scrollTo(0, mobilenum);
          ocheckbtns[originalClip].classList.remove('active');
          ooneclips[originalClip].classList.remove('active');
          ocheckbtns[2].classList.add('active');
          ooneclips[2].classList.add('active');
          originalClip = 2;
        }
      </script>

    <script>
        // 帮助页 book

        var obookmenu = toGet('bookmenu', 'classname');
        var obookOuter = toGet('book-outer', 'classname');
        var obookCon = toGet('bookCon', 'classname');
        var txtparts = obookCon.getElementsByClassName('txtpart');
        var txtpartshow = 0;
        var ofirstCon = toGet('firstCon', 'classname');
        var oResults = toGet('result', 'classname', true);
        var orefreshbtn = toGet('setrefreshtask', 'classname');
        var odorefreshtask = toGet('dorefreshtask', 'classname');
        var odataclears = toGet('dataclear', 'classname', true);
        var othemechooses = toGet('themechoose', 'classname', true);
        var osearchModes = toGet('searchMode', 'classname', true);

        var osetCountdownbtn = toGet('setCountdownbtn', 'classname');
        osetCountdownbtn.onclick = function() {
          writeLayer('日期倒计时');
          writebox.value = countdownTxt;
          orefreshbtn.innerText = '定义日期倒计时';
          writeboxTips.innerText = '( 呈现在右上角日期前面，内容如“庆典 2022-01-01” )';
        }
        var osetTaskbtns = toGet('setTaskbtn', 'classname', true);
        osetTaskbtns[0].onclick = function() {
          writeLayer('刷新任务');
          refreshfun(4); // 等同于 this.getAttribute("data-index") * 1;
          orefreshbtn.innerText = '确定日刷任务*';
        }
        osetTaskbtns[1].onclick = function() {
          writeLayer('刷新任务');
          refreshfun(5);
          orefreshbtn.innerText = '确定周刷任务*';
        }
        osetTaskbtns[2].onclick = function() {
          writeLayer('刷新任务');
          refreshfun(6);
          orefreshbtn.innerText = '确定月刷任务*';
        }

        function loadBook() {
          obookmenu.onclick = function(e) {
            var olis = obookmenu.getElementsByTagName('li');
            var event = e || window.event;
            var ele = event.target || event.srcElement;
            var index = ele.getAttribute('data-id') * 1;
            if (index !== -1 && index !== txtpartshow) {
              olis[index].classList.add('active');
              txtparts[index].classList.add('active');
              olis[txtpartshow].classList.remove('active');
              txtparts[txtpartshow].classList.remove('active');
              txtpartshow = index;
              if (isOpenSetting) {
                oshowings[newpartshow].style.top = '52px';
                osettingbtn.setAttribute('data-change', '1');
              }
              window.scrollTo(0, 0);
            }
          }
        }

        var ojumptoknew = toGet('jumptoknew', 'classname');
        ojumptoknew.onclick = function() {
          var olis = obookmenu.getElementsByTagName('li');
          olis[txtpartshow].classList.remove('active');
          txtparts[txtpartshow].classList.remove('active');
          olis[2].classList.add('active');
          txtparts[2].classList.add('active');
          txtpartshow = 2;
          window.scrollTo(0, 0);
        }
        // 主题选择
        var othemeline = toGet('themeline', 'classname');
        othemeline.onclick = function() {
          chooseTheme(-1);
        };


        // 逻辑实现
        ofirstCon.onclick = function(e) {
          var event = e || window.event;
          var span = event.target || event.srcElement;
          if (span.tagName === 'SPAN') {
            var isSucess = false;
            var index = event.target.getAttribute('data-btn') * 1;
            var inputs = ofirstCon.getElementsByTagName('input');
            var val = 0;
            var resultChoose = Math.floor(index / 2) + 1;
            if (index <= 3) {
              val = inputs[index + 1].value * 1;
              if (val && val >= 1 && val <= 100) {
                val = Math.round(val);
                let valA = userDefined['levela'];
                let valB = userDefined['levelb'];
                if (index === 2 && val < valB) { // A改-判断B无效情况
                  let old = inputs[4].getAttribute('placeholder') + '(失效)';
                  inputs[4].setAttribute('placeholder', old);
                }
                if (index <= 2 || index === 3 && val < valA) { // B改-需小于A
                  isSucess = true;
                }
                inputs[index + 1].value = '';
              } else {
                val = 0;
              }
              if (index === 0 && val) {
                userDefined['tasknum'] = val;
              } else if (index === 1 && val) {
                userDefined['difficult'] = val / 100;
              } else if (index === 2 && val) {
                userDefined['levela'] = val;
              } else if (index === 3 && val) {
                userDefined['levelb'] = val;
              }
            } else if (index >= 4 && index < 7) {
              // debugger
              writeLayer('刷新任务');
              refreshfun(index);
              if (index === 4) {
                orefreshbtn.innerText = '确定日刷任务*';
              } else if (index === 5) {
                orefreshbtn.innerText = '确定周刷任务*';
              } else if (index === 6) {
                orefreshbtn.innerText = '确定月刷任务*';
              }
            } else if (index === 7) {
              resultChoose = 0;
              val = inputs[0].value * 1;
              if (val && val >= 1) {
                isSucess = true;
                val = Math.round(val);
                inputs[0].value = '';
                userDefined['restTime'] = val;
              }
            } else if (index === 8) { // 做事类型自定义
              setText('做事类型', 'doType');
            } else if (index === 9) { // 可用方法自定义
              setText('可用方法', 'betterWay');
            } else if (index === 10) {
              writeLayer('定期任务');
              orefreshbtn.innerText = '新增定期任务';
              writeboxTips.innerText = '( 每次添加一项，例如“元旦要聚会 2022-01-01” )';
            } else if (index === 11) {
              resultChoose = 3;
              val = inputs[5].value * 1;
              if (val >= 0) {
                isSucess = true;
                val = Math.round(val);
                inputs[5].value = '';
                userDefined['taskMentionTime'] = val;
                otaskMentionNum.innerText = val;
                isToNotice();
              }
            } else if (index === 12) { // 链接互用
              settingOpen();
              toMainSquare(2);
              linknectShowFun();
            }else if(index === 13){ // 日期倒计时
              writeLayer('日期倒计时');
              writebox.value = countdownTxt;
              orefreshbtn.innerText = '定义日期倒计时';
              writeboxTips.innerText = '( 呈现在右上角日期前面，内容如“庆典 2022-01-01” )';
            }

            function setText(str, name) {
              menuBtns[16].innerText = '确定' + str + '*';
              menuBtns[16].classList.add('active');
              menuBtns[16].title = '启动页的' + str + '，设置为空时恢复默认值';
              menuBtns[16].setAttribute('data-name', name);
              writebox.value = userDefined[name] || txtChooe[name];
              menuBtns[5].innerText = '加入随记';
              writeLayer('启动页自定义');
              writeboxTips.innerText = '( 正在修改启动页 ' + str + ' 的选项…… )';
            }


            if (isSucess) {
              oResults[resultChoose].innerText = '(成功)';
              localSave('userDefined', userDefined, 'object');
              if (index === 7) {
                userdefinedfun();
              } else {
                userdefinedfun('setting');
              }
              if (index === 2 || index === 3) {
                showNote(analyseDiff);
              }
              if (index === 0 || index === 1) {
                checkSummary();
              }
            } else {
              if (index <= 3 || index === 7 || index === 11) {
                oResults[resultChoose].innerText = '(失败)';
              }
            }

          }
        }
        var otaskaddbtn = toGet('taskaddbtn', 'classname');
        otaskaddbtn.onclick = function() {
          writeLayer('定期任务');
          orefreshbtn.innerText = '新增定期任务';
          writeboxTips.innerText = '( 每次添加一项，例如“元旦要聚会 2022-01-01” )';
        }
        odataclears[18].onclick = allDelFun;
        var odelbtns = toGet('delbtn', 'classname', true);
        var otoDeletedatas = toGet('toDeletedata', 'classname', true);
        odelbtns[0].onclick = function() {
          allDelFun('1');
        };
        odelbtns[1].onclick = function() {
          allDelFun('2');
        };
        odelbtns[2].onclick = function() {
          allDelFun('3');
        };
        otoDeletedatas[0].onclick = function() {
          allDelFun('4');
        };
        otoDeletedatas[1].onclick = function() {
          allDelFun('2');
        };

        function allDelFun(index = 'none') {
          var isDel = false;
          var isCheck = false;
          // 打卡数据 lastDaka checkDaka{} dakadate[] dakadateObj{}
          if (odataclears[0].checked || index === '0') {
            var oulCheck = toGet('dakaUl', 'classname');
            dakaData = {};
            dakaDays = '';
            localSave('checkDaka', dakaData, 'object');
            localSave('lastDaka', '重置');
            localDel('dakadate');
            localDel('dakadateObj');
            everyDay = true;
            statusBtn.classList.remove('hascheck');
            statusBtn.innerText = "未";
            daysBtn[0].innerText = 0;
            daysBtn[1].innerText = 0;
            oulCheck.innerHTML = '';
            paint();
            odataclears[0].checked = false;
            isDel = true;
            isCheck = true;
          }
          // 进程分析数据
          if (odataclears[1].checked || index === '1') {
            localSave('analyseData', '重置');
            analyseList = [];
            analyseDiff = 0;
            showNote(0);
            cancelStar();
            odataclears[1].checked = false;
            isDel = true;
          }
          // 完成任务 finishlist[] finishdate[] finishpercent{} 
          // finishObj
          if (odataclears[2].checked || index === '2') {
            let lastDelFinishDate = localGet('lastDelFinishDate', 'object')?localGet('lastDelFinishDate', 'object'):[];
            var oldfinishItem = localGet('oldfinishItem', 'object')?localGet('oldfinishItem', 'object'):[];
            let nowobj = {};
            let reg = /^@([\u4e00-\u9fa5a-z-_0-9]+)\s/;
            for(let dd = 0; dd < finishList.length; dd++){
              let value = finishList[dd].slice(15);
              if (reg.test(value)) {
                let sign = reg.exec(value)[1];
                let tmp = nowobj[sign]?nowobj[sign]:[];
                tmp[tmp.length] = today + ' ' + value.slice(sign.length + 1);
                nowobj[sign] = tmp;
              }
            }
            oldfinishItem[oldfinishItem.length] = nowobj;
            lastDelFinishDate[lastDelFinishDate.length] = today;
            localSave('oldfinishItem', oldfinishItem, 'object');
            localSave('lastDelFinishDate', lastDelFinishDate, 'object');
            
            finishAll = 0; // 任务总数
            finishObj = {}; // 任务对象，日期-[完成率，总数]
            finishList = [];
            
            localDel('finishlist');
            localDel('finishdate');
            // localDel('finishpercent');
            datasimpleshow(finishList, places[1], "simple");
            datasimpleshow(finishList, uls[4], 'simple');
            odataclears[2].checked = false;
            showFinishtask();
            checkSummary('delete');
            isDel = true;
          }
          // 记忆卡数据清除
          if (odataclears[3].checked || index === '3') {
            localDel('memoryObj');
            odataclears[3].checked = false;
            loadMemory();
            memorylist = [];
            omemory = {};
            uls[0].style.display = 'none';
            otoMemorypart.classList.remove('active');
            isDel = true;
          }
          // 清单数据清除
          if (odataclears[4].checked || index === '4') {
            for (let m = 0; m < 7; m++) {
              if (m >= 3 && m <= 5) {
                continue;
              }
              let name = datalist[m];
              beforeData[name] = [];
            }
            uls[1].innerHTML = '';
            uls[2].innerHTML = '';
            uls[3].innerHTML = '';
            dolist.innerHTML = '';
            daylist.innerHTML = '';
            waitlist.innerHTML = '';
            recycle.innerHTML = '';
            thingsNums[0].innerText = 0;
            thingsNums[1].innerText = 0;
            thingsNums[2].innerText = 0;
            saveData();
            localSave('dolist', '');
            changeFinishProgress(0, 0);
            odataclears[4].checked = false;
            isDel = true;
          }

          // 检查卡
          if (odataclears[5].checked) {
            beforeData['checkList'] = [];
            places[0].innerHTML = '';
            localDel('checklist');
            odataclears[5].checked = false;
            isDel = true;
          }
          // 小本本
          if (odataclears[6].checked) {
            beforeData['summaryList'] = [];
            places[2].innerHTML = '';
            localDel('summarylist');
            odataclears[6].checked = false;
            isDel = true;
          }
          // 刷新任务
          if (odataclears[7].checked) {
            delRefresh = [];
            refreshObj = {};
            tmpRefresh = [];
            localDel('delRefresh');
            localDel('refreshlist');
            refresh.innerHTML = '';
            var obtns = document.querySelectorAll('.firstCon .refreshbtn');
            var statetxts = document.querySelectorAll('.refreshpart i');
            var refreshUls = document.querySelectorAll('.refreshUl');
            for (let irr = 0; irr < 3; irr++) {
              obtns[irr].innerText = obtns[irr].getAttribute('data-txt');
              statetxts[irr].innerText = ' (未开启)';
              refreshUls[irr].innerHTML = '';
            }
            changeFinishProgress();
            odataclears[7].checked = false;
            isDel = true;
          }
          // 删除所有刷新任务的完成记录
          if (odataclears[8].checked) {
            delRefresh = [];
            localDel('delRefresh');
            refreshfun();
            refreshDetailFun();
            changeFinishProgress();
            odataclears[8].checked = false;
            isDel = true;
          }

          // 定期任务
          if (odataclears[9].checked) {
            regularObj = {};
            noticeDates = '';
            localDel('regularObj');
            localDel('noticeDates');
            oregularUl.innerHTML = '';
            oregularUlPass.innerHTML = '';
            opassline.className = 'passline hidden';
            otaskwarn.className = 'taskwarn';
            odataclears[9].checked = false;
            isDel = true;
          }
          // 参考资料
          if (odataclears[10].checked) {
            beforeData['tmpReference'] = [];
            reference.innerHTML = '';
            saveData();
            odataclears[10].checked = false;
            isDel = true;
          }
          // 收集箱
          if (odataclears[11].checked) {
            datacollectbox = [];
            ocollectUl.innerHTML = '';
            ocollectPnums[0].innerHTML = 0;
            ocollectPnums[1].innerHTML = 0;
            tempcheckcountnum = 0;
            localSave('collect', datacollectbox, 'object');
            odataclears[11].checked = false;
            isDel = true;
          }
          // 回收箱
          if (odataclears[12].checked) {
            beforeData['tmpRecycle'] = [];
            recycle.innerHTML = '';
            saveData();
            odataclears[12].checked = false;
            isDel = true;
          }
          // 全部
          if (odataclears[13].checked) {
            localStorage.clear();
            window.location.reload();
            isDel = true;
          }
          // 自定义数据清除
          if (odataclears[14].checked) {
            let ouserDefined = {
              'levela': 80,
              'levelb': 65,
              'tasknum': 10,
              'difficult': 0.3,
              'themeMode': 0,
              'searchWeb': 0,
              'deleteChose': 0,
              'audioChose': 0,
              'unshowNoneChose': 0,
              'recordSearchChose': 0,
              'outputChose': 'all',
              'restTime': 300,
              'doType': '整理*社交*生活*尝试*学习*项目*教学*反三',
              'betterWay': '实践试错*提问搜索*视频-模块化*实战模仿*导图-联想分类*讨论*故事',
              'taskMentionTime': 3,
              'tolinkrefer': 0
            };
            localSave('userDefined', ouserDefined, 'object');
            odataclears[14].checked = false;
            // debugger
            userdefinedfun();
            isDel = true;
            isCheck = true;
          }
          // 搜索记录
          if (odataclears[15].checked) {
            localDel('searchData');
            odataclears[15].checked = false;
            isDel = true;
          }
          // 项目失效数据
          if (odataclears[16].checked) {
            existItem = localGet('existItem', 'object')?localGet('existItem', 'object'):['模板'];
            for(let itemid in itemObj){
              
              if(existItem.indexOf(itemid) === -1){
                delete itemObj[itemid];
              }
            }
            localSave('itemObj', itemObj, 'object');
            odataclears[16].checked = false;
            isDel = true;
          }
          // 所有项目数据
          if (odataclears[17].checked) {
            localDel('filedlist');
            localDel('lastDelFinishDate');
            localDel('oldfinishItem');
            localDel('itemObj');
            filedlist = [];
            lastDelFinishDate = [];
            oldfinishItem = [];
            itemObj = {};
            datashow(beforeData.tmpProject, project);
            odataclears[17].checked = false;
            isDel = true;
          }
          
          if (isDel) {
            oResults[4].innerText = '(成功)';
          }
          if (isCheck && oshowings[2].style.display === 'block') {
            // 统筹数据的更新
            checkSummary();
          }
        }

        function chooseTheme(num) {
          var chose = -1;
          if (othemechooses[0].checked) {
            chose = 0;
            document.body.className = 'theme-light';

          }
          if (othemechooses[1].checked) {
            chose = 1;
            document.body.className = 'theme-gray';
          }
          if (othemechooses[2].checked) {
            chose = 2;
            document.body.className = 'theme-deep';
          }
          if (num === -1) {
            userDefined['themeMode'] = chose;
            localSave('userDefined', userDefined, 'object');
          }
        }
        document.onkeydown = function(event) {
          var e = event || window.event;
          var keycode = e.keyCode || e.which;
          var iscloseSetting = false;
          var iscloseWriting = false;
          var isclosepopup = false;
          if (e.altKey && keycode == 65) { // alt+a 主编辑页
            toNewpart(newpartshow);
            if (simplebtns[0].innerText === '切编辑') {
              omain.classList.remove('unshow');
              var oparts = toGet('content', 'classname', true);
              oparts[0].style.display = "block";
              oparts[1].style.display = "none";
              omain.classList.remove('simple');
              simplebtns[0].innerText = "切简版";
              omenu.classList.add('on');
            }

            isclosepopup = true;
            iscloseSetting = true;
            iscloseWriting = true;
          }
          if (e.altKey && keycode == 66) { // alt+b 收集箱
            toMainSquare(0);
            iscloseSetting = true;
            iscloseWriting = true;
          }
          if (e.altKey && keycode == 67) { // alt+c 检查页
            toNewpart(2);
            isclosepopup = true;
            iscloseWriting = true;
          }

          if (e.altKey && keycode == 73) { // alt+i 项目管理
            toMainSquare(4, '模板');
            iscloseSetting = true;
            iscloseWriting = true;
          }
          
          if (e.altKey && keycode == 81) { // alt+q 问题记录
            toMainSquare(3);
            iscloseSetting = true;
            iscloseWriting = true;
          }
          if (e.altKey && keycode == 83) { // alt+s 搜索
            webSearchFun();
          }
          if (e.altKey && keycode == 84) { // alt+t  标签页搜索
            toMainSquare(1);
            var val = osimpleWriteBox.value || writebox.value;
            if (val) {
              tosearchtag(val);
            }
            iscloseSetting = true;
            iscloseWriting = true;
          }
          if (e.altKey && keycode == 87) { // alt+w  书写框
            writeLayer();
          }
          if (keycode == 27) {
            iscloseSetting = true;
            iscloseWriting = true;
          }
          if (e.altKey && keycode == 90) {
            isclosepopup = true;
          }
          if (isclosepopup && omorefunpart.classList.contains('open')) {
            toMainSquare(numOfSection);
          }

          if (floor.style.display === 'block') {
            summPartToggle();
          }
          if (iscloseSetting && osetting.classList.contains('active')) {
            settingOpen(); // 主页面，收集箱，标签页，问题记录页面快捷键打开时关闭设置面板
          }
          if (iscloseWriting && write.style.display === 'block') {
            writeLayer();
          }

        }

        writebox.onkeydown = function(event) {
          var e = event || window.event;
          var keycode = e.keyCode || e.which;
          if (e.altKey && keycode == 13) { // alt+enter
            inputDataSet();
          }
          if (e.altKey && keycode == 68) { // alt+d
            quickTodo();
          }
        }

        var tOhelpTip = null;
        var osearchModeline = toGet('searchModeline', 'classname');
        osearchModeline.onclick = function(e) {
          clearTimeout(tOhelpTip);
          var event = e || window.event;
          var ele = event.target || event.srcElement;
          if(ele.tagName === 'INPUT' || ele.tagName === 'SPAN'){
            for (let i = 0; i < osearchModes.length; i++) {
              if (osearchModes[i].checked) {
                searchListIndex = i;
                userDefined['searchWeb'] = i;
                localSave('userDefined', userDefined, 'object');
                oResults[5].innerText = '(OK)';
                tOhelpTip = setTimeout(function() {
                  oResults[5].innerText = '';
                }, 2000);
                break;
              }
            }
          }
          
        }

        // 开启 or 关闭 特殊项
        var oreferLinkbtn = document.querySelector('.referLink .restartbtn');
        oreferLinkbtn.onclick = function(e) {
          moreStart(e, 'tolinkrefer');
        }

        var oRestarts = document.querySelectorAll('.thirdCon .restartbtn');
        oRestarts[0].onclick = function(e) { // 每次生成数据后都清空表单 
          moreStart(e, 'deleteChose');
        }
        oRestarts[1].onclick = function(e) { // 倒计时结束后播放音效
          moreStart(e, 'audioChose');
        }
        oRestarts[2].onclick = function(e) { // 简化输出处理数据（只含完成清单+小本本+参考卡）
          moreStart(e, 'outputChose');
          if (simplebtns[0].innerText === '切编辑' && newpartshow === -1) { // 在简版页
            toOutput('solve', 'copy');
          }
        }
        oRestarts[3].onclick = function(e) { // 完成清单搜索结果显示没有完成项的日期
          moreStart(e, 'unshowNoneChose');
        }
        oRestarts[4].onclick = function(e) { // 记录搜索内容
          moreStart(e, 'recordSearchChose');
        }

        function moreStart(event, name) {
          var e = event || window.event;
          var element = e.target || e.srcElement;
          var txt = element.getAttribute('data-txt');
          if (txt === '开启') {
            element.setAttribute('data-txt', '关闭');
            element.classList.add('active');
            if (name === 'outputChose') {
              userDefined[name] = 'simple';
            } else {
              userDefined[name] = 1;
            }

          } else {
            element.setAttribute('data-txt', '开启');
            element.classList.remove('active');
            if (name === 'outputChose') {
              userDefined[name] = 'all';
            } else {
              userDefined[name] = 0;
            }
          }
          if (name === 'tolinkrefer') {
            tolinkReferFun(); // 显示
          }
          if (newpartshow === 2 && name === 'unshowNoneChose') {
            showFinishtask();
          }
          // if(name === 'recordSearchChose'){
          //   recordChoseStr = localGet('searchData', 'string')?localGet('searchData', 'string'):'';
          // }
          clearTimeout(tOhelpTip);
          localSave('userDefined', userDefined, 'object');
        }
        var olinkReference = toGet('linkReference', 'classname');

        function tolinkReferFun() {
          // 前提有linklist
          if (userDefined['tolinkrefer']) {
            oreferLinkbtn.setAttribute('data-txt', '关闭');
            oreferLinkbtn.classList.add('active');
            let list = linklist;
            if (list.length !== 0) {
              let str = '';
              for (let a = 0; a < list.length; a++) {
                if (list[a].trim()) {
                  str = str + '<li>' + list[a].trim() +
                    '<span class="deletebtn line" onclick="simpleDelete(event)">×</span></li>';
                }
              }
              olinkReference.innerHTML = str;
              olinkReference.style.display = 'block';
            } else {
              olinkReference.style.display = 'none';
            }

          } else {
            oreferLinkbtn.classList.remove('active');
            oreferLinkbtn.setAttribute('data-txt', '开启');
            olinkReference.innerHTML = '';
            olinkReference.style.display = 'none';
          }
        }
      </script>
  <!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://fastly.jsdelivr.net/gh/tzy13755126023/BLOG_SOURCE/theme_f/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = '/posts/,/about/'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_injector_config();
  }
  </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax src="/clock/clock.min.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://pythongithubcalendarapi.vercel.app/api?sunchauvel",['#e4dfd7', '#f9f4dc', '#f7e8aa', '#f7e8aa', '#f8df72', '#fcd217', '#fcc515', '#f28e16', '#fb8b05', '#d85916', '#f43e06'],'sunchauvel')
    }
  </script><!-- hexo injector body_end end --></body>
</html></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Twikoo</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/head.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">sunshywoo</div><div class="author-info__description">Life is but a span.</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">2</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">2</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://sunshywar.vercel.app/"><i></i><span>NEVER NOT NOW.</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/sunchauvel" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:sunchauvel@hotmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://sunchauvel.github.io/atom.xml" target="_blank" title="rss"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="xpand" style="height:200px;"><canvas class="illo" width="800" height="800" style="max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;"></canvas></div><script src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/twopeople1.js"></script><script src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/zdog.dist.js"></script><script id="rendered-js" src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/twopeople.js"></script><style>.card-widget.card-announcement {
margin: 0;
align-items: center;
justify-content: center;
text-align: center;
}
canvas {
display: block;
margin: 0 auto;
cursor: move;
}</style><div class="card-widget card-pixiv"><div class="card-content"><div class="item-headline"><i class="fa fa-image" aria-hidden="true"></i><span>Pixiv Daily Top50</span><iframe src="https://cloud.mokeyjay.com/pixiv" frameborder="0" style="width:99%;height:380px;margin:0;"></iframe></div></div></div><div class="card-widget card-map"><div class="card-content"><div class="item-headline"><i class="fa fa-globe-asia" aria-hidden="true"></i><span>Visitor map</span></div><script id="clstr_globe" type="text/javascript" defer="defer" src="//clustrmaps.com/map_v2.js?d=-mVCBUfSI_uCxJ4pw_lIYnWwB1eiy7IBxXbD--Jg10k&amp;cl=ffffff&amp;w=a"></script></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/articles/138341d8.html" title="如何从零开始搭建 CI/CD 流水线_DevOps_Saurabh Kulshrestha_InfoQ 精选文章"><img src="https://myhkw.cn/open/img/lol" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何从零开始搭建 CI/CD 流水线_DevOps_Saurabh Kulshrestha_InfoQ 精选文章"/></a><div class="content"><a class="title" href="/articles/138341d8.html" title="如何从零开始搭建 CI/CD 流水线_DevOps_Saurabh Kulshrestha_InfoQ 精选文章">如何从零开始搭建 CI/CD 流水线_DevOps_Saurabh Kulshrestha_InfoQ 精选文章</a><time datetime="2022-07-04T09:28:06.000Z" title="Created 2022-07-04 17:28:06">2022-07-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/58ec60d6.html" title="Linux命令学习之wc"><img src="https://myhkw.cn/open/img/acg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux命令学习之wc"/></a><div class="content"><a class="title" href="/articles/58ec60d6.html" title="Linux命令学习之wc">Linux命令学习之wc</a><time datetime="2018-07-09T13:12:11.000Z" title="Created 2018-07-09 21:12:11">2018-07-09</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-bolt"></i><span>Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/Linux/" style="font-size: 1.1em; color: #999">Linux</a> <a href="/tags/command/" style="font-size: 1.1em; color: #999">command</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">July 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2018/07/"><span class="card-archive-list-date">July 2018</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">2</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2012-07-14T08:23:27.000Z"></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">3.1k</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-11-26T10:00:33.677Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023  <i id="heartbeat" class="fa fas fa-heartbeat"></i> sunshywoo</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.<p> <a target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a>&nbsp; <a target="_blank" href="https://butterfly.js.org/"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a>&nbsp; <a target="_blank" href="https://www.jsdelivr.com/"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a> &nbsp; <a target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Gtihub托管"></a>&nbsp; <a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="fa-solid fa-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="fa-solid fa-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="fa-solid fa-arrow-rotate-right"></i></div><div class="rightMenu-item" id="menu-home"><i class="fa-solid fa-house"></i></div></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" id="menu-radompage" href="/random.html"><i class="fa-solid fa-shoe-prints"></i><span>Try new page</span></a><div class="rightMenu-item" id="menu-darkmode"><i class="fa-solid fa-moon"></i><span>DarkTheme</span></div><div class="rightMenu-item" id="menu-translate"><i class="fa-solid fa-earth-asia"></i><span>Turn CH/TW</span></div></div></div><div id="rightmenu-mask" onclick="RemoveRightMenu()"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'hkd3bgeEavqodk1mMDXnMDog-MdYXbMMI',
      appKey: 'VWFn2f86HHx1WzyaKgmc0iRB',
      placeholder: 'Please leave your footprints',
      avatar: 'wavatar',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'en',
      recordIP: true,
      serverURLs: 'https://hkd3bgee.api.lncldglobal.com',
      emojiCDN: '',
      emojiMaps: {
          "1": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/1.gif",
          "2": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/2.gif",
          "3": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/3.gif",
          "4": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/4.gif",
          "5": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/5.gif",
          "6": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/6.gif",
          "7": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/7.gif",
          "8": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/8.gif",
          "9": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/9.gif",
          "10": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/10.gif",
          "11": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/11.gif",
          "12": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/12.gif",
          "13": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/13.gif",
          "14": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/14.gif",
          "15": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/15.gif",
          "16": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/16.gif",
          "17": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/17.gif",
          "18": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/18.gif",
          "19": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/19.gif",
          "20": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/20.gif",
          "21": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/21.gif",
          "22": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/22.gif",
          "23": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/23.gif",
          "24": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/24.gif",
          "25": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/25.gif",
          "26": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/26.gif",
          "27": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/27.gif",
          "28": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/28.gif",
          "29": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/29.gif",
          "30": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/30.gif",
          "31": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/31.gif",
          "32": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/32.gif",
          "33": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/33.gif",
          "34": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/34.gif",
          "35": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/35.gif",
          "36": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/36.gif",
          "37": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/37.gif",
          "38": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/38.gif",
          "39": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/39.gif",
          "40": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/40.gif",
          "41": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/41.gif",
          "42": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/42.gif",
          "43": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/43.gif",
          "44": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/44.gif",
          "45": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/45.gif",
          "46": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/46.gif",
          "47": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/47.gif",
          "48": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/48.gif",
          "49": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/49.gif",
          "50": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/50.gif",
          "51": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/51.gif",
          "52": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/52.gif",
          "53": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/53.gif",
          "54": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/54.gif",
          "55": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/55.gif",
          "56": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/56.gif",
          "57": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/57.gif",
          "58": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/58.gif",
          "59": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/59.gif",
          "60": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/60.gif",
          "61": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/61.gif",
          "62": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/62.gif",
          "63": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/63.gif",
          "64": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/64.gif",
          "65": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/65.gif",
          "66": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/66.gif",
          "67": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/67.gif",
          "68": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/68.gif",
          "69": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/69.gif",
          "70": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/70.gif",
          "71": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/71.gif",
          "72": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/72.gif",
          "73": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/73.gif",
          "74": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/74.gif",
          "75": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/75.gif",
          "76": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/76.gif",
          "77": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/77.gif",
          "78": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/78.gif",
          "79": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/79.gif",
          "80": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/80.gif",
          "81": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/81.gif",
          "82": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/82.gif",
          "83": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/83.gif",
          "84": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/84.gif",
          "85": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/85.gif",
          "86": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/86.gif",
          "87": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/87.gif",
          "88": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/88.gif",
          "89": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/89.gif",
          "90": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/90.gif",
          "91": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/91.gif",
          "92": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/92.gif",
          "93": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/93.gif",
          "94": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/94.gif",
          "95": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/95.gif",
          "96": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/96.gif",
          "97": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/97.gif",
          "98": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/98.gif",
          "99": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/99.gif",
          "100": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/100.gif",
          "101": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/101.gif",
          "102": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/102.gif",
          "103": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/103.gif",
          "104": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/104.gif",
          "105": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/105.gif",
          "106": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/106.gif",
          "107": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/107.gif",
          "108": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/108.gif",
          "109": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/109.gif",
          "110": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/110.gif",
          "111": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/111.gif",
          "112": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/112.gif",
          "113": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/113.gif",
          "114": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/114.gif",
          "115": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/115.gif",
          "116": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/116.gif",
          "117": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/117.gif",
          "118": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/118.gif",
          "119": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/119.gif",
          "120": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/120.gif",
          "121": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/121.gif",
          "122": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/122.gif",
          "123": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/123.gif",
          "124": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/124.gif",
          "125": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/125.gif",
          "126": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/126.gif",
          "127": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/127.gif",
          "128": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/128.gif",
          "129": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/129.gif",
          "130": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/130.gif",
          "131": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/131.gif",
          "132": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/132.gif",
          "133": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/133.gif",
          "134": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/134.gif",
          "135": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/135.gif",
          "136": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/136.gif",
          "137": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/137.gif",
          "138": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/138.gif",
          "139": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/139.gif",
          "140": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/140.gif",
          "141": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/141.gif",
          "142": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/142.gif",
          "143": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/143.gif",
          "144": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/144.gif",
          "145": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/145.gif",
          "146": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/146.gif",
          "147": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/147.gif",
          "148": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/148.gif",
          "149": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/149.gif",
          "150": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/150.gif",
          "151": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/151.gif",
          "152": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/152.gif",
          "153": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/153.gif",
          "154": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/154.gif",
          "155": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/155.gif",
          "156": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/156.gif",
          "157": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/157.gif",
          "158": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/158.gif",
          "159": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/159.gif",
          "160": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/160.gif",
          "161": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/161.gif",
          "162": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/162.gif",
          "163": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/163.gif",
          "164": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/164.gif",
          "165": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/165.gif",
          "166": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/166.gif",
          "167": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/167.gif",
          "168": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/168.gif",
          "169": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/169.gif",
          "170": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/170.gif",
          "171": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/171.gif",
          "172": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/172.gif",
          "173": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/173.gif",
          "174": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/174.gif",
          "175": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/175.gif",
          "176": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/176.gif",
          "177": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/177.gif",
          "178": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/178.gif",
          "179": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/179.gif",
          "180": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/180.gif",
          "181": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/181.gif",
          "182": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/182.gif",
          "183": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/183.gif",
          "184": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/184.gif",
          "185": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/185.gif",
          "186": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/186.gif",
          "187": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/187.gif",
          "188": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/188.gif",
          "189": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/189.gif",
          "190": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/190.gif",
          "191": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/191.gif",
          "192": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/192.gif",
          "193": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/193.gif",
          "194": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/194.gif",
          "195": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/195.gif",
          "196": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/196.gif",
          "197": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/197.gif",
          "198": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/198.gif",
          "199": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/199.gif",
          "200": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/200.gif",
          "201": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/201.gif",
          "202": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/202.gif",
          "203": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/203.gif",
          "204": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/204.gif",
          "205": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/205.gif",
          "206": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/206.gif",
          "207": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/207.gif",
          "0": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/qq_2020f/0.gif",
          "bili_tv_gif_黑人问号": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/黑人问号.gif",
          "bili_tv_gif_抓狂": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/抓狂.gif",
          "bili_tv_gif_再见": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/再见.gif",
          "bili_tv_gif_晕": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/晕.gif",
          "bili_tv_gif_疑问": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/疑问.gif",
          "bili_tv_gif_斜眼笑": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/斜眼笑.gif",
          "bili_tv_gif_笑哭": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/笑哭.gif",
          "bili_tv_gif_无奈": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/无奈.gif",
          "bili_tv_gif_委屈": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/委屈.gif",
          "bili_tv_gif_微笑": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/微笑.gif",
          "bili_tv_gif_吐血": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/吐血.gif",
          "bili_tv_gif_偷笑": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/偷笑.gif",
          "bili_tv_gif_思考": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/思考.gif",
          "bili_tv_gif_睡着": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/睡着.gif",
          "bili_tv_gif_生气": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/生气.gif",
          "bili_tv_gif_生病": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/生病.gif",
          "bili_tv_gif_色": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/色.gif",
          "bili_tv_gif_亲亲": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/亲亲.gif",
          "bili_tv_gif_呕吐": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/呕吐.gif",
          "bili_tv_gif_难过": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/难过.gif",
          "bili_tv_gif_腼腆": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/腼腆.gif",
          "bili_tv_gif_流汗": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/流汗.gif",
          "bili_tv_gif_流鼻血": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/流鼻血.gif",
          "bili_tv_gif_困": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/困.gif",
          "bili_tv_gif_抠鼻子": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/抠鼻子.gif",
          "bili_tv_gif_可爱": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/可爱.gif",
          "bili_tv_gif_惊吓": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/惊吓.gif",
          "bili_tv_gif_坏笑": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/坏笑.gif",
          "bili_tv_gif_害羞": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/害羞.gif",
          "bili_tv_gif_鼓掌": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/鼓掌.gif",
          "bili_tv_gif_尴尬": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/尴尬.gif",
          "bili_tv_gif_发怒": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/发怒.gif",
          "bili_tv_gif_发财": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/发财.gif",
          "bili_tv_gif_调皮": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/调皮.gif",
          "bili_tv_gif_点赞": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/点赞.gif",
          "bili_tv_gif_呆": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/呆.gif",
          "bili_tv_gif_大佬": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/大佬.gif",
          "bili_tv_gif_大哭": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/大哭.gif",
          "bili_tv_gif_打脸": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/打脸.gif",
          "bili_tv_gif_馋": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/馋.gif",
          "bili_tv_gif_闭嘴": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/闭嘴.gif",
          "bili_tv_gif_鄙视": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/鄙视.gif",
          "bili_tv_gif_白眼": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/白眼.gif",
          "bili_tv_gif_doge": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/bili_tv_gif/doge.gif",
          "menhera-chan_SR_14": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_14.jpg",
          "menhera-chan_SR_22": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_22.jpg",
          "menhera-chan_SR_23": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_23.jpg",
          "menhera-chan_SR_102": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_102.jpg",
          "menhera-chan_SR_101": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_101.jpg",
          "menhera-chan_SR_8": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_8.jpg",
          "menhera-chan_SR_61": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_61.jpg",
          "menhera-chan_SR_86": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_86.jpg",
          "menhera-chan_SR_45": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_45.jpg",
          "menhera-chan_SR_34": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_34.jpg",
          "menhera-chan_SR_77": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_77.jpg",
          "menhera-chan_SR_79": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_79.jpg",
          "menhera-chan_SR_21": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_21.jpg",
          "menhera-chan_SR_18": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_18.jpg",
          "menhera-chan_SR_41": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_41.jpg",
          "menhera-chan_SR_65": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_65.jpg",
          "menhera-chan_SR_64": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_64.jpg",
          "menhera-chan_SR_63": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_63.jpg",
          "menhera-chan_SR_62": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_62.jpg",
          "menhera-chan_SR_60": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_60.jpg",
          "menhera-chan_SR_59": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_59.jpg",
          "menhera-chan_SR_58": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_58.jpg",
          "menhera-chan_SR_57": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_57.jpg",
          "menhera-chan_SR_56": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_56.jpg",
          "menhera-chan_SR_55": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_55.jpg",
          "menhera-chan_SR_54": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_54.jpg",
          "menhera-chan_SR_53": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_53.jpg",
          "menhera-chan_SR_53(1)": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_53(1).jpg",
          "menhera-chan_SR_52": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_52.jpg",
          "menhera-chan_SR_51": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_51.jpg",
          "menhera-chan_SR_50": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_50.jpg",
          "menhera-chan_SR_49": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_49.jpg",
          "menhera-chan_SR_48": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_48.jpg",
          "menhera-chan_SR_47": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_47.jpg",
          "menhera-chan_SR_46": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_46.jpg",
          "menhera-chan_SR_44": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_44.jpg",
          "menhera-chan_SR_43": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_43.jpg",
          "menhera-chan_SR_42": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_42.jpg",
          "menhera-chan_SR_40": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_40.jpg",
          "menhera-chan_SR_39": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_39.jpg",
          "menhera-chan_SR_38": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_38.jpg",
          "menhera-chan_SR_37": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_37.jpg",
          "menhera-chan_SR_36": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_36.jpg",
          "menhera-chan_SR_35": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_35.jpg",
          "menhera-chan_SR_33": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_33.jpg",
          "menhera-chan_SR_32": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_32.jpg",
          "menhera-chan_SR_31": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_31.jpg",
          "menhera-chan_SR_30": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_30.jpg",
          "menhera-chan_SR_29": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_29.jpg",
          "menhera-chan_SR_28": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_28.jpg",
          "menhera-chan_SR_27": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_27.jpg",
          "menhera-chan_SR_26": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_26.jpg",
          "menhera-chan_SR_25": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_25.jpg",
          "menhera-chan_SR_24": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_24.jpg",
          "menhera-chan_SR_20": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_20.jpg",
          "menhera-chan_SR_19": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_19.jpg",
          "menhera-chan_SR_17": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_17.jpg",
          "menhera-chan_SR_16": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_16.jpg",
          "menhera-chan_SR_15": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_15.jpg",
          "menhera-chan_SR_13": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_13.jpg",
          "menhera-chan_SR_12": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_12.jpg",
          "menhera-chan_SR_11": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_11.jpg",
          "menhera-chan_SR_10": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_10.jpg",
          "menhera-chan_SR_9": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_9.jpg",
          "menhera-chan_SR_7": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_7.jpg",
          "menhera-chan_SR_6": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_6.jpg",
          "menhera-chan_SR_5": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_5.jpg",
          "menhera-chan_SR_4": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_4.jpg",
          "menhera-chan_SR_3": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_3.jpg",
          "menhera-chan_SR_2": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_2.jpg",
          "menhera-chan_SR_1": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_1.jpg",
          "menhera-chan_SR_120": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_120.jpg",
          "menhera-chan_SR_119": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_119.jpg",
          "menhera-chan_SR_118": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_118.jpg",
          "menhera-chan_SR_117": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_117.jpg",
          "menhera-chan_SR_116": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_116.jpg",
          "menhera-chan_SR_115": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_115.jpg",
          "menhera-chan_SR_114": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_114.jpg",
          "menhera-chan_SR_113": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_113.jpg",
          "menhera-chan_SR_112": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_112.jpg",
          "menhera-chan_SR_111": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_111.jpg",
          "menhera-chan_SR_110": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_110.jpg",
          "menhera-chan_SR_109": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_109.jpg",
          "menhera-chan_SR_108": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_108.jpg",
          "menhera-chan_SR_107": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_107.jpg",
          "menhera-chan_SR_106": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_106.jpg",
          "menhera-chan_SR_105": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_105.jpg",
          "menhera-chan_SR_104": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_104.jpg",
          "menhera-chan_SR_103": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_103.jpg",
          "menhera-chan_SR_100": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_100.jpg",
          "menhera-chan_SR_99": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_99.jpg",
          "menhera-chan_SR_98": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_98.jpg",
          "menhera-chan_SR_97": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_97.jpg",
          "menhera-chan_SR_96": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_96.jpg",
          "menhera-chan_SR_95": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_95.jpg",
          "menhera-chan_SR_94": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_94.jpg",
          "menhera-chan_SR_93": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_93.jpg",
          "menhera-chan_SR_92": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_92.jpg",
          "menhera-chan_SR_91": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_91.jpg",
          "menhera-chan_SR_90": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_90.jpg",
          "menhera-chan_SR_89": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_89.jpg",
          "menhera-chan_SR_88": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_88.jpg",
          "menhera-chan_SR_87": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_87.jpg",
          "menhera-chan_SR_85": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_85.jpg",
          "menhera-chan_SR_84": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_84.jpg",
          "menhera-chan_SR_83": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_83.jpg",
          "menhera-chan_SR_82": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_82.jpg",
          "menhera-chan_SR_81": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_81.jpg",
          "menhera-chan_SR_80": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_80.jpg",
          "menhera-chan_SR_78": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_78.jpg",
          "menhera-chan_SR_76": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_76.jpg",
          "menhera-chan_SR_75": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_75.jpg",
          "menhera-chan_SR_74": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_74.jpg",
          "menhera-chan_SR_73": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_73.jpg",
          "menhera-chan_SR_72": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_72.jpg",
          "menhera-chan_SR_71": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_71.jpg",
          "menhera-chan_SR_70": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_70.jpg",
          "menhera-chan_SR_69": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_69.jpg",
          "menhera-chan_SR_68": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_68.jpg",
          "menhera-chan_SR_67": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_67.jpg",
          "menhera-chan_SR_66": "https://fastly.jsdelivr.net/gh/tzy13755126023/emotion/menhera-chan/SR_66.jpg"
      },
      enableQQ: true,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-sunchauvel.vercel.app/',
      region: 'ap-shanghai'
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'https://twikoo-sunchauvel.vercel.app/',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Valine' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[link]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[code]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-sunchauvel.vercel.app/',
        region: 'ap-shanghai',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "Unable to get the data, please make sure the settings are correct."
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No Comment'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="5172410111" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-lrctype="1" data-preload="none" data-autoplay="true" muted></div><script src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script>
- <script type="text/javascript" src="/js/forbidenfn.js"></script><script defer src="https://fastly.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script defer src="https://fastly.jsdelivr.net/npm/hexo-theme-volantis@latest/source/js/issues.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script async data-pjax src="https://gcore.jsdelivr.net/gh/zhheo/JS-Heo@main/rightmenu/rightmenu.js"></script><script src="https://myhkw.cn/api/player/165806025659" id="myhk" key="165806025659" skin="cover" lr="l" m="1" au="0"></script><script src="https://cdn.jsdelivr.net/gh/flatblowfish/cave-draw/dist/cave-draw.min.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="/js/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":20,"vOffset":-20},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>